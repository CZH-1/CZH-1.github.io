<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>TS 对象类型 - 浮尘的博客</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="浮尘的博客"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="浮尘的博客"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="对象类型"><meta property="og:type" content="blog"><meta property="og:title" content="TS 对象类型"><meta property="og:url" content="https://czh-1.github.io/2024/03/21/TypeScript/ts-object-type/"><meta property="og:site_name" content="浮尘的博客"><meta property="og:description" content="对象类型"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://czh-1.github.io/img/og_image.png"><meta property="article:published_time" content="2024-03-21T06:17:20.000Z"><meta property="article:modified_time" content="2024-05-06T13:04:30.979Z"><meta property="article:author" content="浮尘"><meta property="article:tag" content="TypeScript"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://czh-1.github.io/2024/03/21/TypeScript/ts-object-type/"},"headline":"TS 对象类型","image":["https://czh-1.github.io/img/og_image.png"],"datePublished":"2024-03-21T06:17:20.000Z","dateModified":"2024-05-06T13:04:30.979Z","author":{"@type":"Person","name":"浮尘"},"description":"对象类型"}</script><link rel="canonical" href="https://czh-1.github.io/2024/03/21/TypeScript/ts-object-type/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Oxanium:wght@300;400;600&amp;family=Roboto+Mono"><link rel="stylesheet" href="/css/cyberpunk.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.2"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="浮尘的博客" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">文章</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/CZH-1"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2024-03-21T06:17:20.000Z" title="2024/3/21 下午2:17:20">2024-03-21</time>发表</span><span class="level-item"><time dateTime="2024-05-06T13:04:30.979Z" title="2024/5/6 下午9:04:30">2024-05-06</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/TypeScriptprivate/">TypeScriptprivate</a></span><span class="level-item">16 分钟读完 (大约2450个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">TS 对象类型</h1><div class="content"><blockquote>
<p>对象类型</p>
</blockquote>
<span id="more"></span>
<h2 id="对象类型"><a href="#对象类型" class="headerlink" title="对象类型"></a>对象类型</h2><p>在 <code>JavaScript</code> 中，最基本的将数据成组和分发的方式就是通过对象。在 TypeScript 中，我们通过对象类型 <code>（object types）</code> 来描述对象。<br>对象类型可以是匿名的：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">person: &#123; name: <span class="built_in">string</span>; age: <span class="built_in">number</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello &quot;</span> + person.<span class="property">name</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可以使用接口进行定义：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">person: Person</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello &quot;</span> + person.<span class="property">name</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者通过类型别名：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Person</span> = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params">person: Person</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello &quot;</span> + person.<span class="property">name</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="属性修饰符（Property-Modifiers）"><a href="#属性修饰符（Property-Modifiers）" class="headerlink" title="属性修饰符（Property Modifiers）"></a>属性修饰符（Property Modifiers）</h2><h3 id="可选属性"><a href="#可选属性" class="headerlink" title="可选属性"></a>可选属性</h3><p>对象类型中的每个属性可以说明它的类型、属性是否可选、属性是否只读等信息。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PaintOptions</span> &#123;</span><br><span class="line">  <span class="attr">shape</span>: <span class="title class_">Shape</span>;</span><br><span class="line">  xPos?: <span class="built_in">number</span>; <span class="comment">// 可选属性</span></span><br><span class="line">  yPos?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">paintShape</span>(<span class="params">opts: PaintOptions</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这个例子中，xPos 和 yPos 就是可选属性。因为他们是可选的，所以上面所有的调用方式都是合法的。<br>我们也可以尝试读取这些属性，但如果我们是在 <code>strictNullChecks</code> 模式下 <code>(tsconfig文件中，strictNullChecks默认为false)</code> ，TypeScript 会提示我们，属性值可能是 <code>undefined</code>。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">PaintOptions</span> &#123;</span><br><span class="line">  <span class="attr">shape</span>: <span class="title class_">Shape</span>;</span><br><span class="line">  xPos?: <span class="built_in">number</span>; <span class="comment">// 可选属性</span></span><br><span class="line">  yPos?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">paintShape</span>(<span class="params">opts: PaintOptions</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> xPos = opts.<span class="property">xPos</span>;              </span><br><span class="line">  <span class="comment">// (property) PaintOptions.xPos?: number | undefined</span></span><br><span class="line">  <span class="keyword">let</span> yPos = opts.<span class="property">yPos</span>;</span><br><span class="line">  <span class="comment">// (property) PaintOptions.yPos?: number | undefined</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  ===&gt; 针对 undefined 特殊处理为：</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">paintShape</span>(<span class="params">opts: PaintOptions</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> xPos = opts.<span class="property">xPos</span> === <span class="literal">undefined</span> ? <span class="number">0</span> : opts.<span class="property">xPos</span>;</span><br><span class="line">  <span class="comment">// let xPos: number</span></span><br><span class="line">  <span class="keyword">let</span> yPos = opts.<span class="property">yPos</span> === <span class="literal">undefined</span> ? <span class="number">0</span> : opts.<span class="property">yPos</span>;</span><br><span class="line">  <span class="comment">// let yPos: number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这种判断在 JavaScript 中很常见，以至于提供了专门的语法糖：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">paintShape</span>(<span class="params">&#123; shape, xPos = <span class="number">0</span>, yPos = <span class="number">0</span> &#125;: PaintOptions</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;x coordinate at&quot;</span>, xPos); <span class="comment">// (parameter) xPos: number</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;y coordinate at&quot;</span>, yPos); <span class="comment">// (parameter) yPos: number</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="readonly-属性"><a href="#readonly-属性" class="headerlink" title="readonly 属性"></a>readonly 属性</h3><p>在 TypeScript 中，属性可以被标记为 readonly，这不会改变任何运行时的行为，但在类型检查的时候，一个标记为 readonly的属性是不能被写入的。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">SomeType</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">prop</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params">obj: SomeType</span>) &#123;</span><br><span class="line">  <span class="comment">// We can read from &#x27;obj.prop&#x27;.</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`prop has the value &#x27;<span class="subst">$&#123;obj.prop&#125;</span>&#x27;.`</span>);</span><br><span class="line">  <span class="comment">// But we can&#x27;t re-assign it.</span></span><br><span class="line">  obj.<span class="property">prop</span> = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">  <span class="comment">// Cannot assign to &#x27;prop&#x27; because it is a read-only property.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>readonly</code> 仅仅表明属性本身是不能被重新写入的，属性内的值可以重新写入：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Home</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">resident</span>: &#123; <span class="attr">name</span>: <span class="built_in">string</span>; <span class="attr">age</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">visitForBirthday</span>(<span class="params">home: Home</span>) &#123;</span><br><span class="line">  <span class="comment">// We can read and update properties from &#x27;home.resident&#x27;.</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Happy birthday <span class="subst">$&#123;home.resident.name&#125;</span>!`</span>);</span><br><span class="line">  home.<span class="property">resident</span>.<span class="property">age</span>++;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">function</span> <span class="title function_">evict</span>(<span class="params">home: Home</span>) &#123;</span><br><span class="line">  <span class="comment">// But we can&#x27;t write to the &#x27;resident&#x27; property itself on a &#x27;Home&#x27;.</span></span><br><span class="line">  home.<span class="property">resident</span> = &#123;</span><br><span class="line">  <span class="comment">// Cannot assign to &#x27;resident&#x27; because it is a read-only property.</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Victor the Evictor&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">42</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="索引签名"><a href="#索引签名" class="headerlink" title="索引签名"></a>索引签名</h3><p>有的时候，你不能提前知道一个类型里的所有属性的名字，但是你知道这些值的特征。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">StringArray</span> &#123;</span><br><span class="line">  [<span class="attr">index</span>: <span class="built_in">number</span>]: <span class="built_in">string</span>;</span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">const</span> <span class="attr">myArray</span>: <span class="title class_">StringArray</span> = <span class="title function_">getStringArray</span>();</span><br><span class="line"><span class="keyword">const</span> secondItem = myArray[<span class="number">1</span>]; <span class="comment">// const secondItem: string</span></span><br></pre></td></tr></table></figure>
<p>这样，我们就有了一个具有索引签名的接口 <code>StringArray</code>，这个索引签名表示当一个 <code>StringArray</code> 类型的值使用 <code>number</code> 类型的值进行索引的时候，会返回一个 <code>string</code> 类型的值。</p>
<p>尽管字符串索引用来描述字典模式（dictionary pattern）非常的有效，但也会强制要求所有的属性要匹配索引签名的返回类型。这是因为一个声明类似于 <code>obj.property</code> 的字符串索引，跟 <code>obj[&quot;property&quot;]</code>是一样的。在下面的例子中，name 的类型并不匹配字符串索引的类型，所以类型检查器会给出报错：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">NumberDictionary</span> &#123;</span><br><span class="line">  [<span class="attr">index</span>: <span class="built_in">string</span>]: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">length</span>: <span class="built_in">number</span>; <span class="comment">// ok</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">	<span class="comment">// Property &#x27;name&#x27; of type &#x27;string&#x27; is not assignable to &#x27;string&#x27; index type &#x27;number&#x27;.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ====&gt; 修改为联合类型：</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">NumberOrStringDictionary</span> &#123;</span><br><span class="line">  [<span class="attr">index</span>: <span class="built_in">string</span>]: <span class="built_in">number</span> | <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">length</span>: <span class="built_in">number</span>; <span class="comment">// ok, length is a number</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>; <span class="comment">// ok, name is a string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后，你也可以设置索引签名为 readonly：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">ReadonlyStringArray</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> [<span class="attr">index</span>: <span class="built_in">number</span>]: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">myArray</span>: <span class="title class_">ReadonlyStringArray</span> = <span class="title function_">getReadOnlyStringArray</span>();</span><br><span class="line">myArray[<span class="number">2</span>] = <span class="string">&quot;Mallory&quot;</span>;</span><br><span class="line"><span class="comment">// 因为是readonly，所以无法修改值</span></span><br><span class="line"><span class="comment">// Index signature in type &#x27;ReadonlyStringArray&#x27; only permits reading.</span></span><br></pre></td></tr></table></figure>
<h2 id="属性继承（Extending-Types）"><a href="#属性继承（Extending-Types）" class="headerlink" title="属性继承（Extending Types）"></a>属性继承（Extending Types）</h2><p>对接口使用 <code>extends</code> 关键字允许我们有效的从其他声明过的类型中拷贝成员，并且随意添加新成员。接口也可以继承多个类型：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Colorful</span> &#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">  <span class="attr">radius</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ColorfulCircle</span> <span class="keyword">extends</span> <span class="title class_">Colorful</span>, <span class="title class_">Circle</span> &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="attr">cc</span>: <span class="title class_">ColorfulCircle</span> = &#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="string">&quot;red&quot;</span>,</span><br><span class="line">  <span class="attr">radius</span>: <span class="number">42</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="交叉类型（Intersection-Types）"><a href="#交叉类型（Intersection-Types）" class="headerlink" title="交叉类型（Intersection Types）"></a>交叉类型（Intersection Types）</h2><p>TypeScript 也提供了名为交叉类型（Intersection types）的方法，用于合并已经存在的对象类型。交叉类型的定义需要用到 <code>&amp;</code> 操作符：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Colorful</span> &#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">  <span class="attr">radius</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ColorfulCircle</span> = <span class="title class_">Colorful</span> &amp; <span class="title class_">Circle</span>;</span><br></pre></td></tr></table></figure>
<p>这里，我们连结 <code>Colorful</code> 和 <code>Circle</code> 产生了一个新的类型，新类型拥有 <code>Colorful</code> 和 <code>Circle</code> 的所有成员。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">draw</span>(<span class="params">circle: Colorful &amp; Circle</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Color was <span class="subst">$&#123;circle.color&#125;</span>`</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Radius was <span class="subst">$&#123;circle.radius&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// okay</span></span><br><span class="line"><span class="title function_">draw</span>(&#123; <span class="attr">color</span>: <span class="string">&quot;blue&quot;</span>, <span class="attr">radius</span>: <span class="number">42</span> &#125;);</span><br><span class="line"><span class="comment">// oops</span></span><br><span class="line"><span class="title function_">draw</span>(&#123; <span class="attr">color</span>: <span class="string">&quot;red&quot;</span>, <span class="attr">raidus</span>: <span class="number">42</span> &#125;);</span><br><span class="line"><span class="comment">// Argument of type &#x27;&#123; color: string; raidus: number; &#125;&#x27; is not assignable to parameter of type &#x27;Colorful &amp; Circle&#x27;.</span></span><br><span class="line"><span class="comment">// Object literal may only specify known properties, but &#x27;raidus&#x27; does not exist in type &#x27;Colorful &amp; Circle&#x27;. Did you mean to write &#x27;radius&#x27;?</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>这两种方式在合并类型上看起来很相似，但实际上还是有很大的不同。最原则性的不同就是在于冲突怎么处理，这也是你决定选择那种方式的主要原因。</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Colorful</span> &#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">ColorfulSub</span> <span class="keyword">extends</span> <span class="title class_">Colorful</span> &#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Interface &#x27;ColorfulSub&#x27; incorrectly extends interface &#x27;Colorful&#x27;.</span></span><br><span class="line"><span class="comment">// Types of property &#x27;color&#x27; are incompatible.</span></span><br><span class="line"><span class="comment">// Type &#x27;number&#x27; is not assignable to type &#x27;string&#x27;.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 以上使用继承的方式，如果重写类型会导致编译错误，但交叉类型不会：</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Colorful</span> &#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">ColorfulSub</span> = <span class="title class_">Colorful</span> &amp; &#123;</span><br><span class="line">  <span class="attr">color</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 虽然不会报错，那 color 属性的类型是什么呢，答案是 never，取得是 string 和 number 的交集。</span></span><br></pre></td></tr></table></figure>
<h2 id="泛型对象类型（Generic-Object-Types）"><a href="#泛型对象类型（Generic-Object-Types）" class="headerlink" title="泛型对象类型（Generic Object Types）"></a>泛型对象类型（Generic Object Types）</h2><p>把 Box 想象成一个实际类型的模板，Type 就是一个占位符，可以被替代为具体的类型。当 TypeScript 看到 <code>Box&lt;string&gt;</code>，它就会替换为 <code>Box&lt;Type&gt;</code> 的 Type 为 string ，最后的结果就会变成 <code>&#123; contents: string &#125;</code>。换句话说，<code>Box&lt;string&gt;</code> 和 <code>StringBox</code> 是一样的。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Box</span>&lt;<span class="title class_">Type</span>&gt; &#123;</span><br><span class="line">  <span class="attr">contents</span>: <span class="title class_">Type</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">StringBox</span> &#123;</span><br><span class="line">  <span class="attr">contents</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> <span class="attr">boxA</span>: <span class="title class_">Box</span>&lt;<span class="built_in">string</span>&gt; = &#123; <span class="attr">contents</span>: <span class="string">&quot;hello&quot;</span> &#125;;</span><br><span class="line">boxA.<span class="property">contents</span>;        </span><br><span class="line"><span class="comment">// (property) Box&lt;string&gt;.contents: string</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> <span class="attr">boxB</span>: <span class="title class_">StringBox</span> = &#123; <span class="attr">contents</span>: <span class="string">&quot;world&quot;</span> &#125;;</span><br><span class="line">boxB.<span class="property">contents</span>;     </span><br><span class="line"><span class="comment">// (property) StringBox.contents: string</span></span><br></pre></td></tr></table></figure>
<p>不过现在的 Box 是可重复使用的，如果我们需要一个新的类型，我们完全不需要再重新声明一个类型。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Box</span>&lt;<span class="title class_">Type</span>&gt; &#123;</span><br><span class="line">  <span class="attr">contents</span>: <span class="title class_">Type</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Apple</span> &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="comment">// ....</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Same as &#x27;&#123; contents: Apple &#125;&#x27;.</span></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">AppleBox</span> = <span class="title class_">Box</span>&lt;<span class="title class_">Apple</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> new1 : <span class="title class_">AppleBox</span> = &#123;</span><br><span class="line">  <span class="attr">contents</span>: &#123;<span class="attr">a</span>: <span class="string">&#x27;1&#x27;</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这也意味着我们可以利用泛型函数避免使用函数重载:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> setContents&lt;<span class="title class_">Type</span>&gt;(<span class="attr">box</span>: <span class="title class_">Box</span>&lt;<span class="title class_">Type</span>&gt;, <span class="attr">newContents</span>: <span class="title class_">Type</span>) &#123;</span><br><span class="line">  box.<span class="property">contents</span> = newContents;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>类型别名不同于接口，可以描述的不止是对象类型，所以我们也可以用类型别名写一些其他种类的的泛型帮助类型:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">OrNull</span>&lt;<span class="title class_">Type</span>&gt; = <span class="title class_">Type</span> | <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">OneOrMany</span>&lt;<span class="title class_">Type</span>&gt; = <span class="title class_">Type</span> | <span class="title class_">Type</span>[];</span><br><span class="line"> </span><br><span class="line"><span class="keyword">type</span> <span class="title class_">OneOrManyOrNull</span>&lt;<span class="title class_">Type</span>&gt; = <span class="title class_">OrNull</span>&lt;<span class="title class_">OneOrMany</span>&lt;<span class="title class_">Type</span>&gt;&gt;;</span><br><span class="line">           </span><br><span class="line"><span class="keyword">type</span> <span class="title class_">OneOrManyOrNull</span>&lt;<span class="title class_">Type</span>&gt; = <span class="title class_">OneOrMany</span>&lt;<span class="title class_">Type</span>&gt; | <span class="literal">null</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">type</span> <span class="title class_">OneOrManyOrNullStrings</span> = <span class="title class_">OneOrManyOrNull</span>&lt;<span class="built_in">string</span>&gt;;</span><br><span class="line">               </span><br><span class="line"><span class="keyword">type</span> <span class="title class_">OneOrManyOrNullStrings</span> = <span class="title class_">OneOrMany</span>&lt;<span class="built_in">string</span>&gt; | <span class="literal">null</span></span><br></pre></td></tr></table></figure>
<h3 id="Array-类型"><a href="#Array-类型" class="headerlink" title="Array 类型"></a>Array 类型</h3><p>我们之前讲过 Array 类型，当我们这样写类型 <code>number[]</code> 或者 <code> string[]</code> 的时候，其实它们只是 <code>Array&lt;number&gt;</code> 和 <code>Array&lt;string&gt;</code> 的简写形式而已。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params">value: <span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt;</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">myArray</span>: <span class="built_in">string</span>[] = [<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>];</span><br><span class="line"><span class="comment">// either of these work!</span></span><br><span class="line"><span class="title function_">doSomething</span>(myArray);</span><br><span class="line"><span class="title function_">doSomething</span>(<span class="keyword">new</span> <span class="title class_">Array</span>(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>类似于上面的 Box 类型，Array 本身就是一个泛型：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Array</span>&lt;<span class="title class_">Type</span>&gt; &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Gets or sets the length of the array.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">length</span>: <span class="built_in">number</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Removes the last element from an array and returns it.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">pop</span>(): <span class="title class_">Type</span> | <span class="literal">undefined</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Appends new elements to an array, and returns the new length of the array.</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="title function_">push</span>(...<span class="attr">items</span>: <span class="title class_">Type</span>[]): <span class="built_in">number</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ReadonlyArray-类型"><a href="#ReadonlyArray-类型" class="headerlink" title="ReadonlyArray 类型"></a>ReadonlyArray 类型</h3><p>ReadonlyArray 主要是用来做意图声明。当我们看到一个函数返回 ReadonlyArray，就是在告诉我们不能去更改其中的内容，当我们看到一个函数支持传入 ReadonlyArray ，这是在告诉我们我们可以放心的传入数组到函数中，而不用担心会改变数组的内容。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doStuff</span>(<span class="params">values: ReadonlyArray&lt;<span class="built_in">string</span>&gt;</span>) &#123;</span><br><span class="line">  <span class="comment">// We can read from &#x27;values&#x27;...</span></span><br><span class="line">  <span class="keyword">const</span> copy = values.<span class="title function_">slice</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`The first value is <span class="subst">$&#123;values[<span class="number">0</span>]&#125;</span>`</span>);</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// ...but we can&#x27;t mutate &#x27;values&#x27;.</span></span><br><span class="line">  values.<span class="title function_">push</span>(<span class="string">&quot;hello!&quot;</span>);</span><br><span class="line">  <span class="comment">// Property &#x27;push&#x27; does not exist on type &#x27;readonly string[]&#x27;.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>TypeScript 也针对 <code>ReadonlyArray&lt;Type&gt;</code> 提供了更简短的写法 <code>readonly Type[]</code> :</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doStuff</span>(<span class="params">values: <span class="keyword">readonly</span> <span class="built_in">string</span>[]</span>) &#123;</span><br><span class="line">  <span class="comment">// We can read from &#x27;values&#x27;...</span></span><br><span class="line">  <span class="keyword">const</span> copy = values.<span class="title function_">slice</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`The first value is <span class="subst">$&#123;values[<span class="number">0</span>]&#125;</span>`</span>);</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// ...but we can&#x27;t mutate &#x27;values&#x27;.</span></span><br><span class="line">  values.<span class="title function_">push</span>(<span class="string">&quot;hello!&quot;</span>);</span><br><span class="line">  <span class="comment">// Property &#x27;push&#x27; does not exist on type &#x27;readonly string[]&#x27;.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="元组类型"><a href="#元组类型" class="headerlink" title="元组类型"></a>元组类型</h3><p>元组类型是另外一种 Array 类型，当你明确知道数组包含多少个元素，并且每个位置元素的类型都明确知道的时候，就适合使用元组类型。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">StringNumberPair</span> = [<span class="built_in">string</span>, <span class="built_in">number</span>];</span><br></pre></td></tr></table></figure>
<p>如果要获取元素数量之外的元素，TypeScript 会提示错误：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params">pair: [<span class="built_in">string</span>, <span class="built_in">number</span>]</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"> </span><br><span class="line">  <span class="keyword">const</span> c = pair[<span class="number">2</span>];</span><br><span class="line">  <span class="comment">// Tuple type &#x27;[string, number]&#x27; of length &#x27;2&#x27; has no element at index &#x27;2&#x27;.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们也可以使用 JavaScript 的数组解构语法解构元组：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params">stringHash: [<span class="built_in">string</span>, <span class="built_in">number</span>]</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [inputString, hash] = stringHash;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(inputString); <span class="comment">// const inputString: string</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(hash); <span class="comment">// const hash: number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可选元素和剩余元素的存在，使得 TypeScript 可以在参数列表里使用元组，就像这样：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">readButtonInput</span>(<span class="params">...args: [<span class="built_in">string</span>, <span class="built_in">number</span>, ...<span class="built_in">boolean</span>[]]</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [name, version, ...input] = args;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// =====&gt; 基本等同于：</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">readButtonInput</span>(<span class="params">name: <span class="built_in">string</span>, version: <span class="built_in">number</span>, ...input: <span class="built_in">boolean</span>[]</span>) &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="readonly-元组类型"><a href="#readonly-元组类型" class="headerlink" title="readonly 元组类型"></a>readonly 元组类型</h3><p>这样 TypeScript 就不会允许写入readonly 元组的任何属性：</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doSomething</span>(<span class="params">pair: <span class="keyword">readonly</span> [<span class="built_in">string</span>, <span class="built_in">number</span>]</span>) &#123;</span><br><span class="line">  pair[<span class="number">0</span>] = <span class="string">&quot;hello!&quot;</span>;</span><br><span class="line">  <span class="comment">// Cannot assign to &#x27;0&#x27; because it is a read-only property.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在大部分的代码中，元组只是被创建，使用完后也不会被修改，所以尽可能的将元组设置为 readonly 是一个好习惯。</p>
<p>如果我们给一个数组字面量 const 断言，也会被推断为 readonly 元组类型。</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> point = [<span class="number">3</span>, <span class="number">4</span>] <span class="keyword">as</span> <span class="keyword">const</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">distanceFromOrigin</span>(<span class="params">[x, y]: [<span class="built_in">number</span>, <span class="built_in">number</span>]</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(x ** <span class="number">2</span> + y ** <span class="number">2</span>); <span class="comment">// 5</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">distanceFromOrigin</span>(point);</span><br><span class="line"><span class="comment">// Argument of type &#x27;readonly [3, 4]&#x27; is not assignable to parameter of type &#x27;[number, number]&#x27;.</span></span><br><span class="line"><span class="comment">// The type &#x27;readonly [3, 4]&#x27; is &#x27;readonly&#x27; and cannot be assigned to the mutable type &#x27;[number, number]&#x27;.</span></span><br></pre></td></tr></table></figure>
<p>尽管 distanceFromOrigin 并没有更改传入的元素，但函数希望传入一个可变元组。因为 point 的类型被推断为 readonly [3, 4]，它跟 [number number] 并不兼容，所以 TypeScript 给了一个报错。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a target="_blank" rel="noopener" href="https://ts.yayujs.com/handbook/ObjectTypes.html#%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B-object-types">TS 中文文档</a></li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>TS 对象类型</p><p><a href="https://czh-1.github.io/2024/03/21/TypeScript/ts-object-type/">https://czh-1.github.io/2024/03/21/TypeScript/ts-object-type/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>浮尘</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2024-03-21</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2024-05-06</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/TypeScript/">TypeScript</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2024/03/26/TypeScript/ts-basic/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">TS 基础</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2024/03/20/Html&amp;Css/canvas/"><span class="level-item">Canvas 和 SVG </span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread' ,
            appId: "TeTR7P6MiqeOgTPdmHbWjL1e-gzGzoHsz",
            appKey: "waf2Qu3JCSG1b2jwuI0TVBDf",
            
            avatar: "robohash",
            
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            visitor: true,
            highlight: true,
            
            
            
            
            
            requiredFields: [],
        });</script></div></div></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#对象类型"><span class="level-left"><span class="level-item">1</span><span class="level-item">对象类型</span></span></a></li><li><a class="level is-mobile" href="#属性修饰符（Property-Modifiers）"><span class="level-left"><span class="level-item">2</span><span class="level-item">属性修饰符（Property Modifiers）</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#可选属性"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">可选属性</span></span></a></li><li><a class="level is-mobile" href="#readonly-属性"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">readonly 属性</span></span></a></li><li><a class="level is-mobile" href="#索引签名"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">索引签名</span></span></a></li></ul></li><li><a class="level is-mobile" href="#属性继承（Extending-Types）"><span class="level-left"><span class="level-item">3</span><span class="level-item">属性继承（Extending Types）</span></span></a></li><li><a class="level is-mobile" href="#交叉类型（Intersection-Types）"><span class="level-left"><span class="level-item">4</span><span class="level-item">交叉类型（Intersection Types）</span></span></a></li><li><a class="level is-mobile" href="#泛型对象类型（Generic-Object-Types）"><span class="level-left"><span class="level-item">5</span><span class="level-item">泛型对象类型（Generic Object Types）</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Array-类型"><span class="level-left"><span class="level-item">5.1</span><span class="level-item">Array 类型</span></span></a></li><li><a class="level is-mobile" href="#ReadonlyArray-类型"><span class="level-left"><span class="level-item">5.2</span><span class="level-item">ReadonlyArray 类型</span></span></a></li><li><a class="level is-mobile" href="#元组类型"><span class="level-left"><span class="level-item">5.3</span><span class="level-item">元组类型</span></span></a></li><li><a class="level is-mobile" href="#readonly-元组类型"><span class="level-left"><span class="level-item">5.4</span><span class="level-item">readonly 元组类型</span></span></a></li></ul></li><li><a class="level is-mobile" href="#参考"><span class="level-left"><span class="level-item">6</span><span class="level-item">参考</span></span></a></li></ul></div></div><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="浮尘的博客" height="28"></a><p class="is-size-7"><span>&copy; 2024 浮尘</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"></div></div><div class="BbeiAn-info" style="text-align: center;"><a target="_blank" href="http://www.miitbeian.gov.cn/" rel="nofollow">赣ICP备- 2022002476号-1</a></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>