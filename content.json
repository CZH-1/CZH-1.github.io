{"pages":[{"title":"å…³äºæˆ‘","text":"","link":"/about/index.html"}],"posts":[{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/2022/03/07/hello-world/"},{"title":"åŸºç¡€æ’åºç®—æ³•","text":"å†’æ³¡æ’åºé€‰æ‹©æ’åºæ’å…¥æ’åºå¿«é€Ÿæ’åºäºŒåˆ†æŸ¥æ‰¾åŠ¨æ€è§„åˆ’è´ªå¿ƒç®—æ³• å†’æ³¡æ’åº12345678910111213141516171819// æ¯”è¾ƒç›¸é‚»çš„ä¸¤ä¸ªæ•°ï¼Œè‹¥å¤§äºäº¤æ¢ä½ç½®ï¼Œæ¯ä¸€è½®æ‰¾å‡ºä¸€ä¸ªæœ€å¤§å€¼function bubbleSort(arr) { // ç¼“å­˜æ•°ç»„é•¿åº¦ const len = arr.length; // å¤–å±‚å¾ªç¯ç”¨äºæ§åˆ¶ä»å¤´åˆ°å°¾çš„æ¯”è¾ƒ+äº¤æ¢åˆ°åº•æœ‰å¤šå°‘è½® for (let i = 0; i &lt; len; i++) { // å†…å±‚å¾ªç¯ç”¨äºå®Œæˆæ¯ä¸€è½®éå†è¿‡ç¨‹ä¸­çš„é‡å¤æ¯”è¾ƒ+äº¤æ¢ for (let j = 0; j &lt; len - 1; j++) { // è‹¥ç›¸é‚»å…ƒç´ å‰é¢çš„æ•°æ¯”åé¢çš„å¤§ if (arr[j] &gt; arr[j + 1]) { // äº¤æ¢ä¸¤è€… [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]]; } } } // è¿”å›æ•°ç»„ return arr;}console.log(bubbleSort([3, 6, 2, 4, 1])); é€‰æ‹©æ’åº åœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½® ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚ é‡å¤ç¬¬äºŒæ­¥ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯• 123456789101112131415161718function selectionSort(arr) { var len = arr.length; var minIndex, temp; for (var i = 0; i &lt; len - 1; i++) { minIndex = i; for (var j = i + 1; j &lt; len; j++) { // å¯»æ‰¾æœ€å°çš„æ•° if (arr[j] &lt; arr[minIndex]) { // å°†æœ€å°æ•°çš„ç´¢å¼•ä¿å­˜ minIndex = j; } } temp = arr[i]; arr[i] = arr[minIndex]; arr[minIndex] = temp; } return arr;} æ’å…¥æ’åº æŠŠå¾…æ’åºçš„æ•°ç»„åˆ†æˆå·²æ’åºå’Œæœªæ’åºä¸¤éƒ¨åˆ†ï¼Œåˆå§‹çš„æ—¶å€™æŠŠç¬¬ä¸€ä¸ªå…ƒç´ è®¤ä¸ºæ˜¯å·²æ’å¥½åºçš„ ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹ï¼Œåœ¨å·²æ’å¥½åºçš„å­æ•°ç»„ä¸­å¯»æ‰¾åˆ°è¯¥å…ƒç´ åˆé€‚çš„ä½ç½®å¹¶æ’å…¥è¯¥ä½ç½®ï¼ˆå¦‚æœå¾…æ’å…¥çš„å…ƒç´ ä¸æœ‰åºåºåˆ—ä¸­çš„æŸä¸ªå…ƒç´ ç›¸ç­‰ï¼Œåˆ™å°†å¾…æ’å…¥å…ƒç´ æ’å…¥åˆ°ç›¸ç­‰å…ƒç´ çš„åé¢ã€‚ï¼‰ é‡å¤ä¸Šè¿°è¿‡ç¨‹ç›´åˆ°æœ€åä¸€ä¸ªå…ƒç´ è¢«æ’å…¥æœ‰åºå­æ•°ç»„ä¸­1234567891011121314function insertionSort(arr) { const len = arr.length; let preIndex, current; for (let i = 1; i &lt; len; i++) { preIndex = i - 1; current = arr[i]; while(preIndex &gt;= 0 &amp;&amp; arr[preIndex] &gt; current) { arr[preIndex+1] = arr[preIndex]; preIndex--; } arr[preIndex+1] = current; } return arr;} å¿«é€Ÿæ’åº123456789101112131415161718192021// æ‰¾ä¸€ä¸ªåŸºç‚¹ï¼Œå°äºæ”¾å·¦è¾¹ï¼Œå¤§äºæ”¾å³è¾¹function quickSort(arr,startIndex = 0) { // console.log(startIndex) if (arr.length &lt;= 1) return arr const startNum = arr.splice(startIndex, 1)[0]; console.log(startNum); const right = [], left= [] for (let i = 0; i &lt; arr.length; i++) { if (arr[i] &lt; startNum) { left.push(arr[i]); } else { right.push(arr[i]); } } return [...quickSort(left), startNum, ...quickSort(right)];}const arr = [6, 4, 7, 5, 1, 2, 9, 8]console.log(arr)console.log(quickSort(arr)) äºŒåˆ†æŸ¥æ‰¾ä½¿ç”¨å‰ææƒ³è¦åº”ç”¨äºŒåˆ†æŸ¥æ‰¾æ³•ï¼Œåˆ™æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š å­˜å‚¨åœ¨æ•°ç»„ä¸­ æœ‰åºæ’åº æœç´¢è¿‡ç¨‹ä»æ•°ç»„çš„ä¸­é—´å…ƒç´ å¼€å§‹ï¼Œå¦‚æœä¸­é—´å…ƒç´ æ­£å¥½æ˜¯è¦æŸ¥æ‰¾çš„å…ƒç´ ï¼Œåˆ™æœç´¢è¿‡ç¨‹ç»“æŸï¼Œå¦‚æœæŸä¸€ç‰¹å®šå…ƒç´ å¤§äºæˆ–è€…å°äºä¸­é—´å…ƒç´ ï¼Œåˆ™åœ¨æ•°ç»„å¤§äºæˆ–å°äºä¸­é—´å…ƒç´ çš„é‚£ä¸€åŠä¸­æŸ¥æ‰¾ï¼Œè€Œä¸”è·Ÿå¼€å§‹ä¸€æ ·ä»ä¸­é—´å…ƒç´ å¼€å§‹æ¯”è¾ƒï¼Œå¦‚æœåœ¨æŸä¸€æ­¥éª¤æ•°ç»„ä¸ºç©ºï¼Œåˆ™ä»£è¡¨æ‰¾ä¸åˆ°ï¼Œè¿™ç§æœç´¢ç®—æ³•æ¯ä¸€æ¬¡æ¯”è¾ƒéƒ½ä½¿æœç´¢èŒƒå›´ç¼©å°ä¸€åŠ 1234567891011121314151617181920212223function BinarySearchFirst(arr, target) { if (arr.length &lt;= 1) return -1 // ä½ä½ä¸‹æ ‡ let lowIndex = 0 // é«˜ä½ä¸‹æ ‡ let highIndex = arr.length - 1 while (lowIndex &lt;= highIndex) { // ä¸­é—´ä¸‹æ ‡ const midIndex = Math.floor((lowIndex + highIndex) / 2) if (target &lt; arr[midIndex]) { highIndex = midIndex - 1 } else if (target &gt; arr[midIndex]) { lowIndex = midIndex + 1 } else { // æ•°ç»„ä¸­å­˜åœ¨é‡å¤é¡¹ï¼Œè€Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆçš„å€¼ // å½“ target ä¸ arr[midIndex] ç›¸ç­‰çš„æ—¶å€™ï¼Œå¦‚æœ midIndex ä¸º0æˆ–è€…å‰ä¸€ä¸ªæ•°æ¯” target å°é‚£ä¹ˆå°±æ‰¾åˆ°äº†ç¬¬ä¸€ä¸ªç­‰äºç»™å®šå€¼çš„å…ƒç´ ï¼Œç›´æ¥è¿”å› if (midIndex === 0 || arr[midIndex - 1] &lt; target) return midIndex // å¦åˆ™é«˜ä½ä¸‹æ ‡ä¸ºä¸­é—´ä¸‹æ ‡å‡1ï¼Œç»§ç»­æŸ¥æ‰¾ highIndex = midIndex - 1 } } return -1} åŠ¨æ€è§„åˆ’ç®€å•æ¥è¯´ï¼ŒåŠ¨æ€è§„åˆ’å…¶å®å°±æ˜¯ï¼Œç»™å®šä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æŠŠå®ƒæ‹†æˆä¸€ä¸ªä¸ªå­é—®é¢˜ï¼Œç›´åˆ°å­é—®é¢˜å¯ä»¥ç›´æ¥è§£å†³ï¼Œç„¶åå‘¢ï¼ŒæŠŠå­é—®é¢˜ç­”æ¡ˆä¿å­˜èµ·æ¥ï¼Œä»¥å‡å°‘é‡å¤è®¡ç®—ã€‚å†æ ¹æ®å­é—®é¢˜ç­”æ¡ˆåæ¨ï¼Œå¾—å‡ºåŸé—®é¢˜è§£çš„ä¸€ç§æ–¹æ³•ã€‚ä¸€èˆ¬è¿™äº›å­é—®é¢˜å¾ˆç›¸ä¼¼ï¼Œå¯ä»¥é€šè¿‡å‡½æ•°å…³ç³»å¼é€’æ¨å‡ºæ¥ï¼Œä¾‹å¦‚æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å…¬å¼ï¼šå½“ n å¤§äº 2çš„æ—¶å€™ï¼ŒF(n) = F(n-1) + F(n-2) ï¼Œf(10)= f(9)+f(8),f(9) = f(8) + f(7)â€¦æ˜¯é‡å å­é—®é¢˜ï¼Œå½“n = 1ã€2çš„æ—¶å€™ï¼Œå¯¹åº”çš„å€¼ä¸º2ï¼Œè¿™æ—¶å€™å°±é€šè¿‡å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæ•°ç»„è®°å½•æ¯ä¸€æ­¥è®¡ç®—çš„ç»“æœï¼Œä»¥æ­¤ç±»æ¨ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡å¤è®¡ç®— é€‚ç”¨åœºæ™¯å¦‚æœä¸€ä¸ªé—®é¢˜ï¼Œå¯ä»¥æŠŠæ‰€æœ‰å¯èƒ½çš„ç­”æ¡ˆç©·ä¸¾å‡ºæ¥ï¼Œå¹¶ä¸”ç©·ä¸¾å‡ºæ¥åï¼Œå‘ç°å­˜åœ¨é‡å å­é—®é¢˜ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨åŠ¨æ€è§„åˆ’ï¼Œæ¯”å¦‚ä¸€äº›æ±‚æœ€å€¼çš„åœºæ™¯ï¼Œå¦‚æœ€é•¿é€’å¢å­åºåˆ—ã€æœ€å°ç¼–è¾‘è·ç¦»ã€èƒŒåŒ…é—®é¢˜ã€å‡‘é›¶é’±é—®é¢˜ç­‰ç­‰ï¼Œéƒ½æ˜¯åŠ¨æ€è§„åˆ’çš„ç»å…¸åº”ç”¨åœºæ™¯ã€‚å…³äºåŠ¨æ€è§„åˆ’é¢˜ç›®è§£å†³çš„æ­¥éª¤ï¼Œä¸€èˆ¬å¦‚ä¸‹ï¼š æè¿°æœ€ä¼˜è§£çš„ç»“æ„ é€’å½’å®šä¹‰æœ€ä¼˜è§£çš„å€¼ æŒ‰è‡ªåº•å‘ä¸Šçš„æ–¹å¼è®¡ç®—æœ€ä¼˜è§£çš„å€¼ ç”±è®¡ç®—å‡ºçš„ç»“æœæ„é€ ä¸€ä¸ªæœ€ä¼˜è§£ å‚è€ƒ è¯´è¯´å¸¸è§çš„æ’åºç®—æ³•æœ‰å“ªäº›ï¼Ÿ","link":"/2024/02/29/Arithmetic/sort/"},{"title":"æ¦‚æ‹¬æ€»ç»“ ES6 ç‰¹æ€§","text":"ES6 å‚è€ƒ 1.5ä¸‡å­—æ¦‚æ‹¬ES6å…¨éƒ¨ç‰¹æ€§(å·²æ›´æ–°ES2020)","link":"/2022/03/12/JavaScript/javaScript-ES6/"},{"title":"Iteratoræ¦‚å¿µåŠç”¨æ³•","text":"Iteratoræ¦‚å¿µåŠç”¨æ³• å‚è€ƒJavaScriptåŸºç¡€ï¼šIteratoræ¦‚å¿µåŠç”¨æ³•","link":"/2024/02/27/JavaScript/javaScript-Iterator/"},{"title":"ç†è§£JS Event Loop","text":"Event LoopåŒæ­¥/å¼‚æ­¥ åŸºæœ¬æ¦‚å¿µæ‰§è¡Œ &amp; è¿è¡Œ JavaScript çš„æ‰§è¡Œå’Œè¿è¡Œæ˜¯ä¸¤ä¸ªä¸åŒæ¦‚å¿µçš„ï¼Œæ‰§è¡Œï¼Œä¸€èˆ¬ä¾èµ–äºç¯å¢ƒï¼Œæ¯”å¦‚ nodeã€æµè§ˆå™¨ ç­‰ï¼Œ JavaScript åœ¨ä¸åŒç¯å¢ƒä¸‹çš„æ‰§è¡Œæœºåˆ¶å¯èƒ½å¹¶ä¸ç›¸åŒã€‚è€Œä»Šå¤©æˆ‘ä»¬è¦è®¨è®ºçš„ Event Loop å°±æ˜¯ JavaScript çš„ä¸€ç§æ‰§è¡Œæ–¹å¼ã€‚è€Œè¿è¡Œå‘¢ï¼Œæ˜¯æŒ‡JavaScript çš„è§£æå¼•æ“ï¼Œè¿™æ˜¯ç»Ÿä¸€çš„ã€‚ JavaScript Engine å’Œ JavaScript Runtime ä¸ºäº†è®© JavaScript è¿è¡Œèµ·æ¥ï¼Œè¦å®Œæˆä¸¤éƒ¨åˆ†å·¥ä½œï¼ˆå½“ç„¶å®é™…æ¯”è¿™å¤æ‚çš„å¤šï¼‰ï¼š ç¼–è¯‘å¹¶æ‰§è¡Œ JavaScript ä»£ç ï¼Œå®Œæˆå†…å­˜åˆ†é…ã€åƒåœ¾å›æ”¶ç­‰ï¼› ä¸º JavaScript æä¾›ä¸€äº›å¯¹è±¡æˆ–æœºåˆ¶ï¼Œä½¿å®ƒèƒ½å¤Ÿä¸å¤–ç•Œäº¤äº’ã€‚ è¿™é‡Œçš„ç¬¬ä¸€éƒ¨åˆ†ï¼Œæ˜¯ Engineï¼ˆæ‰§è¡Œå¼•æ“ï¼‰ï¼›ç¬¬äºŒéƒ¨åˆ†ï¼Œæ˜¯ Runtimeï¼ˆæ‰§è¡Œç¯å¢ƒï¼‰ã€‚ å…³äº JavaScript JavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œåªæœ‰ä¸€ä¸ªè°ƒç”¨æ ˆï¼Œå†³å®šäº†å®ƒåœ¨åŒä¸€æ—¶é—´åªèƒ½åšä¸€ä»¶äº‹æƒ…ã€‚ åœ¨æœ€æ–°çš„HTML5ä¸­æå‡ºäº†Web-Workerï¼Œä½†javascriptæ˜¯å•çº¿ç¨‹è¿™ä¸€æ ¸å¿ƒä»æœªæ”¹å˜ã€‚æ‰€ä»¥ä¸€åˆ‡javascriptç‰ˆçš„â€å¤šçº¿ç¨‹â€éƒ½æ˜¯ç”¨å•çº¿ç¨‹æ¨¡æ‹Ÿå‡ºæ¥çš„ï¼Œä¸€åˆ‡javascriptå¤šçº¿ç¨‹éƒ½æ˜¯çº¸è€è™ï¼ åœ¨ JavaScript è¿è¡Œçš„æ—¶å€™ï¼ŒJavaScript Engine ä¼šåˆ›å»ºå’Œç»´æŠ¤ç›¸åº”çš„å †ï¼ˆHeapï¼‰å’Œæ ˆï¼ˆStackï¼‰ï¼ŒåŒæ—¶é€šè¿‡ JavaScript Runtime æä¾›çš„ä¸€ç³»åˆ— APIï¼ˆä¾‹å¦‚ setTimeoutã€XMLHttpRequest ç­‰ï¼‰æ¥å®Œæˆå„ç§å„æ ·çš„ä»»åŠ¡ã€‚ åœ¨ JavaScript çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒçœŸæ­£è´Ÿè´£æ‰§è¡Œ JavaScript ä»£ç çš„å§‹ç»ˆåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œé€šå¸¸è¢«ç§°ä¸ºä¸»çº¿ç¨‹ï¼Œå„ç§ä»»åŠ¡éƒ½ä¼šç”¨æ’é˜Ÿçš„æ–¹å¼æ¥åŒæ­¥æ‰§è¡Œã€‚è¿™ç§æ–¹å¼æœ€å¸¸è§çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼šå¦‚æœä½ å°è¯•æ‰§è¡Œä¸€æ®µéå¸¸è€—æ—¶çš„åŒæ­¥ä»£ç ï¼Œæµè§ˆå™¨å°±æ²¡åŠæ³•åŒæ—¶å»æ¸²æŸ“ GUIï¼Œå¯¼è‡´ç•Œé¢å¤±å»å“åº”ï¼Œä¹Ÿå°±æ˜¯è¢«é˜»å¡äº†ã€‚ äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰ä»€ä¹ˆæ˜¯ Event Loopï¼Ÿ äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰ æ˜¯è®© JavaScript åšåˆ°æ—¢æ˜¯å•çº¿ç¨‹ï¼Œåˆç»å¯¹ä¸ä¼šé˜»å¡çš„æ ¸å¿ƒæœºåˆ¶ï¼Œä¹Ÿæ˜¯ JavaScript å¹¶å‘æ¨¡å‹ï¼ˆConcurrency Modelï¼‰çš„åŸºç¡€ï¼Œæ˜¯ç”¨æ¥åè°ƒå„ç§äº‹ä»¶ã€ç”¨æˆ·äº¤äº’ã€è„šæœ¬æ‰§è¡Œã€UI æ¸²æŸ“ã€ç½‘ç»œè¯·æ±‚ç­‰çš„ä¸€ç§æœºåˆ¶ã€‚ ç®€å•ä¸€ç‚¹ï¼šEvent Loop åªä¸è¿‡æ˜¯å®ç°å¼‚æ­¥çš„ä¸€ç§æœºåˆ¶è€Œå·²ã€‚ JavaScript æœ‰ä¸€ä¸ªä¸»çº¿ç¨‹ main threadï¼Œå’Œè°ƒç”¨æ ˆ call-stack ä¹Ÿç§°ä¹‹ä¸ºæ‰§è¡Œæ ˆã€‚æ‰€æœ‰çš„ä»»åŠ¡éƒ½ä¼šæ”¾åˆ°è°ƒç”¨æ ˆä¸­ç­‰å¾…ä¸»çº¿ç¨‹æ¥æ‰§è¡Œã€‚ ä»»åŠ¡é˜Ÿåˆ—(task queue)æ‰§è¡Œå’Œåè°ƒå„ç§ä»»åŠ¡æ—¶ï¼ŒEvent Loop ä¼šç»´æŠ¤è‡ªå·±çš„ä»»åŠ¡é˜Ÿåˆ—ã€‚ä»»åŠ¡é˜Ÿåˆ—åˆåˆ†ä¸º Task Queue å’Œ Microtask Queue ä¸¤ç§ã€‚ å®é™…ä¸Šï¼Œç§°ä»»åŠ¡é˜Ÿåˆ—ä¸ºäº‹ä»¶é˜Ÿåˆ—ï¼ˆEvent Queueï¼‰å¯èƒ½ä¼šæ›´å®¹æ˜“ç†è§£ã€‚æ‰€è°“çš„äº‹ä»¶é©±åŠ¨ï¼ˆEvent-drivenï¼‰ï¼Œå°±æ˜¯å°†ä¸€åˆ‡æŠ½è±¡ä¸ºäº‹ä»¶ï¼ˆEventï¼‰ï¼Œæ¯”å¦‚ AJAX å®Œæˆã€é¼ æ ‡ç‚¹å‡»ã€I/O æ“ä½œç­‰ç­‰ï¼Œéƒ½æ˜¯ä¸€ä¸ªä¸ªçš„äº‹ä»¶ï¼Œè€Œ Event Loop å°±æ˜¯ä¸€ä¸ªäº‹ä»¶å¾ªç¯çš„è¿‡ç¨‹ã€‚åŒæ­¥ä»»åŠ¡(SyncTask): ä¸»çº¿ç¨‹æ¥æ‰§è¡Œçš„æ—¶å€™ç«‹å³å°±èƒ½æ‰§è¡Œçš„ä»£ç å¼‚æ­¥ä»»åŠ¡(AsyncTask): å…ˆå»æ‰§è¡Œåˆ«çš„ taskï¼Œç­‰æˆ‘è¿™ xxx å®Œä¹‹åå†å¾€ Task Queue é‡Œé¢å¡ä¸€ä¸ª task çš„åŒæ­¥ä»»åŠ¡æ¥ç­‰å¾…è¢«æ‰§è¡Œ ä¸»çº¿ç¨‹è‡ªä¸Šè€Œä¸‹æ‰§è¡Œæ‰€æœ‰ä»£ç  åŒæ­¥ä»»åŠ¡ç›´æ¥è¿›å…¥åˆ°ä¸»çº¿ç¨‹è¢«æ‰§è¡Œï¼Œè€Œå¼‚æ­¥ä»»åŠ¡åˆ™è¿›å…¥åˆ° Event Table å¹¶æ³¨å†Œç›¸å¯¹åº”çš„å›è°ƒå‡½æ•° å¼‚æ­¥ä»»åŠ¡å®Œæˆåï¼ŒEvent Table ä¼šå°†è¿™ä¸ªå‡½æ•°ç§»å…¥ Event Queue ä¸»çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œäº†ä»¥åï¼Œä¼šä»Event Queueä¸­è¯»å–ä»»åŠ¡ï¼Œè¿›å…¥åˆ°ä¸»çº¿ç¨‹å»æ‰§è¡Œã€‚ å¾ªç¯å¦‚ä¸Š æˆ‘ä»¬ä¸ç¦è¦é—®äº†ï¼Œé‚£æ€ä¹ˆçŸ¥é“ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆä¸ºç©ºå•Šï¼Ÿjså¼•æ“å­˜åœ¨monitoring processè¿›ç¨‹ï¼Œä¼šæŒç»­ä¸æ–­çš„æ£€æŸ¥ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆæ˜¯å¦ä¸ºç©ºï¼Œä¸€æ—¦ä¸ºç©ºï¼Œå°±ä¼šå»Event Queueé‚£é‡Œæ£€æŸ¥æ˜¯å¦æœ‰ç­‰å¾…è¢«è°ƒç”¨çš„å‡½æ•°ã€‚ ä¸Šè¿°åŠ¨ä½œä¸æ–­å¾ªç¯ï¼Œå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„äº‹ä»¶å¾ªç¯(Event Loop)ã€‚ ä¾‹å¦‚ï¼š 123456789101112ajax({ url:www.Nealyang.com, data:prams, success:() =&gt; { console.log('è¯·æ±‚æˆåŠŸ!'); }, error:()=&gt;{ console.log('è¯·æ±‚å¤±è´¥~'); }})console.log('è¿™æ˜¯ä¸€ä¸ªåŒæ­¥ä»»åŠ¡'); ajax è¯·æ±‚é¦–å…ˆè¿›å…¥åˆ° Event Table ï¼Œåˆ†åˆ«æ³¨å†Œäº†onErrorå’ŒonSuccesså›è°ƒå‡½æ•°ã€‚ ä¸»çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»»åŠ¡ï¼šconsole.log(â€˜è¿™æ˜¯ä¸€ä¸ªåŒæ­¥ä»»åŠ¡â€™); ä¸»çº¿ç¨‹ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œçœ‹Event Queueæ˜¯å¦æœ‰å¾…æ‰§è¡Œçš„ task,è¿™é‡Œæ˜¯ä¸æ–­åœ°æ£€æŸ¥ï¼Œåªè¦ä¸»çº¿ç¨‹çš„task queueæ²¡æœ‰ä»»åŠ¡æ‰§è¡Œäº†ï¼Œä¸»çº¿ç¨‹å°±ä¸€ç›´åœ¨è¿™ç­‰ç€ ajax æ‰§è¡Œå®Œæ¯•ï¼Œå°†å›è°ƒå‡½æ•°push åˆ°Event Queueã€‚ï¼ˆæ­¥éª¤ 3ã€4 æ²¡æœ‰å…ˆåé¡ºåºè€Œè¨€ï¼‰ ä¸»çº¿ç¨‹â€œç»ˆäºâ€ç­‰åˆ°äº†Event Queueé‡Œæœ‰ taskå¯ä»¥æ‰§è¡Œäº†ï¼Œæ‰§è¡Œå¯¹åº”çš„å›è°ƒä»»åŠ¡ã€‚ å¦‚æ­¤å¾€å¤ã€‚ Task Queue(å®ä»»åŠ¡é˜Ÿåˆ—)ä¸€ä¸ª Event Loop ä¼šæœ‰ä¸€ä¸ªæˆ–å¤šä¸ª Task Queueï¼Œè¿™æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„æœ‰åºåˆ—è¡¨ï¼Œå­˜æ”¾ç€æ¥è‡ªä¸åŒ Task Sourceï¼ˆä»»åŠ¡æºï¼‰çš„ Taskã€‚åœ¨ HTML æ ‡å‡†ä¸­ï¼Œå®šä¹‰äº†å‡ ç§å¸¸è§çš„ Task Source: DOM manipulationï¼ˆDOM æ“ä½œï¼‰ï¼› User interactionï¼ˆç”¨æˆ·äº¤äº’ï¼‰ï¼› Networkingï¼ˆç½‘ç»œè¯·æ±‚ï¼‰ï¼› History traversalï¼ˆHistory API æ“ä½œï¼‰ã€‚ Task Source çš„å®šä¹‰éå¸¸çš„å®½æ³›,åŒ…æ‹¬æ•´ä½“ä»£ç scriptï¼ŒsetTimeoutï¼ŒsetIntervalï¼Œå¸¸è§çš„é¼ æ ‡ã€é”®ç›˜äº‹ä»¶ï¼ŒAJAXï¼Œæ•°æ®åº“æ“ä½œï¼ˆä¾‹å¦‚ IndexedDBï¼‰ï¼Œç­‰ç­‰éƒ½å±äº Task Sourceï¼Œæ‰€æœ‰æ¥è‡ªè¿™äº› Task Source çš„ Task éƒ½ä¼šè¢«æ”¾åˆ°å¯¹åº”çš„ Task Queue ä¸­ç­‰å¾…å¤„ç†ã€‚ Microtask Queue(å¾®ä»»åŠ¡é˜Ÿåˆ—)Microtask Queue ä¸ Task Queue ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæœ‰åºåˆ—è¡¨ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œä¸€ä¸ª Event Loop åªæœ‰ä¸€ä¸ª Microtask Queueã€‚åœ¨ HTML æ ‡å‡†ä¸­ï¼Œå¹¶æ²¡æœ‰æ˜ç¡®è§„å®š Microtask Sourceï¼Œé€šå¸¸è®¤ä¸ºæœ‰ä»¥ä¸‹å‡ ç§ï¼š Promise.then catch finally(æ³¨æ„æˆ‘ä¸æ˜¯è¯´ Promise) Process.nextTick MutationObserver setTimeoutsetTimeoutæ— éœ€å†å¤šè¨€ï¼Œå¤§å®¶å¯¹ä»–çš„ç¬¬ä¸€å°è±¡å°±æ˜¯å¼‚æ­¥å¯ä»¥å»¶æ—¶æ‰§è¡Œï¼Œæ¸æ¸çš„setTimeoutç”¨çš„åœ°æ–¹å¤šäº†ï¼Œé—®é¢˜ä¹Ÿå‡ºç°äº†ï¼Œæœ‰æ—¶å€™æ˜æ˜å†™çš„å»¶æ—¶3ç§’ï¼Œå®é™…å´5ï¼Œ6ç§’æ‰æ‰§è¡Œå‡½æ•°ï¼Œè¿™åˆå’‹å›äº‹å•Šï¼Ÿçœ‹ä¸€ä¸ªä¾‹å­ï¼š 12345setTimeout(() =&gt; { task();},3000)console.log('æ‰§è¡Œconsole'); å‰é¢æˆ‘ä»¬çš„ç»“è®ºï¼ŒsetTimeoutæ˜¯å¼‚æ­¥çš„ï¼Œåº”è¯¥å…ˆæ‰§è¡Œconsole.logè¿™ä¸ªåŒæ­¥ä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç»“è®ºæ˜¯ï¼š 12//æ‰§è¡Œconsole//task() å»éªŒè¯ä¸€ä¸‹ï¼Œç»“æœæ­£ç¡®ï¼ ç„¶åæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹å‰é¢çš„ä»£ç ï¼š 123456setTimeout(() =&gt; { task()},3000)sleep(10000000) ä¹ä¸€çœ‹å…¶å®å·®ä¸å¤šå˜›ï¼Œä½†æˆ‘ä»¬æŠŠè¿™æ®µä»£ç åœ¨chromeæ‰§è¡Œä¸€ä¸‹ï¼Œå´å‘ç°æ§åˆ¶å°æ‰§è¡Œtask()éœ€è¦çš„æ—¶é—´è¿œè¿œè¶…è¿‡3ç§’ï¼Œè¯´å¥½çš„å»¶æ—¶ä¸‰ç§’ï¼Œä¸ºå•¥ç°åœ¨éœ€è¦è¿™ä¹ˆé•¿æ—¶é—´å•Šï¼Ÿè¿™æ—¶å€™æˆ‘ä»¬éœ€è¦é‡æ–°ç†è§£setTimeoutçš„å®šä¹‰ã€‚æˆ‘ä»¬å…ˆè¯´ä¸Šè¿°ä»£ç æ˜¯æ€ä¹ˆæ‰§è¡Œçš„ï¼š task()è¿›å…¥Event Tableå¹¶æ³¨å†Œ,è®¡æ—¶å¼€å§‹ã€‚ æ‰§è¡Œsleepå‡½æ•°ï¼Œå¾ˆæ…¢ï¼Œéå¸¸æ…¢ï¼Œè®¡æ—¶ä»åœ¨ç»§ç»­ã€‚ 3ç§’åˆ°äº†ï¼Œè®¡æ—¶äº‹ä»¶timeoutå®Œæˆï¼Œtask()è¿›å…¥Event Queueï¼Œä½†æ˜¯sleepä¹Ÿå¤ªæ…¢äº†å§ï¼Œè¿˜æ²¡æ‰§è¡Œå®Œï¼Œåªå¥½ç­‰ç€ã€‚ sleepç»ˆäºæ‰§è¡Œå®Œäº†ï¼Œtask()ç»ˆäºä»Event Queueè¿›å…¥äº†ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ ä¸Šè¿°çš„æµç¨‹èµ°å®Œï¼Œæˆ‘ä»¬çŸ¥é“setTimeoutè¿™ä¸ªå‡½æ•°ï¼Œæ˜¯ç»è¿‡æŒ‡å®šæ—¶é—´åï¼ŒæŠŠè¦æ‰§è¡Œçš„ä»»åŠ¡(æœ¬ä¾‹ä¸­ä¸ºtask())åŠ å…¥åˆ°Event Queueä¸­ï¼Œåˆå› ä¸ºæ˜¯å•çº¿ç¨‹ä»»åŠ¡è¦ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œï¼Œå¦‚æœå‰é¢çš„ä»»åŠ¡éœ€è¦çš„æ—¶é—´å¤ªä¹…ï¼Œé‚£ä¹ˆåªèƒ½ç­‰ç€ï¼Œå¯¼è‡´çœŸæ­£çš„å»¶è¿Ÿæ—¶é—´è¿œè¿œå¤§äº3ç§’ã€‚æˆ‘ä»¬è¿˜ç»å¸¸é‡åˆ°setTimeout(fn,0)è¿™æ ·çš„ä»£ç ï¼Œ0ç§’åæ‰§è¡Œåˆæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæ˜¯ä¸æ˜¯å¯ä»¥ç«‹å³æ‰§è¡Œå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸ä¼šçš„ï¼ŒsetTimeout(fn,0)çš„å«ä¹‰æ˜¯ï¼ŒæŒ‡å®šæŸä¸ªä»»åŠ¡åœ¨ä¸»çº¿ç¨‹æœ€æ—©å¯å¾—çš„ç©ºé—²æ—¶é—´æ‰§è¡Œï¼Œæ„æ€å°±æ˜¯ä¸ç”¨å†ç­‰å¤šå°‘ç§’äº†ï¼Œåªè¦ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆå†…çš„åŒæ­¥ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œæ ˆä¸ºç©ºå°±é©¬ä¸Šæ‰§è¡Œã€‚ä¸¾ä¾‹è¯´æ˜ï¼š 123456//ä»£ç 1console.log('å…ˆæ‰§è¡Œè¿™é‡Œ');setTimeout(() =&gt; { console.log('æ‰§è¡Œå•¦')},0); 1234567//ä»£ç 2console.log('å…ˆæ‰§è¡Œè¿™é‡Œ');setTimeout(() =&gt; { console.log('æ‰§è¡Œå•¦')},3000); ä»£ç 1çš„è¾“å‡ºç»“æœæ˜¯ï¼š 12//å…ˆæ‰§è¡Œè¿™é‡Œ//æ‰§è¡Œå•¦ ä»£ç 2çš„è¾“å‡ºç»“æœæ˜¯ï¼š 123//å…ˆæ‰§è¡Œè¿™é‡Œ// ... 3s later// æ‰§è¡Œå•¦ å…³äºsetTimeoutè¦è¡¥å……çš„æ˜¯ï¼Œå³ä¾¿ä¸»çº¿ç¨‹ä¸ºç©ºï¼Œ0æ¯«ç§’å®é™…ä¸Šä¹Ÿæ˜¯è¾¾ä¸åˆ°çš„ã€‚æ ¹æ®HTMLçš„æ ‡å‡†ï¼Œæœ€ä½æ˜¯4æ¯«ç§’ã€‚æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œäº†è§£ã€‚ setIntervalä¸Šé¢è¯´å®Œäº†setTimeoutï¼Œå½“ç„¶ä¸èƒ½é”™è¿‡å®ƒçš„å­ªç”Ÿå…„å¼ŸsetIntervalã€‚ä»–ä¿©å·®ä¸å¤šï¼Œåªä¸è¿‡åè€…æ˜¯å¾ªç¯çš„æ‰§è¡Œã€‚å¯¹äºæ‰§è¡Œé¡ºåºæ¥è¯´ï¼ŒsetIntervalä¼šæ¯éš”æŒ‡å®šçš„æ—¶é—´å°†æ³¨å†Œçš„å‡½æ•°ç½®å…¥Event Queueï¼Œå¦‚æœå‰é¢çš„ä»»åŠ¡è€—æ—¶å¤ªä¹…ï¼Œé‚£ä¹ˆåŒæ ·éœ€è¦ç­‰å¾…ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¯¹äºsetInterval(fn,ms)æ¥è¯´ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ä¸æ˜¯æ¯è¿‡msç§’ä¼šæ‰§è¡Œä¸€æ¬¡fnï¼Œè€Œæ˜¯æ¯è¿‡msç§’ï¼Œä¼šæœ‰fnè¿›å…¥Event Queueã€‚ä¸€æ—¦setIntervalçš„å›è°ƒå‡½æ•°fnæ‰§è¡Œæ—¶é—´è¶…è¿‡äº†å»¶è¿Ÿæ—¶é—´msï¼Œé‚£ä¹ˆå°±å®Œå…¨çœ‹ä¸å‡ºæ¥æœ‰æ—¶é—´é—´éš”äº†ã€‚ äº‹ä»¶å¾ªç¯æ‰§è¡Œé¡ºåºæ•´ä½“scriptä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡è¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆè¿›ï¼Œå°†å®ä»»åŠ¡(ä¾‹å¦‚setTimeout)ï¼Œå…¶å›è°ƒå‡½æ•°å­˜æ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå¾®ä»»åŠ¡(ä¾‹å¦‚process.nextTick())ï¼Œå°†å…¶å›è°ƒå‡½æ•°å­˜æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼ˆé˜Ÿåˆ—ï¼šå…ˆè¿›å…ˆå‡ºFIFOï¼‰ï¼Œæ‰€æœ‰å¼‚æ­¥ä»»åŠ¡éƒ½å­˜åœ¨è°ƒç”¨æ ˆï¼ˆæ ˆï¼šåè¿›å…ˆå‡ºLIFOï¼‰ä¸­ã€‚å¼€å§‹ç¬¬ä¸€æ¬¡å¾ªç¯ï¼Œæ¥ç€æ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ã€‚ç„¶åå†æ¬¡ä»å®ä»»åŠ¡å¼€å§‹ï¼Œæ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œæ¯•ï¼Œå†æ‰§è¡Œæ‰€æœ‰çš„å¾®ä»»åŠ¡ã€‚å¦‚ä¸‹ï¼š 123456789101112setTimeout(function() { console.log('setTimeout');})new Promise(function(resolve) { console.log('promise'); resolve() // æ³¨æ„ï¼šè‹¥æ— resolveå°†æŠ¥é”™}).then(function() { console.log('then');})console.log('console'); è¿™æ®µä»£ç ä½œä¸ºå®ä»»åŠ¡ï¼Œè¿›å…¥ä¸»çº¿ç¨‹ã€‚ å…ˆé‡åˆ°setTimeoutï¼Œé‚£ä¹ˆå°†å…¶å›è°ƒå‡½æ•°æ³¨å†Œååˆ†å‘åˆ°å®ä»»åŠ¡Event Queueã€‚(æ³¨å†Œè¿‡ç¨‹ä¸ä¸ŠåŒï¼Œä¸‹æ–‡ä¸å†æè¿°) æ¥ä¸‹æ¥é‡åˆ°äº†Promiseï¼Œnew Promiseç«‹å³æ‰§è¡Œï¼Œthenå‡½æ•°åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueã€‚ é‡åˆ°console.log()ï¼Œç«‹å³æ‰§è¡Œã€‚ å¥½å•¦ï¼Œæ•´ä½“ä»£ç scriptä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œçœ‹çœ‹æœ‰å“ªäº›å¾®ä»»åŠ¡ï¼Ÿæˆ‘ä»¬å‘ç°äº†thenåœ¨å¾®ä»»åŠ¡Event Queueé‡Œé¢ï¼Œæ‰§è¡Œã€‚ okï¼Œç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯ç»“æŸäº†ï¼Œæˆ‘ä»¬å¼€å§‹ç¬¬äºŒè½®å¾ªç¯ï¼Œå½“ç„¶è¦ä»å®ä»»åŠ¡Event Queueå¼€å§‹ã€‚æˆ‘ä»¬å‘ç°äº†å®ä»»åŠ¡Event Queueä¸­setTimeoutå¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œç«‹å³æ‰§è¡Œã€‚ ç»“æŸã€‚ç»“æœå¦‚ä¸‹ï¼š// promise console then setTimeout äº‹ä»¶å¾ªç¯ï¼Œå®ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡çš„å…³ç³»å¦‚å›¾æ‰€ç¤ºï¼š åˆ†æä¸€æ®µè¾ƒå¤æ‚çš„ä»£ç ï¼Œçœ‹çœ‹ä½ æ˜¯å¦çœŸçš„æŒæ¡äº†jsçš„æ‰§è¡Œæœºåˆ¶ï¼š 12345678910111213141516171819202122232425262728293031323334353637console.log('1');setTimeout(function() { console.log('2'); process.nextTick(function() { console.log('3'); }) new Promise(function(resolve) { console.log('4'); resolve(); }).then(function() { console.log('5') })})process.nextTick(function() { console.log('6');})new Promise(function(resolve) { console.log('7'); resolve();}).then(function() { console.log('8')})setTimeout(function() { console.log('9'); process.nextTick(function() { console.log('10'); }) new Promise(function(resolve) { console.log('11'); resolve(); }).then(function() { console.log('12') })}) äº‹ä»¶å¾ªç¯æµç¨‹åˆ†æå¦‚ä¸‹ï¼š æ•´ä½“scriptä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡è¿›å…¥ä¸»çº¿ç¨‹ï¼Œé‡åˆ°console.logï¼Œè¾“å‡º1ã€‚ é‡åˆ°setTimeoutï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡Event Queueä¸­ã€‚æˆ‘ä»¬æš‚ä¸”è®°ä¸ºsetTimeout1ã€‚ é‡åˆ°process.nextTick()ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚æˆ‘ä»¬è®°ä¸ºprocess1ã€‚ é‡åˆ°Promiseï¼Œnew Promiseç›´æ¥æ‰§è¡Œï¼Œè¾“å‡º7ã€‚thenè¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚æˆ‘ä»¬è®°ä¸ºthen1ã€‚ åˆé‡åˆ°äº†setTimeoutï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡Event Queueä¸­ï¼Œæˆ‘ä»¬è®°ä¸ºsetTimeout2ã€‚ ä¸Šè¡¨æ˜¯ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡ç»“æŸæ—¶å„Event Queueçš„æƒ…å†µï¼Œæ­¤æ—¶å·²ç»è¾“å‡ºäº†1å’Œ7ã€‚ æˆ‘ä»¬å‘ç°äº†process1å’Œthen1ä¸¤ä¸ªå¾®ä»»åŠ¡ã€‚ æ‰§è¡Œprocess1,è¾“å‡º6ã€‚ æ‰§è¡Œthen1ï¼Œè¾“å‡º8ã€‚ å¥½äº†ï¼Œç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯æ­£å¼ç»“æŸï¼Œè¿™ä¸€è½®çš„ç»“æœæ˜¯è¾“å‡º1ï¼Œ7ï¼Œ6ï¼Œ8ã€‚é‚£ä¹ˆç¬¬äºŒè½®æ—¶é—´å¾ªç¯ä»setTimeout1å®ä»»åŠ¡å¼€å§‹ï¼š é¦–å…ˆè¾“å‡º2ã€‚æ¥ä¸‹æ¥é‡åˆ°äº†process.nextTick()ï¼ŒåŒæ ·å°†å…¶åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸ºprocess2ã€‚new Promiseç«‹å³æ‰§è¡Œè¾“å‡º4ï¼Œthenä¹Ÿåˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸ºthen2ã€‚ ç¬¬äºŒè½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡ç»“æŸï¼Œæˆ‘ä»¬å‘ç°æœ‰process2å’Œthen2ä¸¤ä¸ªå¾®ä»»åŠ¡å¯ä»¥æ‰§è¡Œã€‚ è¾“å‡º3ã€‚ è¾“å‡º5ã€‚ ç¬¬äºŒè½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬äºŒè½®è¾“å‡º2ï¼Œ4ï¼Œ3ï¼Œ5ã€‚ ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯å¼€å§‹ï¼Œæ­¤æ—¶åªå‰©setTimeout2äº†ï¼Œæ‰§è¡Œã€‚ ç›´æ¥è¾“å‡º9ã€‚ å°†process.nextTick()åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚è®°ä¸ºprocess3ã€‚ ç›´æ¥æ‰§è¡Œnew Promiseï¼Œè¾“å‡º11ã€‚ å°†thenåˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸ºthen3ã€‚ ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œæ‰§è¡Œä¸¤ä¸ªå¾®ä»»åŠ¡process3å’Œthen3ã€‚ è¾“å‡º10ã€‚ è¾“å‡º12ã€‚ ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬ä¸‰è½®è¾“å‡º9ï¼Œ11ï¼Œ10ï¼Œ12ã€‚ æ•´æ®µä»£ç ï¼Œå…±è¿›è¡Œäº†ä¸‰æ¬¡äº‹ä»¶å¾ªç¯ï¼Œå®Œæ•´çš„è¾“å‡ºä¸º1ï¼Œ7ï¼Œ6ï¼Œ8ï¼Œ2ï¼Œ4ï¼Œ3ï¼Œ5ï¼Œ9ï¼Œ11ï¼Œ10ï¼Œ12ã€‚ (è¯·æ³¨æ„ï¼Œnodeç¯å¢ƒä¸‹çš„äº‹ä»¶ç›‘å¬ä¾èµ–libuvä¸å‰ç«¯ç¯å¢ƒä¸å®Œå…¨ç›¸åŒï¼Œè¾“å‡ºé¡ºåºå¯èƒ½ä¼šæœ‰è¯¯å·®) 1234567891011121314151617181920212223242526272829303132333435console.log('script start')async function async1() { await async2() console.log('async1 end')}async function async2() { console.log('async2 end')}async1()setTimeout(function() { console.log('setTimeout')}, 0)new Promise(resolve =&gt; { console.log('PromiseA') resolve() console.log('PromiseB')}) .then(function() { console.log('promise1') }) .then(function() { console.log('promise2') })console.log('script end')// script start// async2 end// PromiseA// PromiseB// script end// async1 end// promise1// promise2// setTimeout å‚è€ƒæ–‡ç«  ã€THE LAST TIMEã€‘å½»åº•åƒé€ JavaScript æ‰§è¡Œæœºåˆ¶ è¿™ä¸€æ¬¡ï¼Œå½»åº•å¼„æ‡‚ JavaScript æ‰§è¡Œæœºåˆ¶ æ·±å…¥ç†è§£ JavaScript Event Loop","link":"/2022/03/12/JavaScript/javaScript-async/"},{"title":"call apply bind","text":"call apply bind ä¸‰è€…çš„åŒºåˆ«: 1ï¼‰ä¸‰è€…éƒ½å¯ä»¥æ˜¾å¼ç»‘å®šå‡½æ•°çš„thisæŒ‡å‘ 2ï¼‰ä¸‰è€…ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯thisè¦æŒ‡å‘çš„å¯¹è±¡ï¼Œè‹¥è¯¥å‚æ•°ä¸ºundefinedæˆ–nullï¼Œthisåˆ™é»˜è®¤æŒ‡å‘å…¨å±€window 3ï¼‰ä¼ å‚ä¸åŒï¼šapplyæ˜¯æ•°ç»„ã€callæ˜¯å‚æ•°åˆ—è¡¨ï¼Œè€Œbindå¯ä»¥åˆ†ä¸ºå¤šæ¬¡ä¼ å…¥ï¼Œå®ç°å‚æ•°çš„åˆå¹¶ 4ï¼‰callã€applyæ˜¯ç«‹å³æ‰§è¡Œï¼Œbindæ˜¯è¿”å›ç»‘å®šthisä¹‹åçš„å‡½æ•°ï¼Œå¦‚æœè¿™ä¸ªæ–°çš„å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆthisä¸å†æŒ‡å‘ä¼ å…¥ç»™bindçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œæ˜¯æŒ‡å‘æ–°ç”Ÿæˆçš„å¯¹è±¡ æ‰‹å†™call: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// æ‰‹å†™callFunction.prototype.Call = function(context, ...args) { // contextä¸ºundefinedæˆ–nullæ—¶ï¼Œåˆ™thisé»˜è®¤æŒ‡å‘å…¨å±€window if (context === undefined || context === null) { context = window; } // åˆ©ç”¨Symbolåˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„keyå€¼ï¼Œé˜²æ­¢æ–°å¢åŠ çš„å±æ€§ä¸objä¸­çš„å±æ€§åé‡å¤ let fn = Symbol(); // thisæŒ‡å‘è°ƒç”¨callçš„å‡½æ•° context[fn] = this; // éšå¼ç»‘å®šthisï¼Œå¦‚æ‰§è¡Œobj.foo(), fooå†…çš„thisæŒ‡å‘obj let res = context[fn](...args); // æ‰§è¡Œå®Œä»¥åï¼Œåˆ é™¤æ–°å¢åŠ çš„å±æ€§ delete context[fn]; return res;};// applyä¸callç›¸ä¼¼ï¼Œåªæœ‰ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒFunction.prototype.Apply = function(context, args) { if (context === undefined || context === null) { context = window; } let fn = Symbol(); context[fn] = this; let res = context[fn](...args); delete context[fn]; return res;};// bindè¦è€ƒè™‘è¿”å›çš„å‡½æ•°ï¼Œä½œä¸ºæ„é€ å‡½æ•°è¢«è°ƒç”¨çš„æƒ…å†µFunction.prototype.Bind = function(context, ...args) { if (context === undefined || context === null) { context = window; } let fn = this; let f = Symbol(); const result = function(...args1) { if (this instanceof fn) { // resultå¦‚æœä½œä¸ºæ„é€ å‡½æ•°è¢«è°ƒç”¨ï¼ŒthisæŒ‡å‘çš„æ˜¯newå‡ºæ¥çš„å¯¹è±¡ // this instanceof fnï¼Œåˆ¤æ–­newå‡ºæ¥çš„å¯¹è±¡æ˜¯å¦ä¸ºfnçš„å®ä¾‹ this[f] = fn; let res = this[f](...args, ...args1); delete this[f]; return res; } else { // bindè¿”å›çš„å‡½æ•°ä½œä¸ºæ™®é€šå‡½æ•°è¢«è°ƒç”¨æ—¶ context[f] = fn; let res = context[f](...args, ...args1); delete context[f]; return res; } }; // å¦‚æœç»‘å®šçš„æ˜¯æ„é€ å‡½æ•° é‚£ä¹ˆéœ€è¦ç»§æ‰¿æ„é€ å‡½æ•°åŸå‹å±æ€§å’Œæ–¹æ³• // å®ç°ç»§æ‰¿çš„æ–¹å¼: ä½¿ç”¨Object.create result.prototype = Object.create(fn.prototype); return result;}; å‚è€ƒ æ·±å…¥ç†è§£ JavaScript åŸå‹ å®ç° applyã€callã€bind","link":"/2022/05/12/JavaScript/javaScript-call-apply-bind/"},{"title":"å‡½æ•°å¼ç¼–ç¨‹","text":"å‡½æ•°å¼ç¼–ç¨‹ çº¯å‡½æ•° é«˜é˜¶å‡½æ•° æŸ¯é‡ŒåŒ– ç»„åˆä¸ç®¡é“ å‚è€ƒ jsä¸­å¦‚ä½•å®ç°å‡½æ•°ç¼“å­˜ å‡½æ•°å¼ç¼–ç¨‹çš„ç†è§£","link":"/2024/02/25/JavaScript/javaScript-func/"},{"title":"JS æ‰‹å†™å‡½æ•°","text":"æ·±æ‹·è´ new åˆ¤æ–­ç±»å‹ å‘å¸ƒè®¢é˜…æ¨¡å¼ æ•°ç»„æ‰å¹³åŒ– æ‰‹å†™mapå‡½æ•° å›¾ç‰‡æ‡’åŠ è½½å®ç° æ·±æ‹·è´12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455// æ·±æ‹·è´function deepClone(source) { if (!source &amp;&amp; typeof source !== 'object') { return source } const target = Array.isArray(source) ? [] : {} Object.keys(source).forEach(key =&gt; { if (source[key] &amp;&amp; typeof key === 'object') { target[key] = deepClone(source[key]) } else { target[key] = source[key] } }) return target}// æ·±æ‹·è´function deepClone(target,hash = new weakMap){ if(target === null &amp;&amp; target!=='object'){ return target } if(hash.get(target)) return hash.get(target) const newObj = Array.isArray(target)? []:{} hash.set(target,newObj) for(let key in target){ if(target.hasOwnProperty(key)){ if(target[key] !== null &amp;&amp; target[key] === 'object'){ newObj[key] = deepClone(target[key]) } else { newObj[key] = target[key] } } } return newObj}function deepClone(obj, hash = new WeakMap()) { if (obj === null) return obj; // å¦‚æœæ˜¯nullæˆ–è€…undefinedæˆ‘å°±ä¸è¿›è¡Œæ‹·è´æ“ä½œ if (obj instanceof Date) return new Date(obj); if (obj instanceof RegExp) return new RegExp(obj); // å¯èƒ½æ˜¯å¯¹è±¡æˆ–è€…æ™®é€šçš„å€¼ å¦‚æœæ˜¯å‡½æ•°çš„è¯æ˜¯ä¸éœ€è¦æ·±æ‹·è´ if (typeof obj !== &quot;object&quot;) return obj; // æ˜¯å¯¹è±¡çš„è¯å°±è¦è¿›è¡Œæ·±æ‹·è´ if (hash.get(obj)) return hash.get(obj); let cloneObj = new obj.constructor(); // æ‰¾åˆ°çš„æ˜¯æ‰€å±ç±»åŸå‹ä¸Šçš„constructor,è€ŒåŸå‹ä¸Šçš„ constructoræŒ‡å‘çš„æ˜¯å½“å‰ç±»æœ¬èº« hash.set(obj, cloneObj); for (let key in obj) { if (obj.hasOwnProperty(key)) { // å®ç°ä¸€ä¸ªé€’å½’æ‹·è´ cloneObj[key] = deepClone(obj[key], hash); } } return cloneObj;} new123456// newfunction newSelf(fn, args) { const constructor = Object.create(fn.prototype) const obj = fn.apply(constructor, args) return typeof obj === 'object' &amp;&amp; obj !== null ? obj : constructor} åˆ¤æ–­ç±»å‹12345678910// åˆ¤æ–­ç±»å‹function getDataType(target) { return Object.prototype.toString.call(target).slice(8, -1).toLowerCase();}// åˆ¤æ–­æ‰€æœ‰çš„æ•°æ®ç±»å‹console.log(getDataType(null)); // nullconsole.log(getDataType(undefined)); // undefinedconsole.log(getDataType(Symbol())); // symbolconsole.log(getDataType(new Date())); // dateconsole.log(getDataType(new Set())); // set æ‰‹åŠ¨å®ç°å‘å¸ƒè®¢é˜…æ¨¡å¼(åŸºç¡€ç‰ˆ)å®ç°ç›®æ ‡ï¼šä½¿ç”¨ $on è®¢é˜…äº‹ä»¶ï¼Œä½¿ç”¨ $emit å‘å¸ƒäº‹ä»¶ã€‚ä¸»è¦æ€è·¯ï¼š åˆ›å»ºä¸€ä¸ªç¼“å­˜åˆ—è¡¨å¯¹è±¡ï¼Œå­˜æ”¾è®¢é˜…çš„äº‹ä»¶åå’Œå›è°ƒ on æ–¹æ³•ç”¨æ¥æŠŠå›è°ƒå‡½æ•°éƒ½åŠ åˆ°ç¼“å­˜åˆ—è¡¨ä¸­ï¼ˆè®¢é˜…è€…æ³¨å†Œäº‹ä»¶åˆ°è°ƒåº¦ä¸­å¿ƒï¼‰ emitæ–¹æ³•æ ¹æ®äº‹ä»¶åå»é€ä¸ªæ‰§è¡Œå¯¹åº”ç¼“å­˜åˆ—è¡¨ä¸­çš„å‡½æ•°ï¼ˆå‘å¸ƒè€…å‘å¸ƒäº‹ä»¶åˆ°è°ƒåº¦ä¸­å¿ƒï¼‰ off å–æ¶ˆè®¢é˜…123456789101112131415161718192021222324252627282930313233343536373839404142434445464748class EventBus { constructor() { // ç¼“å­˜åˆ—è¡¨ï¼Œç”¨æ¥å­˜æ”¾æ³¨å†Œçš„äº‹ä»¶ä¸å›è°ƒ this.cache = {}; } // è®¢é˜…äº‹ä»¶ on(name, cb) { // å¦‚æœå½“å‰äº‹ä»¶æ²¡æœ‰è®¢é˜…è¿‡ï¼Œå°±ç»™äº‹ä»¶åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ— if (!this.cache[name]) { this.cache[name] = []; //ç”±äºä¸€ä¸ªäº‹ä»¶å¯èƒ½æ³¨å†Œå¤šä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰€ä»¥ä½¿ç”¨æ•°ç»„æ¥å­˜å‚¨äº‹ä»¶é˜Ÿåˆ— } this.cache[name].push(cb); } // è§¦å‘äº‹ä»¶ emit(name, ...args) { // æ£€æŸ¥ç›®æ ‡äº‹ä»¶æ˜¯å¦æœ‰ç›‘å¬å‡½æ•°é˜Ÿåˆ— if (this.cache[name]) { // é€ä¸ªè°ƒç”¨é˜Ÿåˆ—é‡Œçš„å›è°ƒå‡½æ•° this.cache[name].forEach((callback) =&gt; { callback(...args); }); } } off(name){ delete this.cache[name] }}// æµ‹è¯•let eventBus = new EventBus();// è®¢é˜…äº‹ä»¶eventBus.on(&quot;teacherName1&quot;, (pos, state) =&gt; { console.log(`è®¢é˜…è€…å°é™ˆè€å¸ˆ,å°æ˜åŒå­¦å½“å‰åœ¨${pos},å¿ƒæƒ…çŠ¶æ€æ˜¯${state}`);});eventBus.on(&quot;teacherName1&quot;, (pos, state) =&gt; { console.log(`è®¢é˜…è€…å°é™ˆè€å¸ˆ,å°æ˜åŒå­¦å½“å‰åœ¨${pos},å¿ƒæƒ…çŠ¶æ€æ˜¯${state}`);});eventBus.on(&quot;teacherName2&quot;, (pos, state) =&gt; { console.log(`è®¢é˜…è€…å°æè€å¸ˆ,å°æ˜åŒå­¦å½“å‰åœ¨${pos},å¿ƒæƒ…çŠ¶æ€æ˜¯${state}`);});// å‘å¸ƒäº‹ä»¶eventBus.emit(&quot;teacherName1&quot;, &quot;æ•™å®¤&quot;, &quot;ä¼¤å¿ƒ&quot;);eventBus.emit(&quot;teacherName2&quot;, &quot;æ“åœº&quot;, &quot;å¼€å¿ƒ&quot;);// å–æ¶ˆeventBus.off(&quot;teacherName2&quot;); æ•°ç»„æ‰å¹³åŒ–12345678910111213141516// deepåˆå§‹å€¼ä¸º1Array.prototype.myFlat = function(deep = 1) { let arr = this; // deepä¸º0åˆ™è¿”å›ï¼Œé€’å½’ç»“æŸ if (deep == 0) return arr; // ä½¿ç”¨reduceä½œä¸ºç´¯åŠ å™¨ return arr.reduce((pre, cur) =&gt; { // curä¸ºæ•°ç»„ï¼Œç»§ç»­é€’å½’ï¼Œdeep-1 if (Array.isArray(cur)) { return [...pre, ...cur.myFlat(deep - 1)]; } else { return [...pre, cur]; } }, []);};console.log([1, 2, 3, [4, [5, [6]]]].myFlat(2)); // [1, 2, 3, 4, 5, [6]] æ‰‹å†™mapå‡½æ•°1234567891011121314151617181920212223// fn æ¥å—3ä¸ªå‚æ•°ï¼Œelement å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€index æ­£åœ¨å¤„ç†çš„å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ã€array è°ƒç”¨äº† map() çš„æ•°ç»„æœ¬èº«// mapä¸­çš„ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºfnå‡½æ•°çš„thisArray.prototype.selfMap = function(fn, content) { if (Object.prototype.toString.call(fn) != '[object Function]') { throw new TypeError(`${fn} is not a function `); } // Array.prototype.map() å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°åªæœ‰ä¸º null æˆ– undefined æ—¶ï¼Œå›è°ƒå‡½æ•°ä¸­çš„ this å€¼æ‰ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡ if (content === null || content === undefined) { content = window; } let arr = this.slice(); let list = new Array(arr.length); for (let i = 0; i &lt; arr.length; i++) { // è·³è¿‡ç¨€ç–æ•°ç»„ if (i in arr) { // ä¾æ¬¡ä¼ å…¥this, å½“å‰é¡¹ï¼Œå½“å‰ç´¢å¼•ï¼Œæ•´ä¸ªæ•°ç»„ list[i] = fn.call(content, arr[i], i, arr); } } return mappedArr;};let arr = [1, 2, 3];console.log(arr.selfMap(item =&gt; item * 2)); // [2, 4, 6] å›¾ç‰‡æ‡’åŠ è½½å®ç°å›¾ç‰‡çš„æ‡’åŠ è½½åŸç†ï¼š å½“å›¾ç‰‡å…ƒç´ å‡ºç°åœ¨å±å¹•ä¸­æ—¶ï¼Œæ‰ç»™å›¾ç‰‡çš„srcèµ‹å€¼å¯¹åº”çš„é“¾æ¥ï¼Œå»åŠ è½½å¯¹åº”çš„å›¾ç‰‡;ä½¿ç”¨IntersectionObserverç›‘å¬å…ƒç´ æ¥åˆ¤æ–­æ˜¯å¦å‡ºç°åœ¨è§†å£ï¼Œå½“å›¾ç‰‡å‡ºç°åœ¨è§†å£æ—¶ï¼Œç»™img.srcèµ‹å€¼;IntersectionObserveræ›¿ä»£ç›‘å¬scrolläº‹ä»¶æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦åœ¨è§†å£ä¸­ï¼Œæ€§èƒ½æ›´é«˜ 1234567891011121314151617181920212223// htmlå†…å®¹// &lt;img src=&quot;./loading.jpg&quot; data-src=&quot;https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg&quot;&gt;// &lt;img src=&quot;./loading.jpg&quot; data-src=&quot;https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg&quot;&gt;function observerImg() { // è·å–æ‰€æœ‰çš„å›¾ç‰‡å…ƒç´  let imgList = document.getElementsByTagName(&quot;img&quot;); let observer = new IntersectionObserver(list =&gt; { // å›è°ƒçš„æ•°æ®æ˜¯ä¸€ä¸ªæ•°ç»„ list.forEach(item =&gt; { // åˆ¤æ–­å…ƒç´ æ˜¯å¦å‡ºç°åœ¨è§†å£ if (item.intersectionRatio &gt; 0) { // è®¾ç½®imgçš„srcå±æ€§ item.target.src = item.target.getAttribute(&quot;data-src&quot;); // è®¾ç½®srcå±æ€§åï¼Œåœæ­¢ç›‘å¬ observer.unobserve(item.target); } }); }); for (let i = 0; i &lt; imgList.length; i++) { // ç›‘å¬æ¯ä¸ªimgå…ƒç´  observer.observe(imgList[i]); }} å‚è€ƒ ã€Œå†æ—¶8ä¸ªæœˆã€10ä¸‡å­—å‰ç«¯çŸ¥è¯†ä½“ç³»æ€»ç»“ï¼ˆåŸºç¡€çŸ¥è¯†ç¯‡ï¼‰ğŸ”¥","link":"/2024/02/29/JavaScript/javaScript-handleFunc/"},{"title":"new","text":"new new ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ°åº•å‘ç”Ÿä»€ä¹ˆï¼Ÿ 1ï¼‰åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„åŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹2ï¼‰è°ƒç”¨è¯¥æ„é€ å‡½æ•°ï¼Œæ„é€ å‡½æ•°çš„thisæŒ‡å‘æ–°ç”Ÿæˆçš„å¯¹è±¡3ï¼‰åˆ¤æ–­æ„é€ å‡½æ•°æ˜¯å¦æœ‰è¿”å›å€¼ï¼Œå¦‚æœæœ‰è¿”å›å€¼ä¸”è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–ä¸€ä¸ªæ–¹æ³•ï¼Œåˆ™è¿”å›è¯¥å€¼ï¼›å¦åˆ™è¿”å›æ–°ç”Ÿæˆçš„å¯¹è±¡ æ„é€ å‡½æ•°æœ‰è¿”å›å€¼çš„æ¡ˆä¾‹: 123456function Dog(name) { this.name = name; return { test: 1 };}let obj = new Dog(&quot;ming&quot;);console.log(obj); // {test:1} æ‰‹å†™new: 1234567891011121314151617181920212223242526function selfNew(fn, ...args) { // åˆ›å»ºä¸€ä¸ªinstanceå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„åŸå‹æ˜¯fn.prototype let instance = Object.create(fn.prototype); // è°ƒç”¨æ„é€ å‡½æ•°ï¼Œä½¿ç”¨applyï¼Œå°†thisæŒ‡å‘æ–°ç”Ÿæˆçš„å¯¹è±¡ let res = fn.apply(instance, args); // å¦‚æœfnå‡½æ•°æœ‰è¿”å›å€¼ï¼Œå¹¶ä¸”è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–æ–¹æ³•ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ï¼Œå¦åˆ™è¿”å›æ–°ç”Ÿæˆçš„instanceå¯¹è±¡ return typeof res === &quot;object&quot; || typeof res === &quot;function&quot; ? res : instance;}function mynew(func, ...args) { const obj = {} obj.__proto__ = func.prototype let result = func.apply(obj, args) return result instanceof Object ? result : obj}function Person(name, age) { this.name = name; this.age = age;}Person.prototype.say = function () { console.log(this.name)}let p = mynew(Person, &quot;huihui&quot;, 123)console.log(p) // Person {name: &quot;huihui&quot;, age: 123}p.say() // huihui å‚è€ƒ new æ“ä½œç¬¦åšäº†ä»€ä¹ˆ ã€Œå†æ—¶8ä¸ªæœˆã€10ä¸‡å­—å‰ç«¯çŸ¥è¯†ä½“ç³»æ€»ç»“ï¼ˆåŸºç¡€çŸ¥è¯†ç¯‡ï¼‰ğŸ”¥","link":"/2022/03/12/JavaScript/javaScript-new/"},{"title":"this","text":"this thisthisçš„5ç§ç»‘å®šæ–¹å¼ é»˜è®¤ç»‘å®š(éä¸¥æ ¼æ¨¡å¼ä¸‹thisæŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹å‡½æ•°å†…çš„thisæŒ‡å‘undefined) éšå¼ç»‘å®š(å½“å‡½æ•°å¼•ç”¨æœ‰ä¸Šä¸‹æ–‡å¯¹è±¡æ—¶, å¦‚ obj.foo()çš„è°ƒç”¨æ–¹å¼, fooå†…çš„thisæŒ‡å‘obj) æ˜¾ç¤ºç»‘å®š(é€šè¿‡callæˆ–è€…applyæ–¹æ³•ç›´æ¥æŒ‡å®šthisçš„ç»‘å®šå¯¹è±¡, å¦‚foo.call(obj)) newæ„é€ å‡½æ•°ç»‘å®šï¼ŒthisæŒ‡å‘æ–°ç”Ÿæˆçš„å¯¹è±¡ ç®­å¤´å‡½æ•°ï¼ŒthisæŒ‡å‘çš„æ˜¯å®šä¹‰è¯¥å‡½æ•°æ—¶ï¼Œå¤–å±‚ç¯å¢ƒä¸­çš„thisï¼Œç®­å¤´å‡½æ•°çš„thisåœ¨å®šä¹‰æ—¶å°±å†³å®šäº†ï¼Œä¸èƒ½æ”¹å˜ 12345678910&quot;use strict&quot;;var a = 10; // varå®šä¹‰çš„aå˜é‡æŒ‚è½½åˆ°windowå¯¹è±¡ä¸Šfunction foo () { console.log('this1', this) // undefined console.log(window.a) // 10 console.log(this.a) // æŠ¥é”™ï¼ŒUncaught TypeError: Cannot read properties of undefined (reading 'a')}console.log('this2', this) // windowfoo();// æ³¨æ„ï¼šå¼€å¯äº†ä¸¥æ ¼æ¨¡å¼ï¼Œåªæ˜¯ä½¿å¾—å‡½æ•°å†…çš„thisæŒ‡å‘undefinedï¼Œå®ƒå¹¶ä¸ä¼šæ”¹å˜å…¨å±€ä¸­thisçš„æŒ‡å‘ã€‚å› æ­¤this1ä¸­æ‰“å°çš„æ˜¯undefinedï¼Œè€Œthis2è¿˜æ˜¯windowå¯¹è±¡ã€‚ ç®­å¤´å‡½æ•°å’Œæ™®é€šå‡½æ•°æœ‰ä»€ä¹ˆåŒºåˆ«123456789101112131415161718192021222324252627var obj2 = { a: 2, foo1: function () { console.log(this,this.a) // 2 }, foo2: function () { setTimeout(function () { console.log(this) // window console.log(this.a) // 3 }, 0) }}var a = 3console.log(this);obj2.foo1()obj2.foo2() var id = 'aa'console.log(this);console.log(global);function ab(){ let id = 'b' console.log(this === global) return this.id}console.log(ab()) å‚è€ƒ https://juejin.cn/post/7204707115062411320#heading-9 https://juejin.cn/post/7146973901166215176#heading-8è°ˆè°ˆthisçš„ç†è§£","link":"/2022/03/12/JavaScript/javaScript-this/"},{"title":"èŠ‚æµ &amp; é˜²æŠ–","text":"èŠ‚æµ &amp; é˜²æŠ– èŠ‚æµå’Œé˜²æŠ–çš„åŒºåˆ«èŠ‚æµï¼šäº‹ä»¶è§¦å‘åï¼Œç«‹å³æ‰§è¡Œä¸”nç§’å†…åªæ‰§è¡Œä¸€æ¬¡ é˜²æŠ–ï¼šäº‹ä»¶è§¦å‘åï¼Œç­‰å¾…nç§’æ‰§è¡Œï¼Œnç§’å†…å†æ¬¡è§¦å‘ï¼Œåˆ™å–æ¶ˆä¸Šæ¬¡ï¼Œæ‰§è¡Œæœ€åä¸€æ¬¡ èŠ‚æµå’Œé˜²æŠ–çš„ä½¿ç”¨åœºæ™¯èŠ‚æµï¼šè¡¨å•é‡å¤æäº¤ï¼ŒæŒ‰é’®é«˜é¢‘ç‚¹å‡»ï¼Œæ»šåŠ¨åŠ è½½ é˜²æŠ–ï¼šæœç´¢æ¡†è‡ªåŠ¨æœç´¢ï¼Œè¾“å…¥æ¡†æ ¡éªŒï¼Œçª—å£å¤§å°æ”¹å˜é‡æ–°æ¸²æŸ“ èŠ‚æµå’Œé˜²æŠ–çš„å®ç°1234567891011121314151617181920212223242526272829/* * èŠ‚æµå‡½æ•° ä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸€æ¬¡åï¼Œåªæœ‰å¤§äºè®¾å®šçš„æ‰§è¡Œå‘¨æœŸæ‰ä¼šæ‰§è¡Œç¬¬äºŒæ¬¡ã€‚æœ‰ä¸ªéœ€è¦é¢‘ç¹è§¦å‘çš„å‡½æ•°ï¼Œå‡ºäºä¼˜åŒ–æ€§èƒ½çš„è§’åº¦ï¼Œåœ¨è§„å®šæ—¶é—´å†…ï¼Œåªè®©å‡½æ•°è§¦å‘çš„ç¬¬ä¸€æ¬¡ç”Ÿæ•ˆï¼Œåé¢çš„ä¸ç”Ÿæ•ˆã€‚ * @param fnè¦è¢«é˜²æŠ–çš„å‡½æ•° * @param delayè§„å®šçš„æ—¶é—´ */function throttle(fn, delay){ let lastTime = 0 return function (){ let nowTime = Date.now() if(nowTime - lastTime &gt; delay){ // ä¿®æ­£thisæŒ‡å‘é—®é¢˜ fn.apply(this) lastTime = nowTime } }}function throttled2(fn, delay = 500) { let timer = null return function (...args) { if (!timer) { timer = setTimeout(() =&gt; { fn.apply(this, args) timer = null }, delay); } }} 1234567891011121314151617181920212223/* * é˜²æŠ–å‡½æ•° ä¸€ä¸ªéœ€è¦é¢‘ç¹è§¦å‘çš„å‡½æ•°ï¼Œåœ¨è§„å®šæ—¶é—´å†…ï¼Œåªè®©æœ€åä¸€æ¬¡ç”Ÿæ•ˆï¼Œå‰é¢çš„ä¸ç”Ÿæ•ˆ * @param fnè¦è¢«é˜²æŠ–çš„å‡½æ•° * @param delayè§„å®šçš„æ—¶é—´ */function debounce(fn, delay){ let timer = null return function (){ if(timer) { // æ¸…é™¤ä¸Šä¸€æ¬¡çš„æ¼”ç¤ºå™¨ clearTimeout(timer) } timer = setTimeout(()=&gt;{ // ä¿®æ­£thisæŒ‡å‘é—®é¢˜ fn.apply(this) },delay) }}document.getElementById('btn').onclick = debounce(function () { console.log('æŒ‰é’®è¢«ç‚¹å‡»äº†' + Date.now());}, 1000); å‚è€ƒ https://juejin.cn/post/7204707115062411320#heading-54 https://fe.ecool.fun/topic/7fa82090-78a2-4445-a982-48ed95cb20c0?orderBy=updateTime&amp;order=desc&amp;tagId=10","link":"/2022/03/12/JavaScript/javaScript-throttle/"},{"title":"åŸå‹ &amp; åŸå‹é“¾","text":"åŸå‹ &amp; åŸå‹é“¾ å‚è€ƒ æ·±å…¥ç†è§£ JavaScript åŸå‹ ã€Œå†æ—¶8ä¸ªæœˆã€10ä¸‡å­—å‰ç«¯çŸ¥è¯†ä½“ç³»æ€»ç»“ï¼ˆåŸºç¡€çŸ¥è¯†ç¯‡ï¼‰ğŸ”¥","link":"/2022/03/12/JavaScript/javaScript-prototype/"},{"title":"promise","text":"promiseasync await promiseæ‰‹å†™promise12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485class Promise { constructor(fn) { // resolveæ—¶çš„å›è°ƒå‡½æ•°åˆ—è¡¨ this.resolveTask = []; // rejectæ—¶çš„å›è°ƒå‡½æ•°åˆ—è¡¨ this.rejectTask = []; // stateè®°å½•å½“å‰çŠ¶æ€,å…±æœ‰pendingã€fulfilledã€rejected 3ç§çŠ¶æ€ this.state = &quot;pending&quot;; let resolve = value =&gt; { // stateçŠ¶æ€åªèƒ½æ”¹å˜ä¸€æ¬¡ï¼Œresolveå’Œrejectåªä¼šè§¦å‘ä¸€ç§ if (this.state !== &quot;pending&quot;) return; this.state = &quot;fulfilled&quot;; this.data = value; // æ¨¡æ‹Ÿå¼‚æ­¥ï¼Œä¿è¯resolveTaskäº‹ä»¶å…ˆæ³¨å†ŒæˆåŠŸï¼Œè¦è€ƒè™‘åœ¨Promiseé‡Œé¢å†™åŒæ­¥ä»£ç çš„æƒ…å†µ setTimeout(() =&gt; { this.resolveTask.forEach(cb =&gt; cb(value)); }); }; let reject = err =&gt; { if (this.state !== &quot;pending&quot;) return; this.state = &quot;rejected&quot;; this.error = err; // ä¿è¯rejectTaskäº‹ä»¶æ³¨å†ŒæˆåŠŸ setTimeout(() =&gt; { this.rejectTask.forEach(cb =&gt; cb(err)); }); }; // å…³é”®ä»£ç ï¼Œæ‰§è¡Œfnå‡½æ•° try { fn(resolve, reject); } catch (error) { reject(error); } } then(resolveCallback, rejectCallback) { // è§£å†³é“¾å¼è°ƒç”¨çš„æƒ…å†µï¼Œç»§ç»­è¿”å›Promise return new Promise((resolve, reject) =&gt; { // å°†thenä¼ å…¥çš„å›è°ƒå‡½æ•°ï¼Œæ³¨å†Œåˆ°resolveTaskä¸­ this.resolveTask.push(() =&gt; { // é‡ç‚¹ï¼šåˆ¤æ–­resolveCallbackäº‹ä»¶çš„è¿”å›å€¼ // å‡å¦‚ç”¨æˆ·æ³¨å†Œçš„resolveCallbackäº‹ä»¶åˆè¿”å›ä¸€ä¸ªPromiseï¼Œå°†resolveå’Œrejectä¼ è¿›å»ï¼Œè¿™æ ·å°±å®ç°æ§åˆ¶äº†é“¾å¼è°ƒç”¨çš„é¡ºåº const res = resolveCallback(this.data); if (res instanceof Promise) { res.then(resolve, reject); } else { // å‡å¦‚è¿”å›å€¼ä¸ºæ™®é€šå€¼ï¼Œresolveä¼ é€’å‡ºå» resolve(res); } }); this.rejectTask.push(() =&gt; { // åŒç†ï¼šåˆ¤æ–­rejectCallbackäº‹ä»¶çš„è¿”å›å€¼ // å‡å¦‚è¿”å›å€¼ä¸ºæ™®é€šå€¼ï¼Œrejectä¼ é€’å‡ºå» const res = rejectCallback(this.error); if (res instanceof Promise) { res.then(resolve, reject); } else { reject(res); } }); }); }}// æµ‹è¯•// æ‰“å°ç»“æœï¼šä¾æ¬¡æ‰“å°1ã€2new Promise((resolve, reject) =&gt; { setTimeout(() =&gt; { resolve(1); }, 500);}).then( res =&gt; { console.log(res); return new Promise(resolve =&gt; { setTimeout(() =&gt; { resolve(2); }, 1000); }); } ).then(data =&gt; { console.log(data); }); æ‰‹å†™raceã€all raceï¼šè¿”å›promisesåˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªæ‰§è¡Œå®Œçš„ç»“æœ allï¼šè¿”å›promisesåˆ—è¡¨ä¸­å…¨éƒ¨æ‰§è¡Œå®Œçš„ç»“æœ 12345678910111213141516171819202122232425262728293031323334353637383940class Promise { // raceé™æ€æ–¹æ³•ï¼Œè¿”å›promisesåˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªæ‰§è¡Œå®Œçš„ç»“æœ static race(promises) { return new Promise((resolve, reject) =&gt; { for (let i = 0; i &lt; promises.length; i++) { // Promise.resolveåŒ…ä¸€ä¸‹ï¼Œé˜²æ­¢promises[i]ä¸æ˜¯Promiseç±»å‹ Promise.resolve(promises[i]) .then(res =&gt; { resolve(res); }) .catch(err =&gt; { reject(err); }); } }); } // allé™æ€æ–¹æ³•ï¼Œ è¿”å›promisesåˆ—è¡¨ä¸­å…¨éƒ¨æ‰§è¡Œå®Œçš„ç»“æœ static all(promises) { let result = []; let index = 0; return new Promise((resolve, reject) =&gt; { for (let i = 0; i &lt; promises.length; i++) { Promise.resolve(promises[i]) .then(res =&gt; { // è¾“å‡ºç»“æœçš„é¡ºåºå’Œpromisesçš„é¡ºåºä¸€è‡´ result[i] = res; index++; if (index === promises.length) { resolve(result); } }) .catch(err =&gt; { reject(err); }); } }); }} async await asyncå‡½æ•°æ˜¯generatorï¼ˆç”Ÿæˆå™¨å‡½æ•°ï¼‰çš„è¯­æ³•ç³– asyncå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œæœ‰æ— å€¼çœ‹æœ‰æ— returnå€¼ awaitå…³é”®å­—åªèƒ½æ”¾åœ¨asyncå‡½æ•°å†…éƒ¨ï¼Œawaitå…³é”®å­—çš„ä½œç”¨ å°±æ˜¯è·å–Promiseä¸­è¿”å›çš„resolveæˆ–è€…rejectçš„å€¼ asyncã€awaitè¦ç»“åˆtry/catchä½¿ç”¨ï¼Œé˜²æ­¢æ„å¤–çš„é”™è¯¯ generator: generatorå‡½æ•°è·Ÿæ™®é€šå‡½æ•°åœ¨å†™æ³•ä¸Šçš„åŒºåˆ«å°±æ˜¯ï¼Œå¤šäº†ä¸€ä¸ªæ˜Ÿå·* åªæœ‰åœ¨generatorå‡½æ•°ä¸­æ‰èƒ½ä½¿ç”¨yieldï¼Œç›¸å½“äºgeneratorå‡½æ•°æ‰§è¡Œçš„ä¸­é€”æš‚åœç‚¹ generatorå‡½æ•°æ˜¯ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œçš„ï¼Œæ¯ä¸€æ¬¡è°ƒç”¨å®ƒçš„nextæ–¹æ³•ï¼Œä¼šåœç•™åœ¨ä¸‹ä¸€ä¸ªyieldçš„ä½ç½® å®ä¾‹ï¼š 1234567891011121314151617181920const getData = () =&gt; new Promise(resolve =&gt; setTimeout(() =&gt; resolve(&quot;data&quot;), 1000));async function test() { const data = await getData(); console.log(&quot;data: &quot;, data); const data2 = await getData(); console.log(&quot;data2: &quot;, data2); return &quot;success&quot;;}test().then(res =&gt; console.log(res))// å°†ä¸Šé¢ç¤ºä¾‹è½¬åŒ–ä¸ºgeneratorå‡½æ•°function* testG() { // awaitè¢«ç¼–è¯‘æˆäº†yield const data = yield getData(); console.log(&quot;data: &quot;, data); const data2 = yield getData(); console.log(&quot;data2: &quot;, data2); return &quot;success&quot;;} æ‰‹å†™ async await1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859function generatorToAsync(generatorFn) { // è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„å‡½æ•° return function() { // å…ˆè°ƒç”¨generatorå‡½æ•° // å¯¹åº” var gen = testG() const gen = generatorFn.apply(this, arguments); // è¿”å›ä¸€ä¸ªPromise, å› ä¸ºå¤–éƒ¨æ˜¯ç”¨.thençš„æ–¹å¼ æˆ–è€…awaitçš„æ–¹å¼å»ä½¿ç”¨è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ return new Promise((resolve, reject) =&gt; { // å†…éƒ¨å®šä¹‰ä¸€ä¸ªstepå‡½æ•° ç”¨æ¥ä¸€æ­¥æ­¥next function step(key, arg) { let res; // è¿™ä¸ªæ–¹æ³•éœ€è¦åŒ…è£¹åœ¨try catchä¸­ // å¦‚æœæŠ¥é”™äº† å°±æŠŠpromiseç»™rejectæ‰ å¤–éƒ¨é€šè¿‡.catchå¯ä»¥è·å–åˆ°é”™è¯¯ try { res = gen[key](arg); // è¿™é‡Œæœ‰å¯èƒ½ä¼šæ‰§è¡Œè¿”å›rejectçŠ¶æ€çš„Promise } catch (error) { return reject(error); // æŠ¥é”™çš„è¯ä¼šèµ°catchï¼Œç›´æ¥reject } // gen.next() å¾—åˆ°çš„ç»“æœæ˜¯ä¸€ä¸ª { value, done } çš„ç»“æ„ const { value, done } = res; if (done) { // å¦‚æœdoneä¸ºtrueï¼Œè¯´æ˜èµ°å®Œäº†ï¼Œè¿›è¡Œresolve(value) return resolve(value); } else { // å¦‚æœdoneä¸ºfalseï¼Œè¯´æ˜æ²¡èµ°å®Œï¼Œè¿˜å¾—ç»§ç»­èµ° // valueæœ‰å¯èƒ½æ˜¯ï¼šå¸¸é‡\\Promiseï¼› // Promiseæœ‰å¯èƒ½æ˜¯æˆåŠŸæˆ–è€…å¤±è´¥ return Promise.resolve(value).then( val =&gt; step(&quot;next&quot;, val), err =&gt; step(&quot;throw&quot;, err) ); } } step(&quot;next&quot;); // ç¬¬ä¸€æ¬¡æ‰§è¡Œ }); };}// æµ‹è¯•generatorToAsync// 1ç§’åæ‰“å°data1 å†è¿‡ä¸€ç§’æ‰“å°data2 æœ€åæ‰“å°successconst getData = () =&gt; new Promise(resolve =&gt; setTimeout(() =&gt; resolve(&quot;data&quot;), 1000));var test = generatorToAsync(function* testG() { // awaitè¢«ç¼–è¯‘æˆäº†yield const data = yield getData(); console.log(&quot;data1: &quot;, data); const data2 = yield getData(); console.log(&quot;data2: &quot;, data2); return &quot;success&quot;;});test().then(res =&gt; console.log(res)); å‚è€ƒ ã€Œå†æ—¶8ä¸ªæœˆã€10ä¸‡å­—å‰ç«¯çŸ¥è¯†ä½“ç³»æ€»ç»“ï¼ˆåŸºç¡€çŸ¥è¯†ç¯‡ï¼‰ğŸ”¥","link":"/2022/04/19/JavaScript/javeScript-promise/"},{"title":"Cookie session localStorage sessionStorageçš„åŒºåˆ«","text":"Cookie session localStorage sessionStorageçš„åŒºåˆ« ä¸€ã€cookie Cookieæ˜¯æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„ä¸€å°å—æ•°æ®ã€‚ å®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘é€httpè¯·æ±‚æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šåœ¨å“åº”å¤´é‡Œé¢æ·»åŠ ä¸€ä¸ª Set-Cookie é€‰é¡¹ï¼Œæµè§ˆå™¨æ”¶åˆ°å“åº”åé€šå¸¸ä¼šä¿å­˜ä¸‹ Cookieã€‚æµè§ˆå™¨å¾—åˆ°Cookieä¹‹åï¼Œæ¯æ¬¡è¯·æ±‚éƒ½è¦å¸¦ä¸ŠCookie Cookieä¼šè¢«ç”¨æˆ·ç¯¡æ”¹ ä¸´æ—¶Cookieï¼ˆä¼šè¯Cookieï¼‰ æ°¸ä¹…Cookie ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œåˆ™è¡¨ç¤ºè¿™ä¸ªcookieç”Ÿå‘½å‘¨æœŸä¸ºæµè§ˆå™¨ä¼šè¯æœŸé—´ï¼Œåªè¦å…³é—­æµè§ˆå™¨çª—å£ï¼Œcookieå°±æ¶ˆå¤±äº†ã€‚è¿™ç§ç”Ÿå‘½æœŸä¸ºæµè§ˆä¼šè¯æœŸçš„cookieè¢«ç§°ä¸ºä¼šè¯cookieã€‚ä¼šè¯cookieä¸€èˆ¬ä¸ä¿å­˜åœ¨ç¡¬ç›˜ä¸Šè€Œæ˜¯ä¿å­˜åœ¨å†…å­˜é‡Œã€‚ è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œæµè§ˆå™¨å°±ä¼šæŠŠcookieä¿å­˜åˆ°ç¡¬ç›˜ä¸Šï¼Œå…³é—­åå†æ¬¡æ‰“å¼€æµè§ˆå™¨ï¼Œè¿™äº›cookieä¾ç„¶æœ‰æ•ˆç›´åˆ°è¶…è¿‡è®¾å®šçš„è¿‡æœŸæ—¶é—´ã€‚ äºŒã€session æœåŠ¡å™¨é€šè¿‡cookieç»™ç”¨æˆ·ä¸€ä¸ªsessionIDï¼ŒsessionIDå¯¹åº”æœåŠ¡å™¨ä¸­çš„ä¸€å°å—å†…å­˜ã€‚ æ¯æ¬¡ç”¨æˆ·è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨é€šè¿‡sessionID è¯»å–å¯¹åº”çš„sessionï¼Œç„¶åè·å–ç”¨æˆ·çš„éšç§ä¿¡æ¯ã€‚ ä¸‰ã€localStorage html5æä¾›çš„ä¸€ä¸ªAPI æ°¸ä¹…æœ‰æ•ˆï¼Œé™¤éç”¨æˆ·ä¸»åŠ¨æ¸…é™¤ç¼“å­˜ è®¾ç½®ç¼“å­˜ï¼šlocalStorage.setItem(â€˜keyâ€™, â€˜valueâ€™); è·å–ç¼“å­˜ï¼šlocalStorage.getItem(â€˜keyâ€™); æ¸…é™¤ç¼“å­˜ï¼šlocalStorage.removeItem(â€˜keyâ€™); åˆ é™¤æ‰€æœ‰ä¿å­˜çš„æ•°æ®ï¼šlocalStorage.clear(); åªèƒ½å­˜å…¥å­—ç¬¦ä¸²ï¼Œæ— æ³•ç›´æ¥å­˜å¯¹è±¡ å››ã€sessionStorage sessionStorageç”¨æˆ·å…³é—­é¡µé¢å°±å¤±æ•ˆ è¯•é¢˜1: Cookie å’Œ Session çš„åŒºåˆ« Cookieåˆ™æ˜¯æœåŠ¡å™¨é€šè¿‡set-cookieå¤´ç»™å®¢æˆ·ç«¯å‘é€çš„ä¸€æ®µå­—ç¬¦ä¸²ï¼Œå®¢æˆ·ç«¯æ¯æ¬¡è®¿é—®åŒä¸ªåŸŸåéƒ½ä¼šå¸¦ä¸Šè¿™ä¸²å­—ç¬¦ä¸² Sessionæ˜¯åŸºäºCookieå®ç°çš„ï¼Œé€šè¿‡Cookieå‘å®¢æˆ·ç«¯å‘é€SessionIDï¼ŒCookieè¿›è¡Œå­˜å‚¨ã€‚ cookieæ˜¯æµè§ˆå™¨ä¸Šçš„hashè¡¨ï¼Œsessionæ˜¯æœåŠ¡å™¨ä¸Šçš„hashè¡¨ã€‚ cookieèƒ½è¢«ç¯¡æ”¹ï¼Œsessionæ›´å®‰å…¨ã€‚ è¯•é¢˜2: Cookie å’Œ LocalStorage SessionStorage çš„åŒºåˆ« å­˜å‚¨å¤§å°ï¼šcookieæ•°æ®å¤§å°ä¸èƒ½è¶…è¿‡4kï¼›sessionStorageå’ŒlocalStorageçš„å­˜å‚¨æ¯”cookieå¤§å¾—å¤šï¼Œå¯ä»¥è¾¾åˆ°5M+ æœ‰æ•ˆæ—¶é—´ï¼šcookieè®¾ç½®çš„è¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆï¼›localStorageæ°¸ä¹…å­˜å‚¨ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±é™¤éä¸»åŠ¨åˆ é™¤æ•°æ®ï¼›sessionStorageæ•°æ®åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­åè‡ªåŠ¨åˆ é™¤ æ•°æ®ä¸æœåŠ¡å™¨äº¤äº’æ–¹å¼ï¼šcookieçš„æ•°æ®ä¼šè‡ªåŠ¨çš„ä¼ é€’åˆ°æœåŠ¡å™¨ï¼›sessionStorageå’ŒlocalStorageæ•°æ®ä¿å­˜åœ¨æœ¬åœ°","link":"/2022/03/12/NetWork/cookie-storage/"},{"title":"äº†è§£ HTTP HTTPS åŠ æµè§ˆå™¨ç¼“å­˜","text":"äº†è§£ HTTP HTTPS åŠ æµè§ˆå™¨ç¼“å­˜ HTTP1.0/HTTP1.1/HTTP2.0HTTP1.0 æµè§ˆå™¨ä¸æœåŠ¡å™¨åªä¿æŒçŸ­æš‚çš„è¿æ¥ï¼Œæµè§ˆå™¨çš„æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ HTTP1.1 å¼•å…¥äº†æŒä¹…è¿æ¥ï¼Œå³TCPè¿æ¥é»˜è®¤ä¸å…³é—­ï¼Œå¯ä»¥è¢«å¤šä¸ªè¯·æ±‚å¤ç”¨ åœ¨åŒä¸€ä¸ªTCPè¿æ¥é‡Œé¢ï¼Œå®¢æˆ·ç«¯å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ è™½ç„¶å…è®¸å¤ç”¨TCPè¿æ¥ï¼Œä½†æ˜¯åŒä¸€ä¸ªTCPè¿æ¥é‡Œé¢ï¼Œæ‰€æœ‰çš„æ•°æ®é€šä¿¡æ˜¯æŒ‰æ¬¡åºè¿›è¡Œçš„ï¼ŒæœåŠ¡å™¨åªæœ‰å¤„ç†å®Œä¸€ä¸ªè¯·æ±‚ï¼Œæ‰ä¼šæ¥ç€å¤„ç†ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚å¦‚æœå‰é¢çš„å¤„ç†ç‰¹åˆ«æ…¢ï¼Œåé¢å°±ä¼šæœ‰è®¸å¤šè¯·æ±‚æ’é˜Ÿç­‰ç€ æ–°å¢äº†ä¸€äº›è¯·æ±‚æ–¹æ³• æ–°å¢äº†ä¸€äº›è¯·æ±‚å¤´å’Œå“åº”å¤´HTTP2.0 é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼è€Œéæ–‡æœ¬æ ¼å¼ å®Œå…¨å¤šè·¯å¤ç”¨ï¼Œè€Œéæœ‰åºå¹¶é˜»å¡çš„ã€åªéœ€ä¸€ä¸ªè¿æ¥å³å¯å®ç°å¹¶è¡Œ ä½¿ç”¨æŠ¥å¤´å‹ç¼©ï¼Œé™ä½å¼€é”€ æœåŠ¡å™¨æ¨é€ Â» HTTPå’ŒHTTPS http: æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯è¯·æ±‚å’Œåº”ç­”çš„æ ‡å‡†ï¼ˆTCPï¼‰ï¼Œç”¨äºä» WWW æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„è¶…æ–‡æœ¬ä¼ è¾“åè®®ã€‚ https:æ˜¯ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„ HTTP é€šé“ï¼Œå³ HTTP ä¸‹ åŠ å…¥ SSL å±‚è¿›è¡ŒåŠ å¯†ã€‚å…¶ä½œç”¨æ˜¯ï¼šå»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ç¡®ä¿æ•°æ®çš„ä¼ è¾“ï¼Œç¡®ä¿ç½‘ç«™çš„çœŸå®æ€§ã€‚ HTTP å’Œ HTTPS çš„åŒºåˆ« http æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼ŒHTTPS åè®®è¦æ¯” http åè®®å®‰å…¨ï¼Œhttps æ˜¯å…·æœ‰å®‰å…¨æ€§çš„ ssl åŠ å¯†ä¼ è¾“åè®®ï¼Œå¯é˜²æ­¢æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­è¢«çªƒå–ã€æ”¹å˜ï¼Œç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§(å½“ç„¶è¿™ç§å®‰å…¨æ€§å¹¶éç»å¯¹çš„ï¼Œå¯¹äºæ›´æ·±å…¥çš„ Web å®‰å…¨é—®é¢˜ï¼Œæ­¤å¤„æš‚ä¸”ä¸è¡¨)ã€‚ http åè®®çš„é»˜è®¤ç«¯å£ä¸º 80ï¼Œhttps çš„é»˜è®¤ç«¯å£ä¸º 443ã€‚ http çš„è¿æ¥å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ã€‚https æ¡æ‰‹é˜¶æ®µæ¯”è¾ƒè´¹æ—¶ï¼Œä¼šä½¿é¡µé¢åŠ è½½æ—¶é—´å»¶é•¿ 50%ï¼Œå¢åŠ  10%~20%çš„è€—ç”µã€‚ https ç¼“å­˜ä¸å¦‚ http é«˜æ•ˆï¼Œä¼šå¢åŠ æ•°æ®å¼€é”€ã€‚ Https åè®®éœ€è¦ ca è¯ä¹¦ï¼Œè´¹ç”¨è¾ƒé«˜ï¼ŒåŠŸèƒ½è¶Šå¼ºå¤§çš„è¯ä¹¦è´¹ç”¨è¶Šé«˜ã€‚ SSL è¯ä¹¦éœ€è¦ç»‘å®š IPï¼Œä¸èƒ½å†åŒä¸€ä¸ª IP ä¸Šç»‘å®šå¤šä¸ªåŸŸåï¼ŒIPV4 èµ„æºæ”¯æŒä¸äº†è¿™ç§æ¶ˆè€—ã€‚ Â» TCPä¸‰æ¬¡æ¡æ‰‹ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå»ºç«‹è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€synåŒ…ï¼ˆsyn=jï¼‰åˆ°æœåŠ¡å™¨ï¼Œå¹¶è¿›å…¥SYN_SENTçŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç¡®è®¤ï¼›SYNï¼šåŒæ­¥åºåˆ—ç¼–å·ï¼ˆSynchronize Sequence Numbersï¼‰ã€‚ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡å™¨æ”¶åˆ°synåŒ…å¹¶ç¡®è®¤å®¢æˆ·çš„SYNï¼ˆack=j+1ï¼‰ï¼ŒåŒæ—¶ä¹Ÿå‘é€ä¸€ä¸ªè‡ªå·±çš„SYNåŒ…ï¼ˆsyn=kï¼‰ï¼Œå³SYN+ACKåŒ…ï¼Œæ­¤æ—¶æœåŠ¡å™¨è¿›å…¥SYN_RECVçŠ¶æ€ï¼› ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„SYN+ACKåŒ…ï¼Œå‘æœåŠ¡å™¨å‘é€ç¡®è®¤åŒ…ACK(ack=k+1ï¼‰ï¼Œæ­¤åŒ…å‘é€å®Œæ¯•ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›å…¥ESTABLISHEDï¼ˆTCPè¿æ¥æˆåŠŸï¼‰çŠ¶æ€ï¼Œå®Œæˆä¸‰æ¬¡æ¡æ‰‹ã€‚ æ¡æ‰‹è¿‡ç¨‹ä¸­ä¼ é€çš„åŒ…é‡Œä¸åŒ…å«æ•°æ®ï¼Œä¸‰æ¬¡æ¡æ‰‹å®Œæ¯•åï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨æ‰æ­£å¼å¼€å§‹ä¼ é€æ•°æ®ã€‚ Â» TCPå››æ¬¡æŒ¥æ‰‹ å®¢æˆ·ç«¯è¿›ç¨‹å‘å‡ºè¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼Œå¹¶ä¸”åœæ­¢å‘é€æ•°æ®ã€‚é‡Šæ”¾æ•°æ®æŠ¥æ–‡é¦–éƒ¨ï¼ŒFIN=1ï¼Œå…¶åºåˆ—å·ä¸ºseq=uï¼ˆç­‰äºå‰é¢å·²ç»ä¼ é€è¿‡æ¥çš„æ•°æ®çš„æœ€åä¸€ä¸ªå­—èŠ‚çš„åºå·åŠ 1ï¼‰ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯è¿›å…¥FIN-WAIT-1ï¼ˆç»ˆæ­¢ç­‰å¾…1ï¼‰çŠ¶æ€ã€‚ TCPè§„å®šï¼ŒFINæŠ¥æ–‡æ®µå³ä½¿ä¸æºå¸¦æ•°æ®ï¼Œä¹Ÿè¦æ¶ˆè€—ä¸€ä¸ªåºå·ã€‚ æœåŠ¡å™¨æ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼Œå‘å‡ºç¡®è®¤æŠ¥æ–‡ï¼ŒACK=1ï¼Œack=u+1ï¼Œå¹¶ä¸”å¸¦ä¸Šè‡ªå·±çš„åºåˆ—å·seq=vï¼Œæ­¤æ—¶ï¼ŒæœåŠ¡ç«¯å°±è¿›å…¥äº†CLOSE-WAITï¼ˆå…³é—­ç­‰å¾…ï¼‰çŠ¶æ€ã€‚TCPæœåŠ¡å™¨é€šçŸ¥é«˜å±‚çš„åº”ç”¨è¿›ç¨‹ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡å™¨çš„æ–¹å‘å°±é‡Šæ”¾äº†ï¼Œè¿™æ—¶å€™å¤„äºåŠå…³é—­çŠ¶æ€ï¼Œå³å®¢æˆ·ç«¯å·²ç»æ²¡æœ‰æ•°æ®è¦å‘é€äº†ï¼Œä½†æ˜¯æœåŠ¡å™¨è‹¥å‘é€æ•°æ®ï¼Œå®¢æˆ·ç«¯ä¾ç„¶è¦æ¥å—ã€‚è¿™ä¸ªçŠ¶æ€è¿˜è¦æŒç»­ä¸€æ®µæ—¶é—´ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªCLOSE-WAITçŠ¶æ€æŒç»­çš„æ—¶é—´ã€‚ å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ç¡®è®¤è¯·æ±‚åï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å°±è¿›å…¥FIN-WAIT-2ï¼ˆç»ˆæ­¢ç­‰å¾…2ï¼‰çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨å‘é€è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼ˆåœ¨è¿™ä¹‹å‰è¿˜éœ€è¦æ¥å—æœåŠ¡å™¨å‘é€çš„æœ€ åçš„æ•°æ®ï¼‰ã€‚ æœåŠ¡å™¨å°†æœ€åçš„æ•°æ®å‘é€å®Œæ¯•åï¼Œå°±å‘å®¢æˆ·ç«¯å‘é€è¿æ¥é‡Šæ”¾æŠ¥æ–‡ï¼ŒFIN=1ï¼Œack=u+1ï¼Œç”±äºåœ¨åŠå…³é—­çŠ¶æ€ï¼ŒæœåŠ¡å™¨å¾ˆå¯èƒ½åˆå‘é€äº†ä¸€äº›æ•°æ®ï¼Œå‡å®šæ­¤æ—¶çš„åºåˆ—å·ä¸ºseq=wï¼Œæ­¤æ—¶ï¼ŒæœåŠ¡å™¨å°±è¿›å…¥äº†LAST-ACKï¼ˆæœ€åç¡®è®¤ï¼‰çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„ç¡®è®¤ã€‚ å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„è¿æ¥é‡Šæ”¾æŠ¥æ–‡åï¼Œå¿…é¡»å‘å‡ºç¡®è®¤ï¼ŒACK=1ï¼Œack=w+1ï¼Œè€Œè‡ªå·±çš„åºåˆ—å·æ˜¯seq=u+1ï¼Œæ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å°±è¿›å…¥äº†TIME-WAITï¼ˆæ—¶é—´ç­‰å¾…ï¼‰çŠ¶æ€ã€‚æ³¨æ„æ­¤æ—¶TCPè¿æ¥è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå¿…é¡»ç»è¿‡2âˆ—âˆ—MSLï¼ˆæœ€é•¿æŠ¥æ–‡æ®µå¯¿å‘½ï¼‰çš„æ—¶é—´åï¼Œå½“å®¢æˆ·ç«¯æ’¤é”€ç›¸åº”çš„TCBåï¼Œæ‰è¿›å…¥CLOSEDçŠ¶æ€ã€‚ æœåŠ¡å™¨åªè¦æ”¶åˆ°äº†å®¢æˆ·ç«¯å‘å‡ºçš„ç¡®è®¤ï¼Œç«‹å³è¿›å…¥CLOSEDçŠ¶æ€ã€‚åŒæ ·ï¼Œæ’¤é”€TCBåï¼Œå°±ç»“æŸäº†è¿™æ¬¡çš„TCPè¿æ¥ã€‚å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡å™¨ç»“æŸTCPè¿æ¥çš„æ—¶é—´è¦æ¯”å®¢æˆ·ç«¯æ—©ä¸€äº›ã€‚ Â» ä»è¾“å…¥URLåˆ°é¡µé¢åŠ è½½çš„å…¨è¿‡ç¨‹ URLè§£æï¼ŒæŸ¥æ‰¾ç¼“å­˜ æµè§ˆå™¨é¦–å…ˆå¯¹ URL è§£æï¼Œè§£æå‡ºåè®®ã€åŸŸåã€ç«¯å£ã€èµ„æºè·¯å¾„ã€å‚æ•° æµè§ˆå™¨ä¸ºäº†æå‡æ€§èƒ½ï¼Œåœ¨ URL è§£æä¹‹åï¼Œå®é™…ä¼šå…ˆæŸ¥è¯¢æ˜¯å¦æœ‰ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜å‘½ä¸­ï¼Œåˆ™ç›´æ¥è¿”å›ç¼“å­˜èµ„æº æµè§ˆå™¨ç¼“å­˜(å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜) ç³»ç»Ÿç¼“å­˜ è·¯ç”±ç¼“å­˜ DNSåŸŸåè§£æ æµè§ˆå™¨å‘DNSæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œæ ¹æ®åŸŸåè§£æipåœ°å€ï¼ŒDNSæœåŠ¡å™¨åŸºäºUDPï¼Œå› æ­¤ä¼šç”¨åˆ° UDPåè®® å»ºç«‹TCPè¿æ¥ ä¸‰æ¬¡æ¡æ‰‹ å‘èµ·HTTPè¯·æ±‚ æœåŠ¡å™¨å“åº”å¹¶è¿”å›ç»“æœ æœåŠ¡å™¨å‘é€ç›¸åº”çš„htmlåŠå…¶ä»–æ–‡ä»¶ç»™æµè§ˆå™¨ å…³é—­TCPè¿æ¥ å››æ¬¡æŒ¥æ‰‹ æµè§ˆå™¨æ¸²æŸ“ è§£æhtmlæ–‡ä»¶å†…å®¹å¹¶æ¸²æŸ“ æ„å»ºDOMæ ‘ æ„å»ºCSSè§„åˆ™æ ‘ ç”Ÿæˆrenderæ ‘ å¸ƒå±€ ç»˜åˆ¶ jså¼•æ“è§£æ è°ƒç”¨JSå¼•æ“æ‰§è¡ŒJSä»£ç ï¼ˆJSçš„è§£é‡Šé˜¶æ®µï¼Œé¢„å¤„ç†é˜¶æ®µï¼Œæ‰§è¡Œé˜¶æ®µç”Ÿæˆæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŒVOï¼Œä½œç”¨åŸŸé“¾ã€å›æ”¶æœºåˆ¶ç­‰ç­‰ï¼‰ å¦‚æœé‡åˆ° script æ ‡ç­¾ï¼Œåˆ™åˆ¤æ–­æ˜¯å¦å«æœ‰ defer æˆ–è€… async å±æ€§ï¼Œå¦‚æœæœ‰ï¼Œå¼‚æ­¥å»ä¸‹è½½è¯¥èµ„æºï¼›å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œæš‚åœdomçš„è§£æï¼Œå»åŠ è½½scriptçš„èµ„æºï¼Œç„¶åæ‰§è¡Œè¯¥jsä»£ç ï¼ˆscriptæ ‡ç­¾åŠ è½½å’Œæ‰§è¡Œä¼šé˜»å¡é¡µé¢çš„æ¸²æŸ“ï¼‰ HTTPçŠ¶æ€ç 1xxä»£è¡¨è¯·æ±‚å·²è¢«æ¥å—ï¼Œéœ€è¦ç»§ç»­å¤„ç†ã€‚è¿™ç±»å“åº”æ˜¯ä¸´æ—¶å“åº”ï¼ŒåªåŒ…å«çŠ¶æ€è¡Œå’ŒæŸäº›å¯é€‰çš„å“åº”å¤´ä¿¡æ¯ï¼Œå¹¶ä»¥ç©ºè¡Œç»“æŸï¼Œå¸¸è§å¦‚ä¸‹ï¼š 100ï¼ˆå®¢æˆ·ç«¯ç»§ç»­å‘é€è¯·æ±‚ï¼Œè¿™æ˜¯ä¸´æ—¶å“åº”ï¼‰ï¼šè¿™ä¸ªä¸´æ—¶å“åº”æ˜¯ç”¨æ¥é€šçŸ¥å®¢æˆ·ç«¯å®ƒçš„éƒ¨åˆ†è¯·æ±‚å·²ç»è¢«æœåŠ¡å™¨æ¥æ”¶ï¼Œä¸”ä»æœªè¢«æ‹’ç»ã€‚å®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘é€è¯·æ±‚çš„å‰©ä½™éƒ¨åˆ†ï¼Œæˆ–è€…å¦‚æœè¯·æ±‚å·²ç»å®Œæˆï¼Œå¿½ç•¥è¿™ä¸ªå“åº”ã€‚æœåŠ¡å™¨å¿…é¡»åœ¨è¯·æ±‚å®Œæˆåå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæœ€ç»ˆå“åº” 101ï¼šæœåŠ¡å™¨æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚åˆ‡æ¢åè®®ï¼Œä¸»è¦ç”¨äºwebsocketæˆ–http2å‡çº§2xxä»£è¡¨è¯·æ±‚å·²æˆåŠŸè¢«æœåŠ¡å™¨æ¥æ”¶ã€ç†è§£ã€å¹¶æ¥å—ï¼Œå¸¸è§å¦‚ä¸‹ï¼š 200ï¼ˆæˆåŠŸï¼‰ï¼šè¯·æ±‚å·²æˆåŠŸï¼Œè¯·æ±‚æ‰€å¸Œæœ›çš„å“åº”å¤´æˆ–æ•°æ®ä½“å°†éšæ­¤å“åº”è¿”å› 201ï¼ˆå·²åˆ›å»ºï¼‰ï¼šè¯·æ±‚æˆåŠŸå¹¶ä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æº 202ï¼ˆå·²åˆ›å»ºï¼‰ï¼šæœåŠ¡å™¨å·²ç»æ¥æ”¶è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç† 203ï¼ˆéæˆæƒä¿¡æ¯ï¼‰ï¼šæœåŠ¡å™¨å·²æˆåŠŸå¤„ç†è¯·æ±‚ï¼Œä½†è¿”å›çš„ä¿¡æ¯å¯èƒ½æ¥è‡ªå¦ä¸€æ¥æº 204ï¼ˆæ— å†…å®¹ï¼‰ï¼šæœåŠ¡å™¨æˆåŠŸå¤„ç†è¯·æ±‚ï¼Œä½†æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ 205ï¼ˆé‡ç½®å†…å®¹ï¼‰ï¼šæœåŠ¡å™¨æˆåŠŸå¤„ç†è¯·æ±‚ï¼Œä½†æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ 206ï¼ˆéƒ¨åˆ†å†…å®¹ï¼‰ï¼šæœåŠ¡å™¨æˆåŠŸå¤„ç†äº†éƒ¨åˆ†è¯·æ±‚3xxè¡¨ç¤ºè¦å®Œæˆè¯·æ±‚ï¼Œéœ€è¦è¿›ä¸€æ­¥æ“ä½œã€‚ é€šå¸¸ï¼Œè¿™äº›çŠ¶æ€ä»£ç ç”¨æ¥é‡å®šå‘ï¼Œå¸¸è§å¦‚ä¸‹ï¼š 300ï¼ˆå¤šç§é€‰æ‹©ï¼‰ï¼šé’ˆå¯¹è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¯æ‰§è¡Œå¤šç§æ“ä½œã€‚ æœåŠ¡å™¨å¯æ ¹æ®è¯·æ±‚è€… (user agent) é€‰æ‹©ä¸€é¡¹æ“ä½œï¼Œæˆ–æä¾›æ“ä½œåˆ—è¡¨ä¾›è¯·æ±‚è€…é€‰æ‹© 301ï¼ˆæ°¸ä¹…ç§»åŠ¨ï¼‰ï¼šè¯·æ±‚çš„ç½‘é¡µå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ã€‚ æœåŠ¡å™¨è¿”å›æ­¤å“åº”ï¼ˆå¯¹ GET æˆ– HEAD è¯·æ±‚çš„å“åº”ï¼‰æ—¶ï¼Œä¼šè‡ªåŠ¨å°†è¯·æ±‚è€…è½¬åˆ°æ–°ä½ç½® 302ï¼ˆä¸´æ—¶ç§»åŠ¨ï¼‰ï¼š æœåŠ¡å™¨ç›®å‰ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åçš„è¯·æ±‚ 303ï¼ˆæŸ¥çœ‹å…¶ä»–ä½ç½®ï¼‰ï¼šè¯·æ±‚è€…åº”å½“å¯¹ä¸åŒçš„ä½ç½®ä½¿ç”¨å•ç‹¬çš„ GET è¯·æ±‚æ¥æ£€ç´¢å“åº”æ—¶ï¼ŒæœåŠ¡å™¨è¿”å›æ­¤ä»£ç  305 ï¼ˆä½¿ç”¨ä»£ç†ï¼‰ï¼š è¯·æ±‚è€…åªèƒ½ä½¿ç”¨ä»£ç†è®¿é—®è¯·æ±‚çš„ç½‘é¡µã€‚ å¦‚æœæœåŠ¡å™¨è¿”å›æ­¤å“åº”ï¼Œè¿˜è¡¨ç¤ºè¯·æ±‚è€…åº”ä½¿ç”¨ä»£ç† 307 ï¼ˆä¸´æ—¶é‡å®šå‘ï¼‰ï¼š æœåŠ¡å™¨ç›®å‰ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥è¿›è¡Œä»¥åçš„è¯·æ±‚4xxä»£è¡¨äº†å®¢æˆ·ç«¯çœ‹èµ·æ¥å¯èƒ½å‘ç”Ÿäº†é”™è¯¯ï¼Œå¦¨ç¢äº†æœåŠ¡å™¨çš„å¤„ç†ï¼Œå¸¸è§å¦‚ä¸‹ï¼š 400ï¼ˆé”™è¯¯è¯·æ±‚ï¼‰ï¼š æœåŠ¡å™¨ä¸ç†è§£è¯·æ±‚çš„è¯­æ³• 401ï¼ˆæœªæˆæƒï¼‰ï¼š è¯·æ±‚è¦æ±‚èº«ä»½éªŒè¯ã€‚ å¯¹äºéœ€è¦ç™»å½•çš„ç½‘é¡µï¼ŒæœåŠ¡å™¨å¯èƒ½è¿”å›æ­¤å“åº”ã€‚ 403ï¼ˆç¦æ­¢ï¼‰ï¼š æœåŠ¡å™¨æ‹’ç»è¯·æ±‚ 404ï¼ˆæœªæ‰¾åˆ°ï¼‰ï¼š æœåŠ¡å™¨æ‰¾ä¸åˆ°è¯·æ±‚çš„ç½‘é¡µ 405ï¼ˆæ–¹æ³•ç¦ç”¨ï¼‰ï¼š ç¦ç”¨è¯·æ±‚ä¸­æŒ‡å®šçš„æ–¹æ³• 406ï¼ˆä¸æ¥å—ï¼‰ï¼š æ— æ³•ä½¿ç”¨è¯·æ±‚çš„å†…å®¹ç‰¹æ€§å“åº”è¯·æ±‚çš„ç½‘é¡µ 407ï¼ˆéœ€è¦ä»£ç†æˆæƒï¼‰ï¼š æ­¤çŠ¶æ€ä»£ç ä¸ 401ï¼ˆæœªæˆæƒï¼‰ç±»ä¼¼ï¼Œä½†æŒ‡å®šè¯·æ±‚è€…åº”å½“æˆæƒä½¿ç”¨ä»£ç† 408ï¼ˆè¯·æ±‚è¶…æ—¶ï¼‰ï¼š æœåŠ¡å™¨ç­‰å€™è¯·æ±‚æ—¶å‘ç”Ÿè¶…æ—¶5xx è¡¨ç¤ºæœåŠ¡å™¨æ— æ³•å®Œæˆæ˜æ˜¾æœ‰æ•ˆçš„è¯·æ±‚ã€‚è¿™ç±»çŠ¶æ€ç ä»£è¡¨äº†æœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­æœ‰é”™è¯¯æˆ–è€…å¼‚å¸¸çŠ¶æ€å‘ç”Ÿï¼Œå¸¸è§å¦‚ä¸‹ï¼š 500ï¼ˆæœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼‰ï¼šæœåŠ¡å™¨é‡åˆ°é”™è¯¯ï¼Œæ— æ³•å®Œæˆè¯·æ±‚ 501ï¼ˆå°šæœªå®æ–½ï¼‰ï¼šæœåŠ¡å™¨ä¸å…·å¤‡å®Œæˆè¯·æ±‚çš„åŠŸèƒ½ã€‚ ä¾‹å¦‚ï¼ŒæœåŠ¡å™¨æ— æ³•è¯†åˆ«è¯·æ±‚æ–¹æ³•æ—¶å¯èƒ½ä¼šè¿”å›æ­¤ä»£ç  502ï¼ˆé”™è¯¯ç½‘å…³ï¼‰ï¼š æœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–ä»£ç†ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°æ— æ•ˆå“åº” 503ï¼ˆæœåŠ¡ä¸å¯ç”¨ï¼‰ï¼š æœåŠ¡å™¨ç›®å‰æ— æ³•ä½¿ç”¨ï¼ˆç”±äºè¶…è½½æˆ–åœæœºç»´æŠ¤ï¼‰ 504ï¼ˆç½‘å…³è¶…æ—¶ï¼‰ï¼š æœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–ä»£ç†ï¼Œä½†æ˜¯æ²¡æœ‰åŠæ—¶ä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ 505ï¼ˆHTTP ç‰ˆæœ¬ä¸å—æ”¯æŒï¼‰ï¼š æœåŠ¡å™¨ä¸æ”¯æŒè¯·æ±‚ä¸­æ‰€ç”¨çš„ HTTP åè®®ç‰ˆæœ¬å¸¸ç”¨åœºæ™¯ 100ï¼šå®¢æˆ·ç«¯åœ¨å‘é€POSTæ•°æ®ç»™æœåŠ¡å™¨å‰ï¼Œå¾è¯¢æœåŠ¡å™¨æƒ…å†µï¼Œçœ‹æœåŠ¡å™¨æ˜¯å¦å¤„ç†POSTçš„æ•°æ®ï¼Œå¦‚æœä¸å¤„ç†ï¼Œå®¢æˆ·ç«¯åˆ™ä¸ä¸Šä¼ POSTæ•°æ®ï¼Œå¦‚æœå¤„ç†ï¼Œåˆ™POSTä¸Šä¼ æ•°æ®ã€‚å¸¸ç”¨äºPOSTå¤§æ•°æ®ä¼ è¾“ 101ï¼šæœåŠ¡å™¨æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚åˆ‡æ¢åè®®ï¼Œä¸»è¦ç”¨äºwebsocketæˆ–http2å‡çº§ 206ï¼šä¸€èˆ¬ç”¨æ¥åšæ–­ç‚¹ç»­ä¼ ï¼Œæˆ–è€…æ˜¯è§†é¢‘æ–‡ä»¶ç­‰å¤§æ–‡ä»¶çš„åŠ è½½ 301ï¼šæ°¸ä¹…é‡å®šå‘ä¼šç¼“å­˜ã€‚æ–°åŸŸåæ›¿æ¢æ—§åŸŸåï¼Œæ—§çš„åŸŸåä¸å†ä½¿ç”¨æ—¶ï¼Œç”¨æˆ·è®¿é—®æ—§åŸŸåæ—¶ç”¨301å°±é‡å®šå‘åˆ°æ–°çš„åŸŸå 302ï¼šä¸´æ—¶é‡å®šå‘ä¸ä¼šç¼“å­˜ï¼Œå¸¸ç”¨ äºæœªç™»é™†çš„ç”¨æˆ·è®¿é—®ç”¨æˆ·ä¸­å¿ƒé‡å®šå‘åˆ°ç™»å½•é¡µé¢ 304ï¼šåå•†ç¼“å­˜ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æœ‰ç¼“å­˜ï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œè¿”å›é¡µé¢çš„åªæœ‰å¤´éƒ¨ä¿¡æ¯ï¼Œæ˜¯æ²¡æœ‰å†…å®¹éƒ¨åˆ† 400ï¼šå‚æ•°æœ‰è¯¯ï¼Œè¯·æ±‚æ— æ³•è¢«æœåŠ¡å™¨è¯†åˆ« 401ï¼šæœªæˆæƒï¼Œè¯·æ±‚è¦æ±‚èº«ä»½éªŒè¯ã€‚å¯¹äºéœ€è¦ç™»å½•çš„ç½‘é¡µï¼ŒæœåŠ¡å™¨å¯èƒ½è¿”å›æ­¤å“åº” 403ï¼šå‘Šè¯‰å®¢æˆ·ç«¯è¿›åˆ¶è®¿é—®è¯¥ç«™ç‚¹æˆ–è€…èµ„æºï¼Œå¦‚åœ¨å¤–ç½‘ç¯å¢ƒä¸‹ï¼Œç„¶åè®¿é—®åªæœ‰å†…ç½‘IPæ‰èƒ½è®¿é—®çš„æ—¶å€™åˆ™è¿”å› 404ï¼šæœåŠ¡å™¨æ‰¾ä¸åˆ°èµ„æºæ—¶ï¼Œæˆ–è€…æœåŠ¡å™¨æ‹’ç»è¯·æ±‚åˆä¸æƒ³è¯´æ˜ç†ç”±æ—¶ 502ï¼šé”™è¯¯ç½‘å…³ï¼ŒæœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–ä»£ç†ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ”¶åˆ°æ— æ•ˆå“åº” 503ï¼šæœåŠ¡å™¨åœæœºç»´æŠ¤æ—¶ï¼Œä¸»åŠ¨ç”¨503å“åº”è¯·æ±‚æˆ– nginx è®¾ç½®é™é€Ÿï¼Œè¶…è¿‡é™é€Ÿï¼Œä¼šè¿”å›503 504ï¼šç½‘å…³è¶…æ—¶ å¼ºç¼“å­˜ &amp; åå•†ç¼“å­˜å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜æ˜¯æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ä¸­çš„ä¸¤ç§ç­–ç•¥ï¼Œç”¨äºæé«˜ç½‘é¡µåŠ è½½é€Ÿåº¦å’Œå‡å°‘æœåŠ¡å™¨è´Ÿæ‹…ã€‚å®ƒä»¬åœ¨æ§åˆ¶æµè§ˆå™¨æ˜¯å¦éœ€è¦é‡æ–°è¯·æ±‚èµ„æºæ—¶èµ·ç€ä¸åŒçš„ä½œç”¨ã€‚ æµè§ˆå™¨æ¯æ¬¡å‘èµ·è¯·æ±‚ï¼Œéƒ½ä¼šå…ˆåœ¨æµè§ˆå™¨ç¼“å­˜ä¸­æŸ¥æ‰¾è¯¥è¯·æ±‚çš„ç»“æœä»¥åŠç¼“å­˜æ ‡è¯† æµè§ˆå™¨æ¯æ¬¡æ‹¿åˆ°è¿”å›çš„è¯·æ±‚ç»“æœéƒ½ä¼šå°†è¯¥ç»“æœå’Œç¼“å­˜æ ‡è¯†å­˜å…¥æµè§ˆå™¨ç¼“å­˜ä¸­ä»¥ä¸Šä¸¤ç‚¹ç»“è®ºå°±æ˜¯æµè§ˆå™¨ç¼“å­˜æœºåˆ¶çš„å…³é”®ï¼Œä»–ç¡®ä¿äº†æ¯ä¸ªè¯·æ±‚çš„ç¼“å­˜å­˜å…¥ä¸è¯»å–ï¼Œåªè¦æˆ‘ä»¬å†ç†è§£æµè§ˆå™¨ç¼“å­˜çš„ä½¿ç”¨è§„åˆ™ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„é—®é¢˜å°±è¿åˆƒè€Œè§£äº†ã€‚ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œè¿™é‡Œæ ¹æ®æ˜¯å¦éœ€è¦å‘æœåŠ¡å™¨é‡æ–°å‘èµ·HTTPè¯·æ±‚å°†ç¼“å­˜è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯å¼ºåˆ¶ç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚ å¼ºç¼“å­˜ï¼š å¼ºç¼“å­˜æ˜¯é€šè¿‡è®¾ç½®å“åº”å¤´ä¸­çš„Cache-Controlå’ŒExpireså­—æ®µæ¥å®ç°çš„ã€‚å½“æµè§ˆå™¨è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œä¼šå…ˆæ£€æŸ¥è¯¥èµ„æºçš„ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœæ²¡æœ‰è¿‡æœŸï¼Œæµè§ˆå™¨ç›´æ¥ä½¿ç”¨ç¼“å­˜å‰¯æœ¬ï¼Œä¸ä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚å…¶cache-Controlä¼˜å…ˆçº§æ¯”Expiresé«˜ã€‚ å¸¸ç”¨çš„Cache-Controlå­—æ®µæœ‰ï¼š publicï¼šè¡¨ç¤ºå“åº”å¯ä»¥è¢«ä»»ä½•å¯¹è±¡ï¼ˆåŒ…æ‹¬ä»£ç†æœåŠ¡å™¨ï¼‰ç¼“å­˜ã€‚ privateï¼šè¡¨ç¤ºå“åº”åªèƒ½è¢«å•ä¸ªç”¨æˆ·ç¼“å­˜ï¼Œä¸å…è®¸ä»£ç†æœåŠ¡å™¨ç¼“å­˜ã€‚ max-age=&lt;seconds&gt;ï¼šè¡¨ç¤ºèµ„æºåœ¨å¤šå°‘ç§’å†…æœ‰æ•ˆã€‚ Expireså­—æ®µæ˜¯ä¸€ä¸ªè¿‡æ—¶çš„æ–¹å¼ï¼Œè¡¨ç¤ºèµ„æºè¿‡æœŸçš„æ—¶é—´ç‚¹ã€‚ å¼ºåˆ¶ç¼“å­˜çš„æƒ…å†µä¸»è¦æœ‰ä¸‰ç§(æš‚ä¸åˆ†æåå•†ç¼“å­˜è¿‡ç¨‹)ï¼Œå¦‚ä¸‹ï¼š ä¸å­˜åœ¨è¯¥ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œå¼ºåˆ¶ç¼“å­˜å¤±æ•ˆï¼Œåˆ™ç›´æ¥å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼ˆè·Ÿç¬¬ä¸€æ¬¡å‘èµ·è¯·æ±‚ä¸€è‡´ï¼‰ã€‚ å­˜åœ¨è¯¥ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œä½†è¯¥ç»“æœå·²å¤±æ•ˆï¼Œå¼ºåˆ¶ç¼“å­˜å¤±æ•ˆï¼Œåˆ™ä½¿ç”¨åå•†ç¼“å­˜ã€‚ å­˜åœ¨è¯¥ç¼“å­˜ç»“æœå’Œç¼“å­˜æ ‡è¯†ï¼Œä¸”è¯¥ç»“æœå°šæœªå¤±æ•ˆï¼Œå¼ºåˆ¶ç¼“å­˜ç”Ÿæ•ˆï¼Œç›´æ¥è¿”å›è¯¥ç»“æœåå•†ç¼“å­˜ï¼šåå•†ç¼“å­˜å°±æ˜¯å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆåï¼Œæµè§ˆå™¨æºå¸¦ç¼“å­˜æ ‡è¯†å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨æ ¹æ®ç¼“å­˜æ ‡è¯†å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜çš„è¿‡ç¨‹ï¼š å½“èµ„æºçš„ç¼“å­˜è¿‡æœŸæˆ–è€…æµè§ˆå™¨å¼ºåˆ¶åˆ·æ–°æ—¶ï¼Œæµè§ˆå™¨ä¼šå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¼šæ ¹æ®è¯·æ±‚å¤´ä¸­çš„If-Modified-Sinceï¼ˆLast-Modifiedï¼‰å’ŒIf-None-Matchï¼ˆETagï¼‰å­—æ®µæ¥åˆ¤æ–­èµ„æºæ˜¯å¦æœ‰æ›´æ–°ã€‚ å¦‚æœèµ„æºæ²¡æœ‰æ›´æ–°ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›304 Not ModifiedçŠ¶æ€ç ï¼Œå‘Šè¯‰æµè§ˆå™¨å¯ä»¥ç»§ç»­ä½¿ç”¨ç¼“å­˜çš„èµ„æºï¼ŒèŠ‚çœå¸¦å®½å’ŒåŠ å¿«åŠ è½½é€Ÿåº¦ï¼Œåå•†ç¼“å­˜ç”Ÿæ•ˆï¼Œè¿”å›304ã€‚ å¦‚æœèµ„æºæœ‰æ›´æ–°ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›æ–°çš„èµ„æºå†…å®¹ï¼Œæµè§ˆå™¨ä¼šä½¿ç”¨æ–°çš„èµ„æºå¹¶æ›´æ–°ç¼“å­˜ï¼Œåå•†ç¼“å­˜å¤±æ•ˆï¼Œè¿”å›200å’Œè¯·æ±‚ç»“æœã€‚æ€»çš„æ¥è¯´ï¼Œå¼ºç¼“å­˜é€šè¿‡è®¾ç½®å“åº”å¤´æ¥å‘Šè¯‰æµè§ˆå™¨èµ„æºçš„æœ‰æ•ˆæœŸï¼Œè€Œåå•†ç¼“å­˜åˆ™æ˜¯é€šè¿‡ä¸æœåŠ¡å™¨é€šä¿¡æ¥éªŒè¯èµ„æºæ˜¯å¦æœ‰æ›´æ–°ã€‚åˆç†åœ°ä½¿ç”¨å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜å¯ä»¥æœ‰æ•ˆæå‡ç½‘é¡µåŠ è½½é€Ÿåº¦ï¼Œå¹¶å‡å°‘å¯¹æœåŠ¡å™¨çš„è¯·æ±‚å‹åŠ›ã€‚ ä»‹ç»ä¸‹304è¿‡ç¨‹ æµè§ˆå™¨è¯·æ±‚èµ„æºæ—¶é¦–å…ˆå‘½ä¸­èµ„æºçš„Expires å’Œ Cache-Controlï¼ŒExpires å—é™äºæœ¬åœ°æ—¶é—´ï¼Œå¦‚æœä¿®æ”¹äº†æœ¬åœ°æ—¶é—´ï¼Œå¯èƒ½ä¼šé€ æˆç¼“å­˜å¤±æ•ˆï¼Œå¯ä»¥é€šè¿‡Cache-control: max-ageæŒ‡å®šæœ€å¤§ç”Ÿå‘½å‘¨æœŸï¼ŒçŠ¶æ€ä»ç„¶è¿”å›200ï¼Œä½†ä¸ä¼šè¯·æ±‚æ•°æ®ï¼Œåœ¨æµè§ˆå™¨ä¸­èƒ½æ˜æ˜¾çœ‹åˆ°from cacheå­—æ ·ã€‚ å¼ºç¼“å­˜å¤±æ•ˆï¼Œè¿›å…¥åå•†ç¼“å­˜é˜¶æ®µï¼Œé¦–å…ˆéªŒè¯ETagï¼ŒETagå¯ä»¥ä¿è¯æ¯ä¸€ä¸ªèµ„æºæ˜¯å”¯ä¸€çš„ï¼Œèµ„æºå˜åŒ–éƒ½ä¼šå¯¼è‡´ETagå˜åŒ–ã€‚æœåŠ¡å™¨æ ¹æ®å®¢æˆ·ç«¯ä¸Šé€çš„If-None-Matchå€¼æ¥åˆ¤æ–­æ˜¯å¦å‘½ä¸­ç¼“å­˜ã€‚ åå•†ç¼“å­˜Last-Modify/If-Modify-Sinceé˜¶æ®µï¼Œå®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚èµ„æºæ—¶ï¼ŒæœåŠ¡ç«¯è¿”å›çš„headerä¸­ä¼šåŠ ä¸ŠLast-Modifyï¼ŒLast-modifyæ˜¯ä¸€ä¸ªæ—¶é—´æ ‡è¯†è¯¥èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´ã€‚å†æ¬¡è¯·æ±‚è¯¥èµ„æºæ—¶ï¼Œrequestçš„è¯·æ±‚å¤´ä¸­ä¼šåŒ…å«If-Modify-Sinceï¼Œè¯¥å€¼ä¸ºç¼“å­˜ä¹‹å‰è¿”å›çš„Last-Modifyã€‚æœåŠ¡å™¨æ”¶åˆ°If-Modify-Sinceåï¼Œæ ¹æ®èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´åˆ¤æ–­æ˜¯å¦å‘½ä¸­ç¼“å­˜ã€‚ Â» å‚è€ƒ â˜ ğŸ”¥ è¿å…«è‚¡æ–‡éƒ½ä¸æ‡‚è¿˜æŒ‡æœ›åœ¨å‰ç«¯æ··ä¸‹å»ä¹ˆ è¯´è¯´ HTTP1.0/1.1/2.0 çš„åŒºåˆ«? è¯´è¯´TCPä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼Ÿ è¯´è¯´HTTP å¸¸è§çš„çŠ¶æ€ç æœ‰å“ªäº›ï¼Œé€‚ç”¨åœºæ™¯","link":"/2022/03/12/NetWork/http/"},{"title":"Vueé¡¹ç›®æ€§èƒ½ä¼˜åŒ–","text":"Vueé¡¹ç›®æ€§èƒ½ä¼˜åŒ– ä»£ç å±‚é¢ åˆç†ä½¿ç”¨ v-for ä»¥åŠ v-show v-for å¢åŠ  key ä½¿diffç®—æ³•æ›´å¿«é€Ÿ ä¸éœ€è¦å“åº”å¼å¤„ç†çš„æ•°æ®å¯ä»¥é€šè¿‡Object.freezeå¤„ç†ï¼Œæˆ–è€…ç›´æ¥é€šè¿‡this.xxx = xxxçš„æ–¹å¼è¿›è¡Œå®šä¹‰ é¿å…å†…å­˜æ³„æ¼ï¼Œåˆç†å®šä¹‰å˜é‡ï¼Œè®¡æ—¶å™¨ï¼Œç›‘å¬äº‹ä»¶é”€æ¯å›æ”¶ é•¿åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–ï¼Œä¾‹å¦‚è™šæ‹Ÿæ¸²æŸ“ï¼Œæ»šåŠ¨åŠ è½½ç­‰ç­‰ å›¾ç‰‡æ‡’åŠ è½½ https://blog.csdn.net/mynewdays/article/details/124446128 ç¬¬ä¸‰æ–¹æ’ä»¶æŒ‰éœ€å¼•å…¥ ç²¾ç®€ä¼˜åŒ–ä»£ç ï¼Œä¾‹å¦‚ç»„ä»¶åŒ–ç­‰ å‡å°‘å›æµé‡ç»˜ é˜²æŠ–èŠ‚æµ webpackå±‚é¢ webpackå¯¹å›¾ç‰‡å‹ç¼© æ¨¡æ¿é¢„ç¼–è¯‘ å‡å°‘ ES6 è½¬ä¸º ES5 çš„å†—ä½™ä»£ç  babel-plugin-transform-runtimeå‡å°‘ æå–å…¬å…±ä»£ç  æå–ç»„ä»¶çš„ CSS ä¼˜åŒ– SourceMap æ„å»ºç»“æœè¾“å‡ºåˆ†æ Vue é¡¹ç›®çš„ç¼–è¯‘ä¼˜åŒ– ä»£ç åˆ†ç¦» splitChunksPlugin å°†ä»£ç åˆ†ç¦»åˆ°ä¸åŒçš„bundleä¸­ï¼Œä¹‹åæˆ‘ä»¬å¯ä»¥æŒ‰éœ€åŠ è½½ï¼Œæˆ–è€…å¹¶è¡ŒåŠ è½½è¿™äº›æ–‡ä»¶ ä»£ç å‹ç¼©ï¼ŒHtml,jså’Œcss mode:productionï¼Œä½¿ç”¨çš„æ˜¯terser-webpack-plugin css-minimizer-webpack-plugin HtmlwebpackPlugin Tree Shaking å»é™¤æœªå¼•ç”¨ä»£ç  åŸºç¡€çš„ Web æŠ€æœ¯çš„ä¼˜åŒ– å‡å°å…¥å£æ–‡ä»¶ä½“ç§¯ å¼€å¯ gzip å‹ç¼© æµè§ˆå™¨ç¼“å­˜ CDN çš„ä½¿ç”¨ ä½¿ç”¨ Chrome Performance æŸ¥æ‰¾æ€§èƒ½ç“¶é¢ˆ å…¶ä»– å°½é‡ä½¿ç”¨å›¾æ ‡ï¼Œä¸ç”¨å›¾ç‰‡ é¦–å±æ€§èƒ½ä¼˜åŒ–åˆ†æåŠ è½½æ…¢çš„åŸå› åˆ©ç”¨ performance.timing æä¾›çš„æ•°æ®è®¡ç®—é¦–å±æ—¶é—´ã€‚åœ¨é¡µé¢æ¸²æŸ“çš„è¿‡ç¨‹ï¼Œå¯¼è‡´åŠ è½½é€Ÿåº¦æ…¢çš„å› ç´ å¯èƒ½å¦‚ä¸‹ï¼š ç½‘ç»œå»¶æ—¶é—®é¢˜ èµ„æºæ–‡ä»¶ä½“ç§¯æ˜¯å¦è¿‡å¤§ èµ„æºæ˜¯å¦é‡å¤å‘é€è¯·æ±‚å»åŠ è½½äº† åŠ è½½è„šæœ¬çš„æ—¶å€™ï¼Œæ¸²æŸ“å†…å®¹å µå¡äº†è§£å†³æ–¹æ¡ˆå¸¸è§çš„å‡ ç§SPAé¦–å±ä¼˜åŒ–æ–¹å¼ï¼š å‡å°å…¥å£æ–‡ä»¶ä½“ç§¯ é™æ€èµ„æºæœ¬åœ°ç¼“å­˜ UIæ¡†æ¶æŒ‰éœ€åŠ è½½ å›¾ç‰‡èµ„æºçš„å‹ç¼© é¿å…ç»„ä»¶é‡å¤æ‰“åŒ… å¼€å¯GZipå‹ç¼© ä½¿ç”¨SSR å‡å°å…¥å£æ–‡ä»¶ä½“ç§¯è·¯ç”±æ‡’åŠ è½½ï¼ŒæŠŠä¸åŒè·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ†å‰²æˆä¸åŒçš„ä»£ç å—ï¼Œå¾…è·¯ç”±è¢«è¯·æ±‚çš„æ—¶å€™ä¼šå•ç‹¬æ‰“åŒ…è·¯ç”±ï¼Œä½¿å¾—å…¥å£æ–‡ä»¶å˜å°ï¼ŒåŠ è½½é€Ÿåº¦å¤§å¤§å¢åŠ .åœ¨ vue-router é…ç½®è·¯ç”±çš„æ—¶å€™ï¼Œé‡‡ç”¨åŠ¨æ€åŠ è½½è·¯ç”±çš„å½¢å¼ 12345routes:[ path: 'Blogs', name: 'ShowBlogs', component: () =&gt; import('./components/ShowBlogs.vue')] ä»¥å‡½æ•°çš„å½¢å¼åŠ è½½è·¯ç”±ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠå„è‡ªçš„è·¯ç”±æ–‡ä»¶åˆ†åˆ«æ‰“åŒ…ï¼Œåªæœ‰åœ¨è§£æç»™å®šçš„è·¯ç”±æ—¶ï¼Œæ‰ä¼šåŠ è½½è·¯ç”±ç»„ä»¶ é™æ€èµ„æºæœ¬åœ°ç¼“å­˜åç«¯è¿”å›èµ„æºé—®é¢˜ï¼š é‡‡ç”¨HTTPç¼“å­˜ï¼Œè®¾ç½®Cache-Controlï¼ŒLast-Modifiedï¼ŒEtagç­‰å“åº”å¤´ é‡‡ç”¨Service Workerç¦»çº¿ç¼“å­˜å‰ç«¯åˆç†åˆ©ç”¨ localStorage UIæ¡†æ¶æŒ‰éœ€åŠ è½½123456789// ç›´æ¥å¼•ç”¨æ•´ä¸ªUIåº“import ElementUI from 'element-ui'Vue.use(ElementUI)// æŒ‰éœ€å¼•ç”¨import { Button, Input, Pagination, Table, TableColumn, MessageBox } from 'element-ui';Vue.use(Button)Vue.use(Input)Vue.use(Pagination) é¿å…ç»„ä»¶é‡å¤æ‰“åŒ…å‡è®¾A.jsæ–‡ä»¶æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„åº“ï¼Œç°åœ¨æœ‰å¤šä¸ªè·¯ç”±ä½¿ç”¨äº†A.jsæ–‡ä»¶ï¼Œè¿™å°±é€ æˆäº†é‡å¤ä¸‹è½½ï¼Œè§£å†³æ–¹æ¡ˆï¼šåœ¨webpackçš„configæ–‡ä»¶ä¸­ï¼Œä¿®æ”¹CommonsChunkPluginçš„é…ç½®: 1minChunks: 3 minChunksä¸º3 è¡¨ç¤ºä¼šæŠŠä½¿ç”¨3æ¬¡åŠä»¥ä¸Šçš„åŒ…æŠ½ç¦»å‡ºæ¥ï¼Œæ”¾è¿›å…¬å…±ä¾èµ–æ–‡ä»¶ï¼Œé¿å…äº†é‡å¤åŠ è½½ç»„ä»¶ å›¾ç‰‡èµ„æºçš„å‹ç¼©å›¾ç‰‡èµ„æºè™½ç„¶ä¸åœ¨ç¼–ç è¿‡ç¨‹ä¸­ï¼Œä½†å®ƒå´æ˜¯å¯¹é¡µé¢æ€§èƒ½å½±å“æœ€å¤§çš„å› ç´ ï¼Œå¯¹äºæ‰€æœ‰çš„å›¾ç‰‡èµ„æºï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œé€‚å½“çš„å‹ç¼©ï¼Œå¯¹é¡µé¢ä¸Šä½¿ç”¨åˆ°çš„iconï¼Œå¯ä»¥ä½¿ç”¨åœ¨çº¿å­—ä½“å›¾æ ‡ï¼Œæˆ–è€…é›ªç¢§å›¾ï¼Œå°†ä¼—å¤šå°å›¾æ ‡åˆå¹¶åˆ°åŒä¸€å¼ å›¾ä¸Šï¼Œç”¨ä»¥å‡è½»httpè¯·æ±‚å‹åŠ›ã€‚ å¼€å¯GZipå‹ç¼©æ‹†å®ŒåŒ…ä¹‹åï¼Œæˆ‘ä»¬å†ç”¨gzipåšä¸€ä¸‹å‹ç¼© å®‰è£…compression-webpack-plugin 1cnmp i compression-webpack-plugin -D åœ¨vue.congig.jsä¸­å¼•å…¥å¹¶ä¿®æ”¹webpacké…ç½® 12345678910111213const CompressionPlugin = require('compression-webpack-plugin')configureWebpack: (config) =&gt; { if (process.env.NODE_ENV === 'production') { // ä¸ºç”Ÿäº§ç¯å¢ƒä¿®æ”¹é…ç½®... config.mode = 'production' return { plugins: [new CompressionPlugin({ test: /\\.js$|\\.html$|\\.css/, //åŒ¹é…æ–‡ä»¶å threshold: 10240, //å¯¹è¶…è¿‡10kçš„æ•°æ®è¿›è¡Œå‹ç¼© deleteOriginalAssets: false //æ˜¯å¦åˆ é™¤åŸæ–‡ä»¶ })] } } åœ¨æœåŠ¡å™¨æˆ‘ä»¬ä¹Ÿè¦åšç›¸åº”çš„é…ç½® å¦‚æœå‘é€è¯·æ±‚çš„æµè§ˆå™¨æ”¯æŒgzipï¼Œå°±å‘é€ç»™å®ƒgzipæ ¼å¼çš„æ–‡ä»¶ æˆ‘çš„æœåŠ¡å™¨æ˜¯ç”¨expressæ¡†æ¶æ­å»ºçš„ åªè¦å®‰è£…ä¸€ä¸‹compressionå°±èƒ½ä½¿ç”¨ 12const compression = require('compression')app.use(compression()) // åœ¨å…¶ä»–ä¸­é—´ä»¶ä½¿ç”¨ä¹‹å‰è°ƒç”¨ ä½¿ç”¨SSRSSRï¼ˆServer side ï¼‰ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼Œç»„ä»¶æˆ–é¡µé¢é€šè¿‡æœåŠ¡å™¨ç”Ÿæˆhtmlå­—ç¬¦ä¸²ï¼Œå†å‘é€åˆ°æµè§ˆå™¨ï¼Œä»å¤´æ­å»ºä¸€ä¸ªæœåŠ¡ç«¯æ¸²æŸ“æ˜¯å¾ˆå¤æ‚çš„ï¼Œvueåº”ç”¨å»ºè®®ä½¿ç”¨Nuxt.jså®ç°æœåŠ¡ç«¯æ¸²æŸ“ å‚è€ƒ SPAï¼ˆå•é¡µåº”ç”¨ï¼‰é¦–å±åŠ è½½é€Ÿåº¦æ…¢æ€ä¹ˆè§£å†³ï¼Ÿ é¦–å±åŠ è½½é€Ÿåº¦ä¼˜åŒ– å‚è€ƒVueæ€§èƒ½ä¼˜åŒ– å½“é¢è¯•å®˜é—®æˆ‘å‰ç«¯å¯ä»¥åšçš„æ€§èƒ½ä¼˜åŒ–æœ‰å“ªäº›","link":"/2022/03/12/Optimizing/vue-Optimizing/"},{"title":"æµè§ˆå™¨é¡µé¢æ¸²æŸ“æœºåˆ¶ &amp; asyncå’Œdeferçš„åŒºåˆ«","text":"æµè§ˆå™¨é¡µé¢æ¸²æŸ“æœºåˆ¶ æµè§ˆå™¨é¡µé¢æ¸²æŸ“æœºåˆ¶æµè§ˆå™¨æœ‰GUIæ¸²æŸ“çº¿ç¨‹ä¸JSå¼•æ“çº¿ç¨‹ï¼Œè¿™ä¸¤ä¸ªçº¿ç¨‹æ˜¯äº’æ–¥çš„å…³ç³»JavaScriptçš„åŠ è½½ã€è§£æä¸æ‰§è¡Œä¼šé˜»å¡DOMçš„æ„å»ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ„å»ºDOMæ—¶ï¼ŒHTMLè§£æå™¨è‹¥é‡åˆ°äº†JavaScriptï¼Œé‚£ä¹ˆå®ƒä¼šæš‚åœæ„å»ºDOMï¼Œå°†æ§åˆ¶æƒç§»äº¤ç»™JavaScriptå¼•æ“ï¼Œç­‰JavaScriptå¼•æ“è¿è¡Œå®Œæ¯•ï¼Œæµè§ˆå™¨å†ä»ä¸­æ–­çš„åœ°æ–¹æ¢å¤DOMæ„å»ºä½†æ˜¯å¦‚æœé‡åˆ°å¸¦æœ‰asyncå’Œdeferçš„scriptæ ‡ç­¾ï¼Œå°±ä¼šå¼‚æ­¥è¯·æ±‚è¿™äº›èµ„æºï¼Œä¸ä¼šé˜»å¡é¡µé¢æ¸²æŸ“æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹åˆ†ä¸ºï¼šæ„å»ºDOM -&gt; æ„å»ºCSSOM -&gt; æ„å»ºæ¸²æŸ“æ ‘ -&gt; layoutå¸ƒå±€ -&gt; ç»˜åˆ¶ scriptæ ‡ç­¾ async deferçš„åŒºåˆ«ç›´æ¥ä½¿ç”¨scriptä¼šé˜»å¡DOMæ¸²æŸ“ï¼Œåœ¨è„šæœ¬åŠ è½½&amp;æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¼šé˜»å¡åç»­çš„DOMæ¸²æŸ“ä½¿ç”¨asyncå’Œdeferï¼Œè¿™ä¸¤ä¸ªå±æ€§ä½¿å¾—scriptéƒ½ä¸ä¼šé˜»å¡DOMçš„æ¸²æŸ“ asyncå’Œdeferçš„åŒºåˆ«ï¼šasyncæ˜¯æ— é¡ºåºçš„åŠ è½½ï¼Œè€Œdeferæ˜¯æœ‰é¡ºåºçš„åŠ è½½1ï¼‰æ‰§è¡Œé¡ºåºçš„åŒºåˆ«asyncçš„æ‰§è¡Œï¼Œå¹¶ä¸ä¼šæŒ‰ç…§scriptåœ¨é¡µé¢ä¸­çš„é¡ºåºæ¥æ‰§è¡Œï¼Œè€Œæ˜¯è°å…ˆåŠ è½½å®Œè°æ‰§è¡Œdeferçš„æ‰§è¡Œï¼Œåˆ™ä¼šæŒ‰ç…§å¼•å…¥çš„é¡ºåºæ‰§è¡Œï¼Œå³ä¾¿æ˜¯åé¢çš„scriptèµ„æºå…ˆè¿”å›2ï¼‰å¯¹window.onloadçš„å½±å“ä½¿ç”¨deferçš„scriptæ ‡ç­¾ï¼Œä¼šåœ¨window.onload äº‹ä»¶ä¹‹å‰è¢«æ‰§è¡Œä½¿ç”¨asyncçš„scriptæ ‡ç­¾ï¼Œå¯¹window.onload äº‹ä»¶æ²¡æœ‰å½±å“ï¼Œwindow.onloadå¯ä»¥åœ¨ä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œ ä½¿ç”¨åœºæ™¯çš„åŒºåˆ«1ï¼‰deferå¯ä»¥ç”¨æ¥æ§åˆ¶jsæ–‡ä»¶çš„åŠ è½½é¡ºåºæ¯”å¦‚jq å’Œ Bootstrapï¼Œå› ä¸ºBootstrapä¸­çš„jsæ’ä»¶ä¾èµ–äºjqeryï¼Œæ‰€ä»¥å¿…é¡»å…ˆå¼•å…¥jQueryï¼Œå†å¼•å…¥Bootstrap jsæ–‡ä»¶2ï¼‰å¦‚æœä½ çš„è„šæœ¬å¹¶ä¸å…³å¿ƒé¡µé¢ä¸­çš„DOMå…ƒç´ ï¼ˆæ–‡æ¡£æ˜¯å¦è§£æå®Œæ¯•ï¼‰ï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šäº§ç”Ÿå…¶ä»–è„šæœ¬éœ€è¦çš„æ•°æ®ï¼Œä½¿ç”¨asyncï¼Œ å¦‚ç»Ÿè®¡ã€åŸ‹ç‚¹ç­‰åŠŸèƒ½ å‚è€ƒâœ¨ ã€Œå†æ—¶8ä¸ªæœˆã€10ä¸‡å­—å‰ç«¯çŸ¥è¯†ä½“ç³»æ€»ç»“ï¼ˆå‰ç«¯æ¡†æ¶+æµè§ˆå™¨åŸç†ç¯‡ï¼‰ğŸ”¥","link":"/2023/04/12/Browser/script/"},{"title":"Canvas å’Œ SVG","text":"Canvas å’Œ SVG Canvasä»‹ç»Canvasï¼Œç”»å¸ƒï¼å¾ˆå¥½ç†è§£å°±æ˜¯ç”¨æ¥ç”»ç”»çš„ã€‚é‚£å…·ä½“æ€ä¹ˆâ€œç”»â€å’±ä»¬å°±å¾—çœ‹ä¸€ä¸‹å…·ä½“çš„ API æ–‡æ¡£äº†ã€‚ä¸‹é¢æ˜¯å¯¹ canvas çš„ä¸€äº›æ¦‚è¿°ï¼š canvas æ˜¯ä¸€ä¸ªå¯ä»¥ä½¿ç”¨è„šæœ¬(é€šå¸¸ä¸ºJavaScript)æ¥ç»˜åˆ¶å›¾å½¢çš„ HTML å…ƒç´ . Canvas API æä¾›äº†ä¸€ä¸ªé€šè¿‡JavaScript å’Œ HTMLçš„Canvaså…ƒç´ æ¥ç»˜åˆ¶å›¾å½¢çš„æ–¹å¼ã€‚å®ƒå¯ä»¥ç”¨äºåŠ¨ç”»ã€æ¸¸æˆç”»é¢ã€æ•°æ®å¯è§†åŒ–ã€å›¾ç‰‡ç¼–è¾‘ä»¥åŠå®æ—¶è§†é¢‘å¤„ç†ç­‰æ–¹é¢ã€‚ Canvas API ä¸»è¦èšç„¦äº2Då›¾å½¢ã€‚è€ŒåŒæ ·ä½¿ç”¨Canvaså…ƒç´ çš„ WebGL API åˆ™ç”¨äºç»˜åˆ¶ç¡¬ä»¶åŠ é€Ÿçš„2Då’Œ3Då›¾å½¢ã€‚ 12345678910111213141516171819202122&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;canvas id=&quot;canvas&quot; width=&quot;400&quot; height=&quot;300&quot;&gt;&lt;/canvas&gt; &lt;/body&gt;&lt;/html&gt; &lt;script&gt; var canvas = document.getElementById('canvas'); var context = canvas.getContext('2d'); context.moveTo(10,100); context.lineTo(30,10); context.lineTo(50,100); context.lineTo(70,10); context.lineTo(90,100); context.stroke(); &lt;/script&gt; åº”ç”¨ é¦–å…ˆæ˜¯å¯è§†åŒ–æ•°æ®çš„åº”ç”¨ï¼Œæ¯”å¦‚è¯´ï¼šç™¾åº¦çš„EChartsã€é˜¿é‡Œçš„G2ç­‰å›¾è¡¨å¯è§†åŒ–æ’ä»¶ã€‚ å…¶æ¬¡æ˜¯æ¸¸æˆçš„åº”ç”¨ï¼ŒCanvas åœ¨åŸºäºWebçš„å›¾åƒæ˜¾ç¤ºæ–¹é¢æ¯” Flash æ›´åŠ ç«‹ä½“ã€ç²¾å·§ï¼Œä¸”Canvasæ¸¸æˆåœ¨æµç•…åº¦å’Œè·¨å¹³å°æ–¹é¢æ›´ç‰›ã€‚ è¿˜æœ‰å›¾å½¢ç¼–è¾‘å™¨çš„åº”ç”¨ï¼Œæ¯”å¦‚å¯è§†åŒ–ç»„æ€ç¼–è¾‘å·¥å…·HTï¼Œå®ƒå®Œå…¨åŸºäºCanvasç»˜åˆ¶ã€‚æœªæ¥Photoshopèƒ½å¤ŸåŸºäºCanvasåœ¨webç«¯100%å®ç°ã€‚ æœ€åæ¨¡æ‹Ÿå™¨çš„åº”ç”¨ï¼Œæ¨¡æ‹Ÿå™¨äº§å“å¯ä»¥å®Œå…¨ç”± canvas æ¥å®ç°ï¼Œè§†è§‰æ•ˆæœä¸Šæ›´åŠ é€¼çœŸæ¨¡æ‹Ÿå®é™…ç”Ÿæ´»ä¸­çš„å·¥å…·ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–ç‰©è”ç½‘ç¯å¢ƒä¸‹çš„ä½¿ç”¨ä½“éªŒï¼Œé™ä½ä½¿ç”¨è€…çš„å­¦ä¹ æˆæœ¬ã€‚æœªæ¥Canvasçš„åº”ç”¨åªä¼šè¶Šæ¥è¶Šæ™®éï¼Œæ‰€ä»¥å…·å¤‡Canvasè¿™é—¨æŠ€æœ¯æ˜¯å¿…ä¸å¯ç¼ºçš„ã€‚ SVGSVG è‹±æ–‡å…¨ç§°ä¸º Scalable Vector Graphicsï¼Œæ„æ€ä¸ºå¯ç¼©æ”¾çš„çŸ¢é‡å›¾ã€‚ HTML5 æ”¯æŒå†…è” SVGã€‚ HTML &lt;svg&gt; å…ƒç´ æ˜¯ SVG å›¾å½¢çš„å®¹å™¨ã€‚ SVG æœ‰å¤šç§ç»˜åˆ¶è·¯å¾„ã€æ¡†ã€åœ†ã€æ–‡æœ¬å’Œå›¾å½¢å›¾åƒçš„æ–¹æ³•ã€‚ 12345678910&lt;!-- ç»˜åˆ¶çŸ©å½¢ï¼šä½¿ç”¨ rect æ ‡ç­¾ï¼Œä¸»è¦å±æ€§ï¼šx/yï¼šç»˜å›¾ä½ç½®ï¼Œwidth/heightï¼šçŸ©å½¢é•¿å®½ï¼Œfillï¼šå¡«å……é¢œè‰²ï¼Œé»˜è®¤é»‘è‰²ï¼Œstrokeï¼šæè¾¹çš„é¢œè‰²ã€‚stroke-widthï¼šæè¾¹çš„å®½åº¦ã€‚rx/ryï¼šæè¾¹çš„åœ†è§’ã€‚ --&gt;&lt;svg width=&quot;500&quot; height=&quot;500&quot;&gt; &lt;rect x=&quot;100&quot; y=&quot;100&quot; width=&quot;150&quot; height=&quot;100&quot; fill=&quot;red&quot; stroke=&quot;green&quot; stroke-width=&quot;2&quot; rx=&quot;10&quot;&gt;&lt;/rect&gt;&lt;/svg&gt; åŒºåˆ« SVG æ˜¯ä¸€ç§ä½¿ç”¨ XML æè¿° 2D å›¾å½¢çš„è¯­è¨€ã€‚ Canvas é€šè¿‡ JavaScript æ¥ç»˜åˆ¶ 2D å›¾å½¢ã€‚ SVG åŸºäº XMLï¼Œè¿™æ„å‘³ç€ SVG DOM ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å¯ç”¨çš„ã€‚æ‚¨å¯ä»¥ä¸ºæŸä¸ªå…ƒç´ é™„åŠ  JavaScript äº‹ä»¶å¤„ç†å™¨ã€‚ åœ¨ SVG ä¸­ï¼Œæ¯ä¸ªè¢«ç»˜åˆ¶çš„å›¾å½¢å‡è¢«è§†ä¸ºå¯¹è±¡ã€‚å¦‚æœ SVG å¯¹è±¡çš„å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæµè§ˆå™¨èƒ½å¤Ÿè‡ªåŠ¨é‡ç°å›¾å½¢ã€‚ Canvas æ˜¯é€åƒç´ è¿›è¡Œæ¸²æŸ“çš„ã€‚åœ¨ Canvas ä¸­ï¼Œä¸€æ—¦å›¾å½¢è¢«ç»˜åˆ¶å®Œæˆï¼Œå®ƒå°±ä¸ä¼šç»§ç»­å¾—åˆ°æµè§ˆå™¨çš„å…³æ³¨ã€‚å¦‚æœå…¶ä½ç½®å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆæ•´ä¸ªåœºæ™¯ä¹Ÿéœ€è¦é‡æ–°ç»˜åˆ¶ï¼ŒåŒ…æ‹¬ä»»ä½•æˆ–è®¸å·²è¢«å›¾å½¢è¦†ç›–çš„å¯¹è±¡ã€‚ Canvas ä¾èµ–åˆ†è¾¨ç‡ï¼› ä¸æ”¯æŒäº‹ä»¶å¤„ç†å™¨ï¼› å¼±çš„æ–‡æœ¬æ¸²æŸ“èƒ½åŠ›ï¼› èƒ½å¤Ÿä»¥ .png æˆ– .jpg æ ¼å¼ä¿å­˜ç»“æœå›¾åƒï¼› æœ€é€‚åˆå›¾åƒå¯†é›†å‹çš„æ¸¸æˆï¼Œå…¶ä¸­çš„è®¸å¤šå¯¹è±¡ä¼šè¢«é¢‘ç¹é‡ç»˜ã€‚ SVG ä¸ä¾èµ–åˆ†è¾¨ç‡ï¼› æ”¯æŒäº‹ä»¶å¤„ç†å™¨ï¼› æœ€é€‚åˆå¸¦æœ‰å¤§å‹æ¸²æŸ“åŒºåŸŸçš„åº”ç”¨ç¨‹åºï¼ˆæ¯”å¦‚è°·æ­Œåœ°å›¾ï¼‰ï¼› å¤æ‚åº¦é«˜ä¼šå‡æ…¢æ¸²æŸ“é€Ÿåº¦ï¼ˆä»»ä½•è¿‡åº¦ä½¿ç”¨ DOM çš„åº”ç”¨éƒ½ä¸å¿«ï¼‰ï¼› ä¸é€‚åˆæ¸¸æˆåº”ç”¨ã€‚","link":"/2024/03/20/Html&Css/canvas/"},{"title":"å¯¹ BFC çš„ç†è§£","text":"BFC ä¸€ã€æ¦‚å¿µBFCï¼ˆBlock Formatting Contextï¼‰ï¼Œå³å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œå®ƒæ˜¯é¡µé¢ä¸­çš„ä¸€å—æ¸²æŸ“åŒºåŸŸï¼Œå¹¶ä¸”æœ‰ä¸€å¥—å±äºè‡ªå·±çš„æ¸²æŸ“è§„åˆ™ï¼š å†…éƒ¨çš„ç›’å­ä¼šåœ¨å‚ç›´æ–¹å‘ä¸Šä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ”¾ç½® å¯¹äºåŒä¸€ä¸ªBFCçš„ä¿©ä¸ªç›¸é‚»çš„ç›’å­çš„marginä¼šå‘ç”Ÿé‡å ï¼Œä¸æ–¹å‘æ— å…³ã€‚ æ¯ä¸ªå…ƒç´ çš„å·¦å¤–è¾¹è·ä¸åŒ…å«å—çš„å·¦è¾¹ç•Œç›¸æ¥è§¦ï¼ˆä»å·¦åˆ°å³ï¼‰ï¼Œå³ä½¿æµ®åŠ¨å…ƒç´ ä¹Ÿæ˜¯å¦‚æ­¤ BFCçš„åŒºåŸŸä¸ä¼šä¸floatçš„å…ƒç´ åŒºåŸŸé‡å  è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å­å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®— BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢çš„å…ƒç´ ï¼Œåä¹‹äº¦ç„¶ BFC ç›®çš„æ˜¯å½¢æˆä¸€ä¸ªç›¸å¯¹äºå¤–ç•Œå®Œå…¨ç‹¬ç«‹çš„ç©ºé—´ï¼Œè®©å†…éƒ¨çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–éƒ¨çš„å…ƒç´  äºŒã€å½¢æˆæ¡ä»¶è§¦å‘ BFC çš„æ¡ä»¶åŒ…å«ä¸é™äºï¼š æ ¹å…ƒç´ ï¼Œå³HTMLå…ƒç´  æµ®åŠ¨å…ƒç´ ï¼šfloatå€¼ä¸ºleftã€right overflowå€¼ä¸ä¸º visibleï¼Œä¸º autoã€scrollã€hidden displayçš„å€¼ä¸ºinline-blockã€inltable-cellã€table-captionã€tableã€inline-tableã€flexã€inline-flexã€gridã€inline-grid positionçš„å€¼ä¸ºabsoluteæˆ–fixedä¸‰ã€åº”ç”¨åœºæ™¯åˆ©ç”¨ BFC çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å°† BFC åº”ç”¨åœ¨ä»¥ä¸‹åœºæ™¯ï¼šé˜²æ­¢marginé‡å ï¼ˆå¡Œé™·ï¼‰1234567891011121314151617181920212223242526272829303132333435&lt;style&gt; p { color: #f55; background: #fcc; width: 200px; line-height: 100px; text-align:center; margin: 100px; }&lt;/style&gt;&lt;body&gt; &lt;p&gt;Haha&lt;/p &gt; &lt;p&gt;Hehe&lt;/p &gt;&lt;/body&gt;/* marginé‡å 100px åˆ©ç”¨BFCä¿®æ”¹ä¸º200pxï¼š*/&lt;style&gt; .wrap { overflow: hidden; // æ–°çš„BFC } p { color: #f55; background: #fcc; width: 200px; line-height: 100px; text-align:center; margin: 100px; }&lt;/style&gt;&lt;body&gt; &lt;p&gt;Haha&lt;/p &gt; &lt;div class=&quot;wrap&quot;&gt; &lt;p&gt;Hehe&lt;/p &gt; &lt;/div&gt;&lt;/body&gt; æ¸…é™¤å†…éƒ¨æµ®åŠ¨12345678910111213141516171819202122&lt;style&gt; .par { border: 5px solid #fcc; width: 300px; } .child { border: 5px solid #f66; width:100px; height: 100px; float: left; }&lt;/style&gt;&lt;body&gt; &lt;div class=&quot;par&quot;&gt; &lt;div class=&quot;child&quot;&gt;&lt;/div&gt; &lt;div class=&quot;child&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;/body&gt;/* çˆ¶é«˜åº¦ä¸¢å¤± åˆ©ç”¨BFCä¿®æ”¹ä¸ºçˆ¶å…ƒç´ åŒ…è£¹å­å…ƒç´  */.par { overflow: hidden;} è‡ªé€‚åº”å¤šæ å¸ƒå±€123456789101112131415161718192021222324252627&lt;style&gt; body { width: 300px; position: relative; } .aside { width: 100px; height: 150px; float: left; background: #f66; } .main { height: 200px; background: #fcc; }&lt;/style&gt;&lt;body&gt; &lt;div class=&quot;aside&quot;&gt;&lt;/div&gt; &lt;div class=&quot;main&quot;&gt;&lt;/div&gt;&lt;/body&gt;/* è™½ç„¶.aslideä¸ºæµ®åŠ¨å…ƒç´ ï¼Œä½†æ˜¯mainçš„å·¦è¾¹ä¾ç„¶ä¼šä¸åŒ…å«å—çš„å·¦è¾¹ç›¸æ¥è§¦ bfcä¿®æ”¹ä¸ºä¸ä¼šä¸æµ®åŠ¨çš„.asideå…ƒç´ é‡å  */.main { overflow: hidden;} å‚è€ƒ","link":"/2024/03/01/Html&Css/css-BFC/"},{"title":"V8åƒåœ¾å›æ”¶","text":"V8åƒåœ¾å›æ”¶æœºåˆ¶ æµè§ˆå™¨å†…æ ¸æµè§ˆå™¨ä¸­å­˜åœ¨ æ¸²æŸ“å¼•æ“ï¼ˆè´Ÿè´£æ¸²æŸ“é¡µé¢ï¼‰ å’Œ JavaScriptå¼•æ“ï¼ˆè´Ÿè´£jsæ‰§è¡Œï¼‰åŠå…¶ä»–çº¿ç¨‹ã€‚ä»¥Chromeä¸ºä¾‹ï¼šæ¸²æŸ“å¼•æ“ä¸º Blink(13 å¹´ä¹‹å‰ä½¿ç”¨çš„æ˜¯ Safari çš„ Webkit, Blink æ˜¯è°·æ­Œä¸æ¬§æœ‹ä¸€èµ·æçš„) ä»¥åŠ Javascriptå¼•æ“ï¼š V8 å†…å­˜ è®¡ç®—æœºäº”å¤§ç¡¬ä»¶ä¹‹ä¸€å­˜å‚¨å™¨çš„æ ¸å¿ƒä¹‹ä¸€ã€‚åˆ†åˆ«ä¸ºï¼šè¿ç®—å™¨ï¼Œæ§åˆ¶å™¨ï¼Œå­˜å‚¨å™¨ï¼ˆå†…éƒ¨å­˜å‚¨ï¼Œå¤–éƒ¨å­˜å‚¨ï¼‰ï¼Œè¾“å…¥è®¾å¤‡ï¼ˆé”®ç›˜é¼ æ ‡ç­‰ï¼‰ï¼Œè¾“å‡ºè®¾å¤‡ï¼ˆæ‰“å°æœºç­‰ï¼‰ å†…éƒ¨åˆ†é…æ ˆç®€å•è¯´ï¼Œæ ˆå†…å­˜ï¼Œå°ä¸”å­˜å‚¨è¿ç»­ï¼Œæ“ä½œèµ·æ¥ç®€å•æ–¹ä¾¿ï¼Œä¸€èˆ¬ç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ï¼Œè‡ªåŠ¨å›æ”¶ï¼Œæ‰€ä»¥æ–‡ç« å†…æ‰€è¯´çš„åƒåœ¾å›æ”¶ï¼Œéƒ½æ˜¯åŸºäºå †å†…å­˜ã€‚ å †å †å†…å­˜ å¤§(ç›¸å¯¹äºæ ˆå†…å­˜)ä¸”ä¸è¿ç»­ V8 ä¸­å†…å­˜åˆ†ç±» ï¼ˆå †å†…å­˜ï¼‰åœ¨è®²å†…å­˜åˆ†é…ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹å¼±åˆ†ä»£å‡è¯´ï¼ŒV8 çš„åƒåœ¾å›æ”¶ä¸»è¦å»ºç«‹åœ¨è¿™ä¸ªå‡è¯´ä¹‹ä¸Šã€‚æ¦‚å¿µï¼š ç»å¤§éƒ¨åˆ†çš„å¯¹è±¡ç”Ÿå‘½å‘¨æœŸéƒ½å¾ˆçŸ­ï¼Œå³å­˜æ´»æ—¶é—´å¾ˆçŸ­ ç”Ÿå‘½å‘¨æœŸå¾ˆé•¿çš„å¯¹è±¡ï¼ŒåŸºæœ¬éƒ½æ˜¯å¸¸é©»å¯¹è±¡ åŸºäºä»¥ä¸Šä¸¤ä¸ªæ¦‚å¿µï¼Œå°†å†…å­˜åˆ†ä¸º æ–°ç”Ÿä»£ (new space)ä¸è€ç”Ÿä»£ (old space) ä¸¤ä¸ªåŒºåŸŸã€‚åˆ’é‡ç‚¹ï¼Œè®°ä¸€ä¸‹ã€‚ åƒåœ¾äº§ç”Ÿ&amp;ä¸ºä½•å›æ”¶JavaScript æ˜¯åœ¨åˆ›å»ºå˜é‡ï¼ˆå¯¹è±¡ï¼Œå­—ç¬¦ä¸²ç­‰ï¼‰æ—¶è‡ªåŠ¨è¿›è¡Œäº†åˆ†é…å†…å­˜ï¼Œå¹¶ä¸”åœ¨ä¸ä½¿ç”¨å®ƒä»¬æ—¶â€œè‡ªåŠ¨â€é‡Šæ”¾ã€‚ é‡Šæ”¾çš„è¿‡ç¨‹ç§°ä¸ºåƒåœ¾å›æ”¶ã€‚å¸¸è§çš„å†…å­˜æ³„æ¼ï¼š æ„å¤–å£°æ˜çš„å…¨å±€å˜é‡ è¢«é—å¿˜çš„å®šæ—¶å™¨/ç›‘å¬äº‹ä»¶ ä½¿ç”¨ä¸å½“çš„é—­åŒ… æœªæ¸…ç†çš„ DOM å¼•ç”¨ åƒåœ¾å›æ”¶( Garbage Collection ç®€ç§° GC )GC å³ Garbage Collection ï¼ˆåƒåœ¾å›æ”¶ï¼‰ï¼Œç¨‹åºå·¥ä½œè¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿå¾ˆå¤š åƒåœ¾ï¼Œè¿™äº›åƒåœ¾æ˜¯ç¨‹åºä¸ç”¨çš„å†…å­˜æˆ–è€…æ˜¯ä¹‹å‰ç”¨è¿‡äº†ï¼Œä»¥åä¸ä¼šå†ç”¨çš„å†…å­˜ç©ºé—´ï¼Œè€Œ GC å°±æ˜¯è´Ÿè´£å›æ”¶åƒåœ¾çš„ï¼Œå› ä¸ºä»–å·¥ä½œåœ¨å¼•æ“å†…éƒ¨ï¼Œæ‰€ä»¥å¯¹äºæˆ‘ä»¬å‰ç«¯æ¥è¯´ï¼ŒGC è¿‡ç¨‹æ˜¯ç›¸å¯¹æ¯”è¾ƒæ— æ„Ÿçš„ï¼Œè¿™ä¸€å¥—å¼•æ“æ‰§è¡Œè€Œå¯¹æˆ‘ä»¬åˆç›¸å¯¹æ— æ„Ÿçš„æ“ä½œä¹Ÿå°±æ˜¯å¸¸è¯´çš„ åƒåœ¾å›æ”¶æœºåˆ¶ äº† æ ‡è®°æ¸…é™¤ å¼•ç”¨è®¡æ•° æ³•1ï¼‰æ ‡è®°æ¸…é™¤åˆ†ä¸º æ ‡è®° å’Œ æ¸…é™¤ ä¸¤ä¸ªé˜¶æ®µï¼Œæ ‡è®°é˜¶æ®µå³ä¸ºæ‰€æœ‰æ´»åŠ¨å¯¹è±¡åšä¸Šæ ‡è®°ï¼Œæ¸…é™¤é˜¶æ®µåˆ™æŠŠæ²¡æœ‰æ ‡è®°ï¼ˆä¹Ÿå°±æ˜¯éæ´»åŠ¨å¯¹è±¡ï¼‰é”€æ¯åœ¨è¿è¡Œæ—¶ä¼šç»™å†…å­˜ä¸­çš„æ‰€æœ‰å˜é‡éƒ½åŠ ä¸Šä¸€ä¸ªæ ‡è®°ï¼Œå‡è®¾å†…å­˜ä¸­æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯åƒåœ¾ï¼Œå…¨æ ‡è®°ä¸º0ç„¶åä»å„ä¸ªæ ¹å¯¹è±¡å¼€å§‹éå†ï¼ŒæŠŠä¸æ˜¯åƒåœ¾çš„èŠ‚ç‚¹æ”¹æˆ1ï¼Œæ¸…ç†æ‰€æœ‰æ ‡è®°ä¸º0çš„åƒåœ¾ï¼Œé”€æ¯å¹¶å›æ”¶å®ƒä»¬æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ã€‚æœ€åï¼ŒæŠŠæ‰€æœ‰å†…å­˜ä¸­å¯¹è±¡æ ‡è®°ä¿®æ”¹ä¸º0ï¼Œç­‰å¾…ä¸‹ä¸€è½®åƒåœ¾å›æ”¶2ï¼‰å¼•ç”¨è®¡æ•°ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–å¯¹è±¡å¼•ç”¨åˆ°å®ƒï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯é›¶å¼•ç”¨ï¼Œå°†è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶å®ƒçš„ç­–ç•¥æ˜¯è·Ÿè¸ªè®°å½•æ¯ä¸ªå˜é‡å€¼è¢«ä½¿ç”¨çš„æ¬¡æ•°ä¸€ä¸ªå¯¹è±¡è¢«å…¶ä»–å¯¹è±¡å¼•ç”¨æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨æ¬¡æ•°å°±ä¸º 1ï¼Œå¦‚æœåŒä¸€ä¸ªå€¼åˆè¢«èµ‹ç»™å¦ä¸€ä¸ªå˜é‡ï¼Œé‚£ä¹ˆå¼•ç”¨æ•°åŠ  1ï¼Œå¦‚æœè¯¥å˜é‡çš„å€¼è¢«å…¶ä»–çš„å€¼è¦†ç›–äº†ï¼Œåˆ™å¼•ç”¨æ¬¡æ•°å‡ 1å½“è¿™ä¸ªå€¼çš„å¼•ç”¨æ¬¡æ•°å˜ä¸º 0 çš„æ—¶å€™ï¼Œè¯´æ˜æ²¡æœ‰å˜é‡åœ¨ä½¿ç”¨ï¼Œè¿™ä¸ªå€¼æ²¡æ³•è¢«è®¿é—®äº†ï¼Œå›æ”¶ç©ºé—´ï¼Œåƒåœ¾å›æ”¶å™¨ä¼šåœ¨è¿è¡Œçš„æ—¶å€™æ¸…ç†æ‰å¼•ç”¨æ¬¡æ•°ä¸º 0 çš„å€¼å ç”¨çš„å†…å­˜ V8 åˆ†ä»£å¼åƒåœ¾å›æ”¶æœºåˆ¶æ–°ç”Ÿä»£æ–°ç”Ÿä»£ç®—æ³•ä¸º Scavenge ç®—æ³•ï¼Œåˆ†ä¸º FromåŒº å’Œ ToåŒºï¼Œå¹¿åº¦ä¼˜å…ˆ é¦–å…ˆï¼ŒV8 å¼•æ“ä¸­çš„åƒåœ¾å›æ”¶å™¨æ£€æµ‹åˆ° from space ç©ºé—´å¿«è¾¾åˆ°ä¸Šé™äº†ï¼Œæ­¤æ—¶è¦è¿›è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶äº† ä»æ ¹éƒ¨å¼€å§‹éå†ï¼Œä¸å¯è¾¾å¯¹è±¡(å³æ— æ³•éå†åˆ°å¯¹è±¡)å°±æ ‡è®°ï¼Œå¯è¾¾çš„å¯¹è±¡ä¸æ ‡è®°ç„¶åå¤åˆ¶åˆ°toåŒº æ¸…é™¤ from space ä¸­çš„æ•°æ®ï¼ŒåŒæ—¶å°† from space ç½®ä¸ºç©ºé—²çŠ¶æ€ï¼Œå³å˜ä¸º to space ,å¯¹åº”çš„ to space å˜ä¸º from spaceï¼Œä¿—ç§°ç¿»è½¬ å½“ç„¶ä¼˜ç§€çš„ V8 æ˜¯ä¸å¯èƒ½å®¹å¿ï¼Œä¸€ä¸ªå¯¹è±¡æ¥å›çš„åœ¨ form space å’Œ to space ä¸­è¹¦è·¶çš„ï¼Œå½“ç»å†ä¸€æ¬¡ form =&gt; to ç¿»è½¬ä¹‹åï¼Œå‘ç°æŸäº›æœªè¢«æ ‡è®°çš„å¯¹è±¡å±…ç„¶è¿˜åœ¨ï¼Œä¼šç›´æ¥æ‰”åˆ°è€ç”Ÿä»£é‡Œé¢å»ï¼Œå¥½ä¼¼åæµªå‚åŠ æ¯”èµ›ï¼Œæ™‹çº§äº†ï¼Œä¼˜ç§€çš„å˜ã€‚é™¤äº†ä¸Šé¢ä¸€ç§æƒ…å†µï¼Œè¿˜æœ‰ä¸€ä¸ªæƒ…å†µä¹Ÿä¼šæ™‹çº§ï¼Œå½“ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨è¢«å¤åˆ¶çš„æ—¶å€™ï¼Œå¤§äº to space ç©ºé—´çš„ 25% çš„æ—¶å€™ï¼Œä¹Ÿä¼šæ™‹çº§äº†ï¼Œè¿™ç§è‡ªå¸¦èƒŒæ™¯çš„é€‰æ‰‹ï¼Œé‚£æ˜¯ä¸æ•¢åŠ¨çš„ï¼Œç›´æ¥æ™‹çº§åˆ°è€ç”Ÿä»£ã€‚ è€ç”Ÿä»£è€ç”Ÿä»£å›æ”¶ç®—æ³•ä¸ºï¼šæ ‡è®°å’Œæ¸…é™¤/æ•´ç†ï¼ˆmark-sweep/mark-compactï¼‰ã€‚æ·±åº¦ä¼˜å…ˆæ ‡è®°è¿‡ç¨‹ä¸­ï¼Œå¼•å…¥ä¸‰è‰²ï¼š ç™½è‰²ï¼š æœªè¢«æ ‡è®°çš„å¯¹è±¡ï¼Œå³ä¸å¯è¾¾å¯¹è±¡ï¼ˆæ²¡æœ‰æ‰«æåˆ°çš„å¯¹è±¡ï¼‰ï¼Œå¯å›æ”¶ ç°è‰²ï¼š å·²è¢«æ ‡è®°ï¼Œå¯è¾¾å¯¹è±¡ï¼Œæœªæ‰«æå®Œï¼Œä¸å¯å›æ”¶ é»‘è‰²ï¼š å·²è¢«ç¼–è¾‘ï¼Œå¯è¾¾å¯¹è±¡ï¼Œæ‰«æå®Œï¼Œä¸å¯å›æ”¶è¿‡ç¨‹ï¼š é¦–å…ˆå°†æ‰€æœ‰çš„éæ ¹éƒ¨å¯¹è±¡å…¨éƒ¨æ ‡è®°ä¸ºç™½è‰²ï¼Œç„¶åä½¿ç”¨æ·±åº¦ä¼˜å…ˆéå†ï¼Œæ˜¯æ·±åº¦ä¼˜å…ˆå“ˆï¼Œå’Œæ–°ç”Ÿä»£ä¸ä¸€æ ·å“ˆï¼ŒæŒ‰æ·±åº¦ä¼˜å…ˆæœç´¢æ²¿é€”éå†ï¼Œå°†è®¿é—®åˆ°çš„å¯¹è±¡ï¼Œç›´æ¥å‹å…¥æ ˆä¸­ï¼ŒåŒæ—¶å°†æ ‡è®°ç»“æœæ”¾åœ¨ marking bitmap (ç°è‰²) ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡éå†å®Œæˆï¼Œç›´æ¥å‡ºæ ˆï¼ŒåŒæ—¶åœ¨ marking bitmap ä¸­è®°å½•ä¸ºé»‘è‰²ï¼Œç›´åˆ°æ ˆç©ºä¸ºæ­¢ æ ‡è®°å®Œæˆåï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç­‰å¾…åƒåœ¾å›æ”¶å™¨æ¥æ¸…é™¤äº†ï¼Œæ¸…é™¤å®Œäº†ä¹‹åï¼Œä¼šåœ¨åŸæ¥çš„å†…å­˜åŒºåŸŸç•™ä¸‹ä¸€å¤§å †ä¸è¿ç»­çš„ç©ºé—´ï¼Œå°å¯¹è±¡è¿˜å¥½è¯´ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœæ¥ä¸€ä¸ªç¨å¾®å¤§ä¸€ç‚¹çš„å¯¹è±¡ï¼Œæ²¡æœ‰å†…å­˜å¯ä»¥æ”¾çš„ä¸‹è¿™ä¸ªå‚»å¤§ä¸ªäº†ï¼Œæ€ä¹ˆåŠï¼Ÿåªèƒ½è§¦å‘ GCï¼Œä½†æ˜¯å§ï¼ŒåŸæ¥æ¸…é™¤çš„ä¸è¿ç»­çš„ç©ºé—´åŠ èµ·æ¥åˆå¯ä»¥æ”¾çš„ä¸‹è¿™ä¸ªå‚»å¤§ä¸ªï¼Œå¾ˆå¯æƒœå•Šï¼Œå¯åŠ¨ä¸€æ¬¡ GC æ€§èƒ½ä¸Šä¹Ÿæ˜¯å—–å—–çš„å¾€ä¸‹æ‰å•Šï¼›V8 èƒ½å®¹è®¸è¿™æ ·çš„äº‹å‘ç”Ÿï¼Ÿè‚¯å®šä¸å­˜åœ¨å˜›ï¼ æ‰€ä»¥åœ¨æ¸…é™¤å®Œä¹‹åï¼Œæ–°ç”Ÿä»£ä¸­å¯¹è±¡ï¼Œå†ä¸€æ¬¡åˆ†é…åˆ°è€ç”Ÿå¸¦å¹¶ä¸”å†…å­˜ä¸è¶³çš„æ—¶å€™ï¼Œä¼šä¼˜å…ˆè§¦å‘æ ‡è®°æ•´ç†ï¼ˆmark-compactï¼‰, åœ¨æ ‡è®°ç»“æŸåï¼Œä»–ä¼šå°†å¯è¾¾å¯¹è±¡(é»‘è‰²)ï¼Œç§»åˆ°å†…å­˜çš„å¦ä¸€ç«¯ï¼Œå…¶ä»–çš„å†…å­˜ç©ºé—´å°±ä¸ä¼šè¢«å ç”¨ï¼Œç›´æ¥é‡Šæ”¾ï¼Œç­‰ä¸‹æ¬¡å†æœ‰å¯¹è±¡æ™‹å‡çš„æ—¶å€™ï¼Œè½»æ¾æ”¾ä¸‹ã€‚ åˆ†ä»£å†…å­˜64ä½ç³»ç»Ÿï¼Œæ–°ç”Ÿä»£å†…å­˜å¤§å°ä¸º32MBï¼Œè€ç”Ÿä»£å†…å­˜ä¸º1.4Gï¼›32ä½ç³»ç»Ÿï¼Œæ–°ç”Ÿä»£å†…å­˜å¤§å°ä¸º16MBï¼Œè€ç”Ÿä»£å†…å­˜ä¸º0.7G å‚è€ƒ V8 å¼•æ“åƒåœ¾å›æ”¶ä¸å†…å­˜åˆ†é… ä¸€æ–‡ææ‡‚V8å¼•æ“çš„åƒåœ¾å›æ”¶","link":"/2023/04/12/Browser/V8/"},{"title":"å¸ƒå±€æ–¹æ¡ˆ","text":"å¸ƒå±€æ–¹æ¡ˆ æ°´å¹³å‚ç›´å±…ä¸­æ–¹æ¡ˆflexé€‚ç”¨åœºæ™¯ï¼šå­å…ƒç´ å®½é«˜ä¸å›ºå®šã€å­å…ƒç´ å®½é«˜å›ºå®š 1234567891011121314151617&lt;div id=&quot;parent&quot;&gt; &lt;div id=&quot;children&quot;&gt;HZFE&lt;/div&gt;&lt;/div&gt;#parent { background: red; height: 600px;}#children { background: blue;}#parent { display: flex; justify-content: center; align-items: center;} transformé€‚ç”¨åœºæ™¯ï¼šå­å…ƒç´ å®½é«˜ä¸å›ºå®šã€å­å…ƒç´ å®½é«˜å›ºå®š 123456789101112131415#children { display: inline-block; position: relative; top: 50%; left: 50%; transform: translate(-50%, -50%);}#children { width: 400px; height: 300px; position: relative; top: 50%; left: 50%; transform: translate(-200px, -150px);} ä¸¤æ å¸ƒå±€ä¸¤æ å¸ƒå±€éå¸¸å¸¸è§ï¼Œå¾€å¾€æ˜¯ä»¥ä¸€ä¸ªå®šå®½æ å’Œä¸€ä¸ªè‡ªé€‚åº”çš„æ å¹¶æ’å±•ç¤ºå­˜åœ¨ float1234567891011121314151617181920&lt;style&gt; .box{ overflow: hidden; /* æ·»åŠ BFC */ } .left { float: left; width: 200px; background-color: gray; height: 400px; } .right { margin-left: 210px; background-color: lightgray; height: 200px; }&lt;/style&gt;&lt;div class=&quot;box&quot;&gt; &lt;div class=&quot;left&quot;&gt;å·¦è¾¹&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;å³è¾¹&lt;/div&gt;&lt;/div&gt; flexå¼¹æ€§å¸ƒå±€123456789101112131415&lt;style&gt; .box{ display: flex; } .left { width: 100px; } .right { flex: 1; }&lt;/style&gt;&lt;div class=&quot;box&quot;&gt; &lt;div class=&quot;left&quot;&gt;å·¦è¾¹&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;å³è¾¹&lt;/div&gt;&lt;/div&gt; ä¸‰æ å¸ƒå±€å®ç°ä¸‰æ å¸ƒå±€ä¸­é—´è‡ªé€‚åº”çš„å¸ƒå±€æ–¹å¼æœ‰ï¼š ä¸¤è¾¹ä½¿ç”¨ floatï¼Œä¸­é—´ä½¿ç”¨ margin ä¸¤è¾¹ä½¿ç”¨ absoluteï¼Œä¸­é—´ä½¿ç”¨ margin ä¸¤è¾¹ä½¿ç”¨ float å’Œè´Ÿ margin display: table å®ç° flexå®ç° gridç½‘æ ¼å¸ƒå±€ ä¸¤è¾¹ä½¿ç”¨ floatï¼Œä¸­é—´ä½¿ç”¨ margin12345678910111213141516171819202122232425262728293031&lt;style&gt; .wrap { background: #eee; overflow: hidden; /* ç”ŸæˆBFCï¼Œè®¡ç®—é«˜åº¦æ—¶è€ƒè™‘æµ®åŠ¨çš„å…ƒç´  */ padding: 20px; height: 200px; } .left { width: 200px; height: 200px; float: left; background: coral; } .right { width: 120px; height: 200px; float: right; background: lightblue; } .middle { margin-left: 220px; height: 200px; background: lightpink; margin-right: 140px; }&lt;/style&gt;&lt;div class=&quot;wrap&quot;&gt; &lt;div class=&quot;left&quot;&gt;å·¦ä¾§&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;å³ä¾§&lt;/div&gt; &lt;div class=&quot;middle&quot;&gt;ä¸­é—´&lt;/div&gt;&lt;/div&gt; ä¸¤è¾¹ä½¿ç”¨ absoluteï¼Œä¸­é—´ä½¿ç”¨ margin1234567891011121314151617181920212223242526272829303132333435363738394041&lt;style&gt; .container { position: relative; } .left, .right, .main { height: 200px; line-height: 200px; text-align: center; } .left { position: absolute; top: 0; left: 0; width: 100px; background: green; } .right { position: absolute; top: 0; right: 0; width: 100px; background: green; } .main { margin: 0 110px; background: black; color: white; }&lt;/style&gt;&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;left&quot;&gt;å·¦è¾¹å›ºå®šå®½åº¦&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;å³è¾¹å›ºå®šå®½åº¦&lt;/div&gt; &lt;div class=&quot;main&quot;&gt;ä¸­é—´è‡ªé€‚åº”&lt;/div&gt;&lt;/div&gt; flexå®ç°12345678910111213141516171819202122232425262728293031323334&lt;style type=&quot;text/css&quot;&gt; .wrap { display: flex; justify-content: space-between; } .left, .right, .middle { height: 100px; } .left { width: 200px; background: coral; } .right { width: 120px; background: lightblue; } .middle { background: #555; width: 100%; margin: 0 20px; }&lt;/style&gt;&lt;div class=&quot;wrap&quot;&gt; &lt;div class=&quot;left&quot;&gt;å·¦ä¾§&lt;/div&gt; &lt;div class=&quot;middle&quot;&gt;ä¸­é—´&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;å³ä¾§&lt;/div&gt;&lt;/div&gt; å‚è€ƒ å…ƒç´ æ°´å¹³å‚ç›´å±…ä¸­çš„æ–¹æ³•æœ‰å“ªäº› å¦‚ä½•å®ç°ä¸¤æ /ä¸‰æ å¸ƒå±€ï¼Œå³ä¾§è‡ªé€‚åº”ï¼Ÿ","link":"/2024/02/20/Html&Css/css-grid/"},{"title":"positionå±æ€§","text":"positionå±æ€§ fixedå…ƒç´ çš„ä½ç½®ç›¸å¯¹äºæµè§ˆå™¨çª—å£æ˜¯å›ºå®šä½ç½®ï¼Œå³ä½¿çª—å£æ˜¯æ»šåŠ¨çš„å®ƒä¹Ÿä¸ä¼šç§»åŠ¨ã€‚Fixed å®š ä½ä½¿å…ƒç´ çš„ä½ç½®ä¸æ–‡æ¡£æµæ— å…³ï¼Œå› æ­¤ä¸å æ®ç©ºé—´ã€‚ Fixed å®šä½çš„å…ƒç´ å’Œå…¶ä»–å…ƒç´ é‡å ã€‚ relativeå¦‚æœå¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œç›¸å¯¹å®šä½ï¼Œå®ƒå°†å‡ºç°åœ¨å®ƒæ‰€åœ¨çš„ä½ç½®ä¸Šã€‚ç„¶åï¼Œå¯ä»¥é€šè¿‡è®¾ç½®å‚ç›´ æˆ–æ°´å¹³ä½ç½®ï¼Œè®©è¿™ä¸ªå…ƒç´ â€œç›¸å¯¹äºâ€å®ƒçš„èµ·ç‚¹è¿›è¡Œç§»åŠ¨ã€‚ åœ¨ä½¿ç”¨ç›¸å¯¹å®šä½æ—¶ï¼Œæ— è®ºæ˜¯ å¦è¿›è¡Œç§»åŠ¨ï¼Œå…ƒç´ ä»ç„¶å æ®åŸæ¥çš„ç©ºé—´ã€‚å› æ­¤ï¼Œç§»åŠ¨å…ƒç´ ä¼šå¯¼è‡´å®ƒè¦†ç›–å…¶å®ƒæ¡†ã€‚ absoluteç»å¯¹å®šä½çš„å…ƒç´ çš„ä½ç½®ç›¸å¯¹äºæœ€è¿‘çš„å·²å®šä½çˆ¶å…ƒç´ ï¼Œå¦‚æœå…ƒç´ æ²¡æœ‰å·²å®šä½çš„çˆ¶å…ƒç´ ï¼Œé‚£ä¹ˆå®ƒçš„ä½ç½®ç›¸å¯¹äº absolute å®šä½ä½¿å…ƒç´ çš„ä½ç½®ä¸æ–‡æ¡£æµæ— å…³ï¼Œå› æ­¤ä¸å æ®ç©ºé—´ã€‚ absolute å®šä½çš„å…ƒç´ å’Œå…¶ä»–å…ƒç´ é‡å ã€‚ sticky ç²˜æ€§å¸ƒå±€å…ƒç´ å…ˆæŒ‰ç…§æ™®é€šæ–‡æ¡£æµå®šä½ï¼Œç„¶åç›¸å¯¹äºè¯¥å…ƒç´ åœ¨æµä¸­çš„ flow rootï¼ˆBFCï¼‰å’Œ containing blockï¼ˆæœ€è¿‘çš„å—çº§ç¥–å…ˆå…ƒç´ ï¼‰å®šä½ã€‚è€Œåï¼Œå…ƒç´ å®šä½è¡¨ç°ä¸ºåœ¨è·¨è¶Šç‰¹å®šé˜ˆå€¼å‰ä¸ºç›¸å¯¹å®šä½ï¼Œä¹‹åä¸ºå›ºå®šå®šä½ã€‚å½“å…ƒç´ åœ¨å±å¹•å†…ï¼Œè¡¨ç°ä¸ºrelativeï¼Œå½“å°±è¦æ»šå‡ºå±å¹•çš„æ—¶å€™ï¼Œè¡¨ç°ä¸ºfixed.éšç€é¡µé¢çš„æ»šåŠ¨ï¼Œå°†å…ƒç´ å›ºå®šåœ¨è®¾ç½®çš„ä½ç½®ï¼ˆå›ºå®šæ•ˆæœå¦‚åŒfixedï¼‰ï¼Œposition:stickyå¯ä»¥çœ‹ä½œæ˜¯position:relativeå’Œposition:fixedçš„ç»“åˆä½“ ä»¥ä¸‹æƒ…å†µç²˜æ€§å¸ƒå±€ä¼šå¤±æ•ˆ 1ï¼‰çˆ¶å…ƒç´ è®¾ç½®overflowï¼šhidden2ï¼‰çˆ¶å…ƒç´ é«˜åº¦ä¸å¤Ÿæˆ–è€…é«˜åº¦ä¸ºå†…éƒ¨å…ƒç´ é«˜åº¦ä¹‹å’Œï¼ˆæ€»ä¹‹æ²¡æœ‰å‰©ä½™çš„é«˜åº¦ï¼Œä¸ä¼šäº§ç”Ÿæ»šåŠ¨ï¼‰ static é»˜è®¤å€¼æ²¡æœ‰å®šä½ï¼Œå…ƒç´ å‡ºç°åœ¨æ­£å¸¸çš„æµä¸­ï¼ˆå¿½ç•¥ top, bottom, left, right æˆ–è€… z-index å£° æ˜ï¼‰ã€‚ inherit: è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ position å±æ€§çš„å€¼ã€‚ å‚è€ƒ sticky ç²˜æ€§å¸ƒå±€","link":"/2024/04/25/Html&Css/css-position/"},{"title":"em&#x2F;px&#x2F;rem&#x2F;vh&#x2F;vwåŒºåˆ«?","text":"em/px/rem/vh/vwåŒºåˆ«? ä¸€ã€åŒºåˆ« pxï¼šç»å¯¹å•ä½ï¼Œé¡µé¢æŒ‰ç²¾ç¡®åƒç´ å±•ç¤º emï¼šç›¸å¯¹å•ä½ï¼ŒåŸºå‡†ç‚¹ä¸ºçˆ¶èŠ‚ç‚¹å­—ä½“çš„å¤§å°ï¼Œå¦‚æœè‡ªèº«å®šä¹‰äº†font-sizeæŒ‰è‡ªèº«æ¥è®¡ç®—ï¼Œæ•´ä¸ªé¡µé¢å†…1emä¸æ˜¯ä¸€ä¸ªå›ºå®šçš„å€¼ remï¼šç›¸å¯¹å•ä½ï¼Œå¯ç†è§£ä¸ºroot em, ç›¸å¯¹æ ¹èŠ‚ç‚¹htmlçš„å­—ä½“å¤§å°æ¥è®¡ç®— vhã€vwï¼šä¸»è¦ç”¨äºé¡µé¢è§†å£å¤§å°å¸ƒå±€ï¼Œåœ¨é¡µé¢å¸ƒå±€ä¸Šæ›´åŠ æ–¹ä¾¿ç®€å• å‚è€ƒè¯´è¯´em/px/rem/vh/vwåŒºåˆ«?","link":"/2024/03/02/Html&Css/css-px-em/"},{"title":"æ¨¡å—åŒ–","text":"å‰ç«¯æ¨¡å—åŒ– ä¸€é“â€œæ˜æ˜Ÿâ€é¢è¯•é¢˜ï¼šcommon.js å’Œ es6 ä¸­æ¨¡å—å¼•å…¥çš„åŒºåˆ«ï¼Ÿ CommonJS æ˜¯ä¸€ç§æ¨¡å—è§„èŒƒï¼Œæœ€åˆè¢«åº”ç”¨äº Nodejsï¼Œæˆä¸º Nodejs çš„æ¨¡å—è§„èŒƒã€‚è¿è¡Œåœ¨æµè§ˆå™¨ç«¯çš„ JavaScript ç”±äºä¹Ÿç¼ºå°‘ç±»ä¼¼çš„è§„èŒƒï¼Œåœ¨ ES6 å‡ºæ¥ä¹‹å‰ï¼Œå‰ç«¯ä¹Ÿå®ç°äº†ä¸€å¥—ç›¸åŒçš„æ¨¡å—è§„èŒƒ (ä¾‹å¦‚: AMD)ï¼Œç”¨æ¥å¯¹å‰ç«¯æ¨¡å—è¿›è¡Œç®¡ç†ã€‚è‡ª ES6 èµ·ï¼Œå¼•å…¥äº†ä¸€å¥—æ–°çš„ ES6 Module è§„èŒƒï¼Œåœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ä¸Šå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œè€Œä¸”å®ç°å¾—ç›¸å½“ç®€å•ï¼Œæœ‰æœ›æˆä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šç”¨çš„æ¨¡å—è§£å†³æ–¹æ¡ˆã€‚ä½†ç›®å‰æµè§ˆå™¨å¯¹ ES6 Module å…¼å®¹è¿˜ä¸å¤ªå¥½ï¼Œæˆ‘ä»¬å¹³æ—¶åœ¨ Webpack ä¸­ä½¿ç”¨çš„ export å’Œ importï¼Œä¼šç»è¿‡ Babel è½¬æ¢ä¸º CommonJS è§„èŒƒã€‚åœ¨ä½¿ç”¨ä¸Šçš„å·®åˆ«ä¸»è¦æœ‰ï¼š 1ã€CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚ 2ã€CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ã€‚ 3ã€CommonJs æ˜¯å•ä¸ªå€¼å¯¼å‡ºï¼ŒES6 Moduleå¯ä»¥å¯¼å‡ºå¤šä¸ª 4ã€CommonJs æ˜¯åŠ¨æ€è¯­æ³•å¯ä»¥å†™åœ¨åˆ¤æ–­é‡Œï¼ŒES6 Module é™æ€è¯­æ³•åªèƒ½å†™åœ¨é¡¶å±‚ 5ã€CommonJs çš„ this æ˜¯å½“å‰æ¨¡å—ï¼ŒES6 Moduleçš„ this æ˜¯ undefined tree shaking Tree shaking æ˜¯ä¸€ç§é€šè¿‡æ¸…é™¤å¤šä½™ä»£ç æ–¹å¼æ¥ä¼˜åŒ–é¡¹ç›®æ‰“åŒ…ä½“ç§¯çš„æŠ€æœ¯ï¼Œä¸“ä¸šæœ¯è¯­å« Dead code elimination å‚è€ƒ webpack treeShakingæœºåˆ¶çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ","link":"/2024/04/10/Engineering/commonjs-amd/"},{"title":"js.mapæ–‡ä»¶çš„ä½œç”¨","text":"js.mapæ–‡ä»¶çš„ä½œç”¨ source map æ–‡ä»¶æ˜¯ js æ–‡ä»¶å‹ç¼©åï¼Œæ–‡ä»¶çš„å˜é‡åæ›¿æ¢å¯¹åº”ã€å˜é‡æ‰€åœ¨ä½ç½®ç­‰å…ƒä¿¡æ¯æ•°æ®æ–‡ä»¶ï¼Œä¸€èˆ¬è¿™ç§æ–‡ä»¶å’Œ min.js ä¸»æ–‡ä»¶æ”¾åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ã€‚ æ¯”å¦‚å‹ç¼©ååŸå˜é‡æ˜¯ mapï¼Œå‹ç¼©åé€šè¿‡å˜é‡æ›¿æ¢è§„åˆ™å¯èƒ½ä¼šè¢«æ›¿æ¢æˆ aï¼Œè¿™æ—¶ source map æ–‡ä»¶ä¼šè®°å½•ä¸‹è¿™ä¸ª mapping çš„ä¿¡æ¯ï¼Œè¿™æ ·çš„å¥½å¤„å°±æ˜¯è¯´ï¼Œåœ¨è°ƒè¯•çš„æ—¶å€™ï¼Œå¦‚æœæœ‰ä¸€äº› JS æŠ¥é”™ï¼Œé‚£ä¹ˆæµè§ˆå™¨ä¼šé€šè¿‡è§£æè¿™ä¸ª map æ–‡ä»¶æ¥é‡æ–° merge å‹ç¼©åçš„ js,ä½¿å¼€å‘è€…å¯ä»¥ç”¨æœªå‹ç¼©å‰çš„ä»£ç æ¥è°ƒè¯•ï¼Œè¿™æ ·ä¼šç»™æˆ‘ä»¬å¸¦æ¥å¾ˆå¤§çš„æ–¹ä¾¿ï¼","link":"/2024/03/05/Engineering/source-map/"},{"title":"å‰ç«¯å·¥ç¨‹åŒ–çš„ç†è§£","text":"å‰ç«¯å·¥ç¨‹åŒ–çš„ç†è§£ å‰ç«¯å·¥ç¨‹åŒ–æ˜¯æŒ‡å°†å‰ç«¯å¼€å‘ä¸­çš„è®¾è®¡ã€å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²ç­‰ç¯èŠ‚è¿›è¡Œæ ‡å‡†åŒ–å’Œè‡ªåŠ¨åŒ–ï¼Œä»¥æé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ï¼Œå¹¶é™ä½ç»´æŠ¤æˆæœ¬ã€‚ å…·ä½“è€Œè¨€ï¼Œå‰ç«¯å·¥ç¨‹åŒ–åŒ…æ‹¬ä»¥ä¸‹æ–¹é¢ï¼š æ¨¡å—åŒ–ï¼šä½¿ç”¨æ¨¡å—åŒ–æ€æƒ³å¯ä»¥å°†å¤æ‚çš„ä»£ç æ‹†åˆ†æˆå°çš„å¯é‡ç”¨çš„æ¨¡å—ï¼Œå¹¶ä¸”ä½¿å¾—ä¸åŒæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»æ›´åŠ æ¸…æ™°ã€‚ è‡ªåŠ¨åŒ–æ„å»ºï¼šé€šè¿‡ä½¿ç”¨æ„å»ºå·¥å…·ï¼ˆå¦‚ Gulpã€Webpackã€Rollup ç­‰ï¼‰ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–åœ°å®Œæˆä»£ç ç¼–è¯‘ã€å‹ç¼©ã€æ‰“åŒ…ã€è½¬æ¢ã€ä¼˜åŒ–ç­‰ä»»åŠ¡ï¼Œä»è€Œæé«˜å¼€å‘æ•ˆç‡ã€‚ è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šé€šè¿‡ä½¿ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å’Œå·¥å…·ï¼ˆå¦‚ Jestã€Mochaã€Chaiã€Selenium ç­‰ï¼‰ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–åœ°å®Œæˆå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€UI æµ‹è¯•ç­‰ä»»åŠ¡ï¼Œä»è€Œæé«˜ä»£ç è´¨é‡å¹¶å‡å°‘æ•…éšœã€‚ è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼šé€šè¿‡ä½¿ç”¨è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·ï¼ˆå¦‚ Jenkinsã€Travis CIã€GitLab CI/CD ç­‰ï¼‰ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–åœ°å®Œæˆä»£ç ä¸Šä¼ ã€æœåŠ¡å™¨éƒ¨ç½²ã€æ•°æ®åº“æ›´æ–°ç­‰ä»»åŠ¡ï¼Œä»è€Œå‡å°‘æ‰‹åŠ¨æ“ä½œäº§ç”Ÿçš„é”™è¯¯å’Œæ¼æ´ã€‚ è§„èŒƒåŒ–ç®¡ç†ï¼šé€šè¿‡ä½¿ç”¨ä»£ç è§„èŒƒï¼ˆå¦‚ ESLintã€Stylelintã€Prettier ç­‰ï¼‰å’Œç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆå¦‚ Gitï¼‰ï¼Œå¯ä»¥è§„èŒƒå¼€å‘æµç¨‹å’Œä»£ç é£æ ¼ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ å‰ç«¯å·¥ç¨‹åŒ–æ˜¯å°†å‰ç«¯å¼€å‘ä¸­çš„è®¾è®¡ã€å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²ç­‰ç¯èŠ‚è¿›è¡Œæ ‡å‡†åŒ–å’Œè‡ªåŠ¨åŒ–ï¼Œä»¥æé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ï¼Œå¹¶é™ä½ç»´æŠ¤æˆæœ¬ã€‚ å®ƒæ˜¯ä¸€ç§ç°ä»£åŒ–çš„å¼€å‘æ–¹å¼ï¼Œé€‚ç”¨äºå„ç§å¤§å°é¡¹ç›®çš„å¼€å‘ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä¸æ–­å˜åŒ–çš„æŠ€æœ¯ç¯å¢ƒä¸­ä¿æŒç«äº‰åŠ›ã€‚","link":"/2024/04/10/Engineering/index/"},{"title":"è¯´ä¸‹Viteçš„åŸç†","text":"è¯´ä¸‹Viteçš„åŸç† è¯´ä¸‹Viteçš„åŸç†","link":"/2024/03/27/Engineering/vite/"},{"title":"Webpack æ‰“åŒ…æµç¨‹","text":"Webpack æ‰“åŒ…æµç¨‹ å¤§è‡´æµç¨‹æ•´ä¸ªå®ç°è¿‡ç¨‹å¤§è‡´åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š æ­å»ºç»“æ„ï¼Œè¯»å–é…ç½®å‚æ•° ç”¨é…ç½®å‚æ•°å¯¹è±¡åˆå§‹åŒ– Compiler å¯¹è±¡ æŒ‚è½½é…ç½®æ–‡ä»¶ä¸­çš„æ’ä»¶ æ‰§è¡Œ Compiler å¯¹è±¡çš„ run æ–¹æ³•å¼€å§‹æ‰§è¡Œç¼–è¯‘ æ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„ entry é…ç½®é¡¹æ‰¾åˆ°æ‰€æœ‰çš„å…¥å£ ä»å…¥å£æ–‡ä»¶å‡ºå‘ï¼Œè°ƒç”¨é…ç½®çš„ loader è§„åˆ™ï¼Œå¯¹å„æ¨¡å—è¿›è¡Œç¼–è¯‘ æ‰¾å‡ºæ­¤æ¨¡å—æ‰€ä¾èµ–çš„æ¨¡å—ï¼Œå†å¯¹ä¾èµ–æ¨¡å—è¿›è¡Œç¼–è¯‘ ç­‰æ‰€æœ‰æ¨¡å—éƒ½ç¼–è¯‘å®Œæˆåï¼Œæ ¹æ®æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç»„è£…ä»£ç å— chunk æŠŠå„ä¸ªä»£ç å— chunk è½¬æ¢æˆä¸€ä¸ªä¸€ä¸ªæ–‡ä»¶åŠ å…¥åˆ°è¾“å‡ºåˆ—è¡¨ ç¡®å®šå¥½è¾“å‡ºå†…å®¹ä¹‹åï¼Œæ ¹æ®é…ç½®çš„è¾“å‡ºè·¯å¾„å’Œæ–‡ä»¶åï¼Œå°†æ–‡ä»¶å†…å®¹å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿ å‚è€ƒ webpackå®˜ç½‘ äºŒåå¼ å›¾ç‰‡å½»åº•è®²æ˜ç™½Webpackè®¾è®¡ç†å¿µï¼Œä»¥çœ‹æ‡‚ä¸ºç›®çš„ ã€webpackç³»åˆ—ã€‘ä»æ ¸å¿ƒæ¦‚å¿µåˆ°ä¸Šæ‰‹é…ç½® webpacké…ç½®å®Œå…¨æŒ‡å— è¯´è¯´webpackçš„çƒ­æ›´æ–°æ˜¯å¦‚ä½•åšåˆ°çš„ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ","link":"/2024/03/05/Engineering/webpack/"},{"title":"react åŸºç¡€çŸ¥è¯†","text":"react åŸºç¡€çŸ¥è¯† vueå’Œreactçš„åŒºåˆ« è®¾è®¡ç†å¿µä¸åŒreactæ•´ä½“ä¸Šæ˜¯å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œç»„ä»¶ä½¿ç”¨jsxè¯­æ³•ï¼Œall in jsï¼Œå°†htmlä¸csså…¨éƒ½èå…¥javaScriptä¸­ï¼Œjsxè¯­æ³•ç›¸å¯¹æ¥è¯´æ›´åŠ çµæ´»vueçš„æ•´ä½“æ€æƒ³ï¼Œæ˜¯æ‹¥æŠ±ç»å…¸çš„html(ç»“æ„)+css(è¡¨ç°)+js(è¡Œä¸º)çš„å½¢å¼ï¼Œä½¿ç”¨templateæ¨¡æ¿ï¼Œå¹¶æä¾›æŒ‡ä»¤ä¾›å¼€å‘è€…ä½¿ç”¨ï¼Œå¦‚v-ifã€v-showã€v-forç­‰ï¼Œå¼€å‘æ—¶æœ‰ç»“æ„ã€è¡¨ç°ã€è¡Œä¸ºåˆ†ç¦»çš„æ„Ÿè§‰ æ•°æ®æ˜¯å¦å¯å˜vueçš„æ€æƒ³æ˜¯å“åº”å¼çš„ï¼Œé€šè¿‡Object.definepropertyæˆ–proxyä»£ç†å®ç°æ•°æ®ç›‘å¬ï¼Œæ¯ä¸€ä¸ªå±æ€§æ·»åŠ ä¸€ä¸ªdepå¯¹è±¡ï¼ˆç”¨æ¥å­˜å‚¨å¯¹åº”çš„watcherï¼‰ï¼Œå½“å±æ€§å˜åŒ–çš„æ—¶å€™ï¼Œé€šçŸ¥å¯¹åº”çš„watcherå‘ç”Ÿæ”¹å˜reactæ¨å´‡çš„æ˜¯æ•°æ®ä¸å¯å˜ï¼Œreactä½¿ç”¨çš„æ˜¯æµ…æ¯”è¾ƒï¼Œå¦‚æœå¯¹è±¡å’Œæ•°æ®çš„å¼•ç”¨åœ°å€æ²¡æœ‰å˜ï¼Œreactè®¤ä¸ºè¯¥å¯¹è±¡æ²¡æœ‰å˜åŒ–ï¼Œæ‰€ä»¥reactå˜åŒ–æ—¶ä¸€èˆ¬éƒ½æ˜¯æ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ æ›´æ–°æ¸²æŸ“æ–¹å¼ä¸åŒå½“ç»„ä»¶çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œvueæ˜¯å“åº”å¼ï¼Œé€šè¿‡å¯¹åº”çš„watcherè‡ªåŠ¨æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶é‡æ–°æ¸²æŸ“reactéœ€è¦æ›´æ–°ç»„ä»¶æ—¶ï¼Œä¼šé‡æ–°èµ°æ¸²æŸ“çš„æµç¨‹ï¼Œé€šè¿‡ä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†ï¼Œdom diffæ‰¾åˆ°éœ€è¦å˜æ›´çš„èŠ‚ç‚¹ï¼Œæ›´æ–°ä»»åŠ¡è¿˜æ˜¯å¾ˆå¤§ï¼Œéœ€è¦ä½¿ç”¨åˆ° Fiberï¼Œå°†å¤§ä»»åŠ¡åˆ†å‰²ä¸ºå¤šä¸ªå°ä»»åŠ¡ï¼Œå¯ä»¥ä¸­æ–­å’Œæ¢å¤ï¼Œä¸é˜»å¡ä¸»è¿›ç¨‹æ‰§è¡Œé«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡ å„è‡ªçš„ä¼˜åŠ¿ä¸åŒvueçš„ä¼˜åŠ¿åŒ…æ‹¬ï¼šæ¡†æ¶å†…éƒ¨å°è£…çš„å¤šï¼Œæ›´å®¹æ˜“ä¸Šæ‰‹ï¼Œç®€å•çš„è¯­æ³•åŠé¡¹ç›®åˆ›å»ºï¼Œ æ›´å¿«çš„æ¸²æŸ“é€Ÿåº¦å’Œæ›´å°çš„ä½“ç§¯reactçš„ä¼˜åŠ¿åŒ…æ‹¬ï¼š reactæ›´çµæ´»ï¼Œæ›´æ¥è¿‘åŸç”Ÿçš„jsã€å¯æ“æ§æ€§å¼ºï¼Œå¯¹äºèƒ½åŠ›å¼ºçš„äººï¼Œæ›´å®¹æ˜“é€ å‡ºæ›´ä¸ªæ€§åŒ–çš„é¡¹ç›®å‚è€ƒâœ¨ ã€Œå†æ—¶8ä¸ªæœˆã€10ä¸‡å­—å‰ç«¯çŸ¥è¯†ä½“ç³»æ€»ç»“ï¼ˆå‰ç«¯æ¡†æ¶+æµè§ˆå™¨åŸç†ç¯‡ï¼‰ğŸ”¥","link":"/2024/05/08/React/react-basic/"},{"title":"webå¸¸è§çš„æ”»å‡»æ–¹å¼","text":"XSS (Cross Site Scripting) è·¨ç«™è„šæœ¬æ”»å‡» CSRFï¼ˆCross-site request forgeryï¼‰è·¨ç«™è¯·æ±‚ä¼ªé€  SQLæ³¨å…¥æ”»å‡» å‚è€ƒwebå¸¸è§çš„æ”»å‡»æ–¹å¼","link":"/2024/02/27/Safe/safe-web/"},{"title":"TS tsconfig.jsonæ–‡ä»¶é…ç½®","text":"tsconfig.jsæ–‡ä»¶é…ç½® filesæŒ‡å®šè¦åŒ…å«åœ¨ç¨‹åºä¸­çš„æ–‡ä»¶çš„å…è®¸åˆ—è¡¨ã€‚å¦‚æœæ‰¾ä¸åˆ°ä»»ä½•æ–‡ä»¶ï¼Œåˆ™ä¼šå‘ç”Ÿé”™è¯¯ã€‚å½“æ‚¨åªæœ‰å°‘é‡æ–‡ä»¶å¹¶ä¸”ä¸éœ€è¦ä½¿ç”¨ glob æ¥å¼•ç”¨è®¸å¤šæ–‡ä»¶æ—¶ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚å¦‚æœæ‚¨éœ€è¦çš„è¯ï¼Œè¯·ä½¿ç”¨include. 1234567891011121314{ &quot;compilerOptions&quot;: {}, &quot;files&quot;: [ &quot;core.ts&quot;, &quot;sys.ts&quot;, &quot;types.ts&quot;, &quot;scanner.ts&quot;, &quot;parser.ts&quot;, &quot;utilities.ts&quot;, &quot;binder.ts&quot;, &quot;checker.ts&quot;, &quot;tsc.ts&quot; ]} extendextendsæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶ä¸­åŒ…å«è¦ç»§æ‰¿çš„å¦ä¸€ä¸ªé…ç½®æ–‡ä»¶çš„è·¯å¾„ã€‚è¯¥è·¯å¾„å¯ä»¥ä½¿ç”¨ Node.js æ ·å¼è§£æã€‚é¦–å…ˆåŠ è½½åŸºç¡€æ–‡ä»¶ä¸­çš„é…ç½®ï¼Œç„¶åè¢«ç»§æ‰¿é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®è¦†ç›–ã€‚é…ç½®æ–‡ä»¶ä¸­æ‰¾åˆ°çš„æ‰€æœ‰ç›¸å¯¹è·¯å¾„éƒ½å°†ç›¸å¯¹äºå®ƒä»¬æºè‡ªçš„é…ç½®æ–‡ä»¶è¿›è¡Œè§£æã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ç»§æ‰¿é…ç½®æ–‡ä»¶ä¸­çš„filesã€includeã€ å’Œä¼šè¦†ç›–åŸºç¡€é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶ä¸”é…ç½®æ–‡ä»¶ä¹‹é—´ä¸å…è®¸å¾ªç¯ 1234567// configs/base.json{ &quot;compilerOptions&quot;: { &quot;noImplicitAny&quot;: true, &quot;strictNullChecks&quot;: true }} 12345// tsconfig.json{ &quot;extends&quot;: &quot;./configs/base&quot;, &quot;files&quot;: [&quot;main.ts&quot;, &quot;supplemental.ts&quot;]} compilerOptionsæ„æˆäº† TypeScript é…ç½®çš„å¤§éƒ¨åˆ†ï¼Œå¹¶ä¸”æ¶µç›–äº†è¯¥è¯­è¨€çš„å·¥ä½œæ–¹å¼ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051{ &quot;compilerOptions&quot;: { &quot;target&quot;: &quot;esnext&quot;, // æŒ‡å®štsè¢«ç¼–è¯‘ä¸ºçš„ESçš„ç‰ˆæœ¬,esnext:æœ€æ–°ç‰ˆæœ¬ï¼Œå¯è®¾ç½®å…¶ä»–ï¼Œes3ã€es5ã€es6ã€es2015ã€es2016ã€es2017ã€es2018ã€es2019ã€es2020ã€esnext &quot;module&quot;: &quot;esnext&quot;, // æŒ‡å®šè¦ä½¿ç”¨çš„æ¨¡å—åŒ–çš„è§„èŒƒï¼ŒåŒ…æ‹¬ï¼šnone,common.js,system,amd,umd,es6,es2015,es2020,esnext &quot;moduleResolution&quot;: &quot;node&quot;, &quot;strict&quot;: true, &quot;noLib&quot;: false, &quot;forceConsistentCasingInFileNames&quot;: true, // &quot;allowSyntheticDefaultImports&quot;: false, &quot;strictFunctionTypes&quot;: false, &quot;jsx&quot;: &quot;preserve&quot;, &quot;baseUrl&quot;: &quot;.&quot;, // &quot;allowJs&quot;: false, &quot;sourceMap&quot;: true, &quot;esModuleInterop&quot;: true, &quot;resolveJsonModule&quot;: true, &quot;noUnusedLocals&quot;: true, &quot;noUnusedParameters&quot;: true, &quot;experimentalDecorators&quot;: true, &quot;lib&quot;: [&quot;dom&quot;, &quot;esnext&quot;], // æŒ‡å®šé¡¹ç›®ä¸­è¦ä½¿ç”¨çš„åº“ &quot;noImplicitAny&quot;: false, &quot;skipLibCheck&quot;: true, &quot;typeRoots&quot;: [ &quot;./types&quot; ], &quot;types&quot;: [ &quot;vite/client&quot;, &quot;unplugin-vue-define-options/macros-global&quot; ], &quot;removeComments&quot;: true, &quot;paths&quot;: { &quot;@/*&quot;: [&quot;src/*&quot;], &quot;#/*&quot;: [&quot;types/*&quot;] } }, &quot;include&quot;: [ // æŒ‡å®šéœ€è¦ç¼–è¯‘çš„æ–‡ä»¶ **ï¼šä»»æ„ç›®å½•ï¼›* ä»»æ„æ–‡ä»¶; ?ï¼šä»»æ„å­—ç¬¦; &quot;tests/**/*.ts&quot;, &quot;src/**/*.ts&quot;, &quot;src/**/*.d.ts&quot;, &quot;src/**/*.tsx&quot;, &quot;src/**/*.vue&quot;, &quot;types/**/*.d.ts&quot;, &quot;types/*.d.ts&quot;, &quot;types/**/*.ts&quot;, &quot;*.d.ts&quot;, &quot;./auto-imports.d.ts&quot; ], &quot;exclude&quot;: [&quot;node_modules&quot;, &quot;dist&quot;, &quot;**/*.js&quot;] // æŒ‡å®šä¸éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶} å…¶ä»–12345678910111213141516171819202122232425{ &quot;compilerOptions&quot;: { &quot;outDir&quot;: &quot;./dist&quot;, // æŒ‡å®šç¼–è¯‘åæ–‡ä»¶çš„ç›®å½• &quot;outFile&quot;: &quot;./dist/app.js&quot;, // åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œæ‰€æœ‰å…¨å±€ä½œç”¨åŸŸä¸­çš„ä»£ç åˆå¹¶åˆ°åŒä¸€æ–‡ä»¶ä¸­ &quot;allowJs&quot;: true, // æ˜¯å¦å¯¹jsæ–‡ä»¶è¿›è¡Œç¼–è¯‘ï¼Œé»˜è®¤false &quot;checkJs&quot;: true, // æ˜¯å¦å¯¹jsæ–‡ä»¶æ£€æŸ¥è¯­æ³•è§„èŒƒï¼Œé»˜è®¤false &quot;removeComments&quot;: false, // æ˜¯å¦ç§»é™¤æ³¨é‡Š &quot;noEmit&quot;: true, // ä¸ç”Ÿæˆç¼–è¯‘åçš„æ–‡ä»¶ &quot;noEmitOnError&quot;: true, // æœ‰é”™è¯¯æ—¶ä¸ç”Ÿæˆç¼–è¯‘åçš„æ–‡ä»¶ &quot;strict&quot;: true, // ä¸¥æ ¼æ¨¡å¼æ€»å¼€å…³ &quot;alwaysStrict&quot;: false, // å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œé»˜è®¤false &quot;noImplicitAny&quot;: true, // ä¸å…è®¸éšå¼any &quot;noImplicitThis&quot;: true, // ä¸å…è®¸ä¸æ˜ç¡®ç±»å‹çš„this &quot;strictNullChecks&quot;: true, // ä¸¥æ ¼çš„æ£€æŸ¥ç©ºå€¼ }","link":"/2024/03/31/TypeScript/ts-configJson/"},{"title":"TS å¯¹è±¡ç±»å‹","text":"å¯¹è±¡ç±»å‹ å¯¹è±¡ç±»å‹åœ¨ JavaScript ä¸­ï¼Œæœ€åŸºæœ¬çš„å°†æ•°æ®æˆç»„å’Œåˆ†å‘çš„æ–¹å¼å°±æ˜¯é€šè¿‡å¯¹è±¡ã€‚åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å¯¹è±¡ç±»å‹ ï¼ˆobject typesï¼‰ æ¥æè¿°å¯¹è±¡ã€‚å¯¹è±¡ç±»å‹å¯ä»¥æ˜¯åŒ¿åçš„ï¼š 123function greet(person: { name: string; age: number }) { return &quot;Hello &quot; + person.name;} ä¹Ÿå¯ä»¥ä½¿ç”¨æ¥å£è¿›è¡Œå®šä¹‰ï¼š 12345678interface Person = { name: string; age: number;}function greet(person: Person) { return &quot;Hello &quot; + person.name;} æˆ–è€…é€šè¿‡ç±»å‹åˆ«åï¼š 1234567type Person = { name: string; age: number}function greet(person: Person) { return &quot;Hello &quot; + person.name;} å±æ€§ä¿®é¥°ç¬¦ï¼ˆProperty Modifiersï¼‰å¯é€‰å±æ€§å¯¹è±¡ç±»å‹ä¸­çš„æ¯ä¸ªå±æ€§å¯ä»¥è¯´æ˜å®ƒçš„ç±»å‹ã€å±æ€§æ˜¯å¦å¯é€‰ã€å±æ€§æ˜¯å¦åªè¯»ç­‰ä¿¡æ¯ã€‚ 123456789interface PaintOptions { shape: Shape; xPos?: number; // å¯é€‰å±æ€§ yPos?: number;} function paintShape(opts: PaintOptions) { // ...} åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒxPos å’Œ yPos å°±æ˜¯å¯é€‰å±æ€§ã€‚å› ä¸ºä»–ä»¬æ˜¯å¯é€‰çš„ï¼Œæ‰€ä»¥ä¸Šé¢æ‰€æœ‰çš„è°ƒç”¨æ–¹å¼éƒ½æ˜¯åˆæ³•çš„ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å°è¯•è¯»å–è¿™äº›å±æ€§ï¼Œä½†å¦‚æœæˆ‘ä»¬æ˜¯åœ¨ strictNullChecks æ¨¡å¼ä¸‹ (tsconfigæ–‡ä»¶ä¸­ï¼ŒstrictNullChecksé»˜è®¤ä¸ºfalse) ï¼ŒTypeScript ä¼šæç¤ºæˆ‘ä»¬ï¼Œå±æ€§å€¼å¯èƒ½æ˜¯ undefinedã€‚ 1234567891011121314151617181920interface PaintOptions { shape: Shape; xPos?: number; // å¯é€‰å±æ€§ yPos?: number;}function paintShape(opts: PaintOptions) { let xPos = opts.xPos; // (property) PaintOptions.xPos?: number | undefined let yPos = opts.yPos; // (property) PaintOptions.yPos?: number | undefined}// ===&gt; é’ˆå¯¹ undefined ç‰¹æ®Šå¤„ç†ä¸ºï¼šfunction paintShape(opts: PaintOptions) { let xPos = opts.xPos === undefined ? 0 : opts.xPos; // let xPos: number let yPos = opts.yPos === undefined ? 0 : opts.yPos; // let yPos: number} è¿™ç§åˆ¤æ–­åœ¨ JavaScript ä¸­å¾ˆå¸¸è§ï¼Œä»¥è‡³äºæä¾›äº†ä¸“é—¨çš„è¯­æ³•ç³–ï¼š 12345function paintShape({ shape, xPos = 0, yPos = 0 }: PaintOptions) { console.log(&quot;x coordinate at&quot;, xPos); // (parameter) xPos: number console.log(&quot;y coordinate at&quot;, yPos); // (parameter) yPos: number // ...} readonly å±æ€§åœ¨ TypeScript ä¸­ï¼Œå±æ€§å¯ä»¥è¢«æ ‡è®°ä¸º readonlyï¼Œè¿™ä¸ä¼šæ”¹å˜ä»»ä½•è¿è¡Œæ—¶çš„è¡Œä¸ºï¼Œä½†åœ¨ç±»å‹æ£€æŸ¥çš„æ—¶å€™ï¼Œä¸€ä¸ªæ ‡è®°ä¸º readonlyçš„å±æ€§æ˜¯ä¸èƒ½è¢«å†™å…¥çš„ã€‚ 12345678910interface SomeType { readonly prop: string;}function doSomething(obj: SomeType) { // We can read from 'obj.prop'. console.log(`prop has the value '${obj.prop}'.`); // But we can't re-assign it. obj.prop = &quot;hello&quot;; // Cannot assign to 'prop' because it is a read-only property.} readonly ä»…ä»…è¡¨æ˜å±æ€§æœ¬èº«æ˜¯ä¸èƒ½è¢«é‡æ–°å†™å…¥çš„ï¼Œå±æ€§å†…çš„å€¼å¯ä»¥é‡æ–°å†™å…¥ï¼š 1234567891011121314151617interface Home { readonly resident: { name: string; age: number };}function visitForBirthday(home: Home) { // We can read and update properties from 'home.resident'. console.log(`Happy birthday ${home.resident.name}!`); home.resident.age++;} function evict(home: Home) { // But we can't write to the 'resident' property itself on a 'Home'. home.resident = { // Cannot assign to 'resident' because it is a read-only property. name: &quot;Victor the Evictor&quot;, age: 42, };} ç´¢å¼•ç­¾åæœ‰çš„æ—¶å€™ï¼Œä½ ä¸èƒ½æå‰çŸ¥é“ä¸€ä¸ªç±»å‹é‡Œçš„æ‰€æœ‰å±æ€§çš„åå­—ï¼Œä½†æ˜¯ä½ çŸ¥é“è¿™äº›å€¼çš„ç‰¹å¾ã€‚ 12345interface StringArray { [index: number]: string;} const myArray: StringArray = getStringArray();const secondItem = myArray[1]; // const secondItem: string è¿™æ ·ï¼Œæˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªå…·æœ‰ç´¢å¼•ç­¾åçš„æ¥å£ StringArrayï¼Œè¿™ä¸ªç´¢å¼•ç­¾åè¡¨ç¤ºå½“ä¸€ä¸ª StringArray ç±»å‹çš„å€¼ä½¿ç”¨ number ç±»å‹çš„å€¼è¿›è¡Œç´¢å¼•çš„æ—¶å€™ï¼Œä¼šè¿”å›ä¸€ä¸ª string ç±»å‹çš„å€¼ã€‚ å°½ç®¡å­—ç¬¦ä¸²ç´¢å¼•ç”¨æ¥æè¿°å­—å…¸æ¨¡å¼ï¼ˆdictionary patternï¼‰éå¸¸çš„æœ‰æ•ˆï¼Œä½†ä¹Ÿä¼šå¼ºåˆ¶è¦æ±‚æ‰€æœ‰çš„å±æ€§è¦åŒ¹é…ç´¢å¼•ç­¾åçš„è¿”å›ç±»å‹ã€‚è¿™æ˜¯å› ä¸ºä¸€ä¸ªå£°æ˜ç±»ä¼¼äº obj.property çš„å­—ç¬¦ä¸²ç´¢å¼•ï¼Œè·Ÿ obj[&quot;property&quot;]æ˜¯ä¸€æ ·çš„ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œname çš„ç±»å‹å¹¶ä¸åŒ¹é…å­—ç¬¦ä¸²ç´¢å¼•çš„ç±»å‹ï¼Œæ‰€ä»¥ç±»å‹æ£€æŸ¥å™¨ä¼šç»™å‡ºæŠ¥é”™ï¼š 12345678910111213interface NumberDictionary { [index: string]: number; length: number; // ok name: string; // Property 'name' of type 'string' is not assignable to 'string' index type 'number'.}// ====&gt; ä¿®æ”¹ä¸ºè”åˆç±»å‹ï¼šinterface NumberOrStringDictionary { [index: string]: number | string; length: number; name: string;} æœ€åï¼Œä½ ä¹Ÿå¯ä»¥è®¾ç½®ç´¢å¼•ç­¾åä¸º readonlyï¼š 1234567interface ReadonlyStringArray { readonly [index: number]: string;}let myArray: ReadonlyStringArray = getReadOnlyStringArray();myArray[2] = &quot;Mallory&quot;;// å› ä¸ºæ˜¯readonlyï¼Œæ‰€ä»¥æ— æ³•ä¿®æ”¹å€¼// Index signature in type 'ReadonlyStringArray' only permits reading. å±æ€§ç»§æ‰¿ï¼ˆExtending Typesï¼‰å¯¹æ¥å£ä½¿ç”¨ extends å…³é”®å­—å…è®¸æˆ‘ä»¬æœ‰æ•ˆçš„ä»å…¶ä»–å£°æ˜è¿‡çš„ç±»å‹ä¸­æ‹·è´æˆå‘˜ï¼Œå¹¶ä¸”éšæ„æ·»åŠ æ–°æˆå‘˜ã€‚æ¥å£ä¹Ÿå¯ä»¥ç»§æ‰¿å¤šä¸ªç±»å‹ï¼š 1234567891011interface Colorful { color: string;}interface Circle { radius: number;}interface ColorfulCircle extends Colorful, Circle {}const cc: ColorfulCircle = { color: &quot;red&quot;, radius: 42,}; äº¤å‰ç±»å‹ï¼ˆIntersection Typesï¼‰TypeScript ä¹Ÿæä¾›äº†åä¸ºäº¤å‰ç±»å‹ï¼ˆIntersection typesï¼‰çš„æ–¹æ³•ï¼Œç”¨äºåˆå¹¶å·²ç»å­˜åœ¨çš„å¯¹è±¡ç±»å‹ã€‚äº¤å‰ç±»å‹çš„å®šä¹‰éœ€è¦ç”¨åˆ° &amp; æ“ä½œç¬¦ï¼š 1234567interface Colorful { color: string;}interface Circle { radius: number;}type ColorfulCircle = Colorful &amp; Circle; è¿™é‡Œï¼Œæˆ‘ä»¬è¿ç»“ Colorful å’Œ Circle äº§ç”Ÿäº†ä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œæ–°ç±»å‹æ‹¥æœ‰ Colorful å’Œ Circle çš„æ‰€æœ‰æˆå‘˜ã€‚ 12345678910function draw(circle: Colorful &amp; Circle) { console.log(`Color was ${circle.color}`); console.log(`Radius was ${circle.radius}`);}// okaydraw({ color: &quot;blue&quot;, radius: 42 });// oopsdraw({ color: &quot;red&quot;, raidus: 42 });// Argument of type '{ color: string; raidus: number; }' is not assignable to parameter of type 'Colorful &amp; Circle'.// Object literal may only specify known properties, but 'raidus' does not exist in type 'Colorful &amp; Circle'. Did you mean to write 'radius'? è¿™ä¸¤ç§æ–¹å¼åœ¨åˆå¹¶ç±»å‹ä¸Šçœ‹èµ·æ¥å¾ˆç›¸ä¼¼ï¼Œä½†å®é™…ä¸Šè¿˜æ˜¯æœ‰å¾ˆå¤§çš„ä¸åŒã€‚æœ€åŸåˆ™æ€§çš„ä¸åŒå°±æ˜¯åœ¨äºå†²çªæ€ä¹ˆå¤„ç†ï¼Œè¿™ä¹Ÿæ˜¯ä½ å†³å®šé€‰æ‹©é‚£ç§æ–¹å¼çš„ä¸»è¦åŸå› ã€‚ 12345678910111213141516171819interface Colorful { color: string;}interface ColorfulSub extends Colorful { color: number}// Interface 'ColorfulSub' incorrectly extends interface 'Colorful'.// Types of property 'color' are incompatible.// Type 'number' is not assignable to type 'string'.// ä»¥ä¸Šä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼ï¼Œå¦‚æœé‡å†™ç±»å‹ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œä½†äº¤å‰ç±»å‹ä¸ä¼šï¼šinterface Colorful { color: string;}type ColorfulSub = Colorful &amp; { color: number}// è™½ç„¶ä¸ä¼šæŠ¥é”™ï¼Œé‚£ color å±æ€§çš„ç±»å‹æ˜¯ä»€ä¹ˆå‘¢ï¼Œç­”æ¡ˆæ˜¯ neverï¼Œå–å¾—æ˜¯ string å’Œ number çš„äº¤é›†ã€‚ æ³›å‹å¯¹è±¡ç±»å‹ï¼ˆGeneric Object Typesï¼‰æŠŠ Box æƒ³è±¡æˆä¸€ä¸ªå®é™…ç±»å‹çš„æ¨¡æ¿ï¼ŒType å°±æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œå¯ä»¥è¢«æ›¿ä»£ä¸ºå…·ä½“çš„ç±»å‹ã€‚å½“ TypeScript çœ‹åˆ° Box&lt;string&gt;ï¼Œå®ƒå°±ä¼šæ›¿æ¢ä¸º Box&lt;Type&gt; çš„ Type ä¸º string ï¼Œæœ€åçš„ç»“æœå°±ä¼šå˜æˆ { contents: string }ã€‚æ¢å¥è¯è¯´ï¼ŒBox&lt;string&gt; å’Œ StringBox æ˜¯ä¸€æ ·çš„ã€‚ 1234567891011121314interface Box&lt;Type&gt; { contents: Type;}interface StringBox { contents: string;} let boxA: Box&lt;string&gt; = { contents: &quot;hello&quot; };boxA.contents; // (property) Box&lt;string&gt;.contents: string let boxB: StringBox = { contents: &quot;world&quot; };boxB.contents; // (property) StringBox.contents: string ä¸è¿‡ç°åœ¨çš„ Box æ˜¯å¯é‡å¤ä½¿ç”¨çš„ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œæˆ‘ä»¬å®Œå…¨ä¸éœ€è¦å†é‡æ–°å£°æ˜ä¸€ä¸ªç±»å‹ã€‚ 12345678910111213interface Box&lt;Type&gt; { contents: Type;}interface Apple { a: string // ....}// Same as '{ contents: Apple }'.type AppleBox = Box&lt;Apple&gt;;let new1 : AppleBox = { contents: {a: '1'}} è¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ³›å‹å‡½æ•°é¿å…ä½¿ç”¨å‡½æ•°é‡è½½: 123function setContents&lt;Type&gt;(box: Box&lt;Type&gt;, newContents: Type) { box.contents = newContents;} ç±»å‹åˆ«åä¸åŒäºæ¥å£ï¼Œå¯ä»¥æè¿°çš„ä¸æ­¢æ˜¯å¯¹è±¡ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ç±»å‹åˆ«åå†™ä¸€äº›å…¶ä»–ç§ç±»çš„çš„æ³›å‹å¸®åŠ©ç±»å‹: 1234567891011type OrNull&lt;Type&gt; = Type | null;type OneOrMany&lt;Type&gt; = Type | Type[]; type OneOrManyOrNull&lt;Type&gt; = OrNull&lt;OneOrMany&lt;Type&gt;&gt;; type OneOrManyOrNull&lt;Type&gt; = OneOrMany&lt;Type&gt; | null type OneOrManyOrNullStrings = OneOrManyOrNull&lt;string&gt;; type OneOrManyOrNullStrings = OneOrMany&lt;string&gt; | null Array ç±»å‹æˆ‘ä»¬ä¹‹å‰è®²è¿‡ Array ç±»å‹ï¼Œå½“æˆ‘ä»¬è¿™æ ·å†™ç±»å‹ number[] æˆ–è€… string[] çš„æ—¶å€™ï¼Œå…¶å®å®ƒä»¬åªæ˜¯ Array&lt;number&gt; å’Œ Array&lt;string&gt; çš„ç®€å†™å½¢å¼è€Œå·²ã€‚ 1234567function doSomething(value: Array&lt;string&gt;) { // ...}let myArray: string[] = [&quot;hello&quot;, &quot;world&quot;];// either of these work!doSomething(myArray);doSomething(new Array(&quot;hello&quot;, &quot;world&quot;)); ç±»ä¼¼äºä¸Šé¢çš„ Box ç±»å‹ï¼ŒArray æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ³›å‹ï¼š 123456789101112131415161718interface Array&lt;Type&gt; { /** * Gets or sets the length of the array. */ length: number; /** * Removes the last element from an array and returns it. */ pop(): Type | undefined; /** * Appends new elements to an array, and returns the new length of the array. */ push(...items: Type[]): number; // ...} ReadonlyArray ç±»å‹ReadonlyArray ä¸»è¦æ˜¯ç”¨æ¥åšæ„å›¾å£°æ˜ã€‚å½“æˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªå‡½æ•°è¿”å› ReadonlyArrayï¼Œå°±æ˜¯åœ¨å‘Šè¯‰æˆ‘ä»¬ä¸èƒ½å»æ›´æ”¹å…¶ä¸­çš„å†…å®¹ï¼Œå½“æˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªå‡½æ•°æ”¯æŒä¼ å…¥ ReadonlyArray ï¼Œè¿™æ˜¯åœ¨å‘Šè¯‰æˆ‘ä»¬æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒçš„ä¼ å…¥æ•°ç»„åˆ°å‡½æ•°ä¸­ï¼Œè€Œä¸ç”¨æ‹…å¿ƒä¼šæ”¹å˜æ•°ç»„çš„å†…å®¹ã€‚ 123456789function doStuff(values: ReadonlyArray&lt;string&gt;) { // We can read from 'values'... const copy = values.slice(); console.log(`The first value is ${values[0]}`); // ...but we can't mutate 'values'. values.push(&quot;hello!&quot;); // Property 'push' does not exist on type 'readonly string[]'.} TypeScript ä¹Ÿé’ˆå¯¹ ReadonlyArray&lt;Type&gt; æä¾›äº†æ›´ç®€çŸ­çš„å†™æ³• readonly Type[] : 123456789function doStuff(values: readonly string[]) { // We can read from 'values'... const copy = values.slice(); console.log(`The first value is ${values[0]}`); // ...but we can't mutate 'values'. values.push(&quot;hello!&quot;); // Property 'push' does not exist on type 'readonly string[]'.} å…ƒç»„ç±»å‹å…ƒç»„ç±»å‹æ˜¯å¦å¤–ä¸€ç§ Array ç±»å‹ï¼Œå½“ä½ æ˜ç¡®çŸ¥é“æ•°ç»„åŒ…å«å¤šå°‘ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”æ¯ä¸ªä½ç½®å…ƒç´ çš„ç±»å‹éƒ½æ˜ç¡®çŸ¥é“çš„æ—¶å€™ï¼Œå°±é€‚åˆä½¿ç”¨å…ƒç»„ç±»å‹ã€‚ 1type StringNumberPair = [string, number]; å¦‚æœè¦è·å–å…ƒç´ æ•°é‡ä¹‹å¤–çš„å…ƒç´ ï¼ŒTypeScript ä¼šæç¤ºé”™è¯¯ï¼š 123456function doSomething(pair: [string, number]) { // ... const c = pair[2]; // Tuple type '[string, number]' of length '2' has no element at index '2'.} æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ JavaScript çš„æ•°ç»„è§£æ„è¯­æ³•è§£æ„å…ƒç»„ï¼š 12345function doSomething(stringHash: [string, number]) { const [inputString, hash] = stringHash; console.log(inputString); // const inputString: string console.log(hash); // const hash: number} å¯é€‰å…ƒç´ å’Œå‰©ä½™å…ƒç´ çš„å­˜åœ¨ï¼Œä½¿å¾— TypeScript å¯ä»¥åœ¨å‚æ•°åˆ—è¡¨é‡Œä½¿ç”¨å…ƒç»„ï¼Œå°±åƒè¿™æ ·ï¼š 12345678910function readButtonInput(...args: [string, number, ...boolean[]]) { const [name, version, ...input] = args; // ...}// =====&gt; åŸºæœ¬ç­‰åŒäºï¼šfunction readButtonInput(name: string, version: number, ...input: boolean[]) { // ...} readonly å…ƒç»„ç±»å‹è¿™æ · TypeScript å°±ä¸ä¼šå…è®¸å†™å…¥readonly å…ƒç»„çš„ä»»ä½•å±æ€§ï¼š 1234function doSomething(pair: readonly [string, number]) { pair[0] = &quot;hello!&quot;; // Cannot assign to '0' because it is a read-only property.} åœ¨å¤§éƒ¨åˆ†çš„ä»£ç ä¸­ï¼Œå…ƒç»„åªæ˜¯è¢«åˆ›å»ºï¼Œä½¿ç”¨å®Œåä¹Ÿä¸ä¼šè¢«ä¿®æ”¹ï¼Œæ‰€ä»¥å°½å¯èƒ½çš„å°†å…ƒç»„è®¾ç½®ä¸º readonly æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚ å¦‚æœæˆ‘ä»¬ç»™ä¸€ä¸ªæ•°ç»„å­—é¢é‡ const æ–­è¨€ï¼Œä¹Ÿä¼šè¢«æ¨æ–­ä¸º readonly å…ƒç»„ç±»å‹ã€‚ 1234567let point = [3, 4] as const;function distanceFromOrigin([x, y]: [number, number]) { return Math.sqrt(x ** 2 + y ** 2); // 5}distanceFromOrigin(point);// Argument of type 'readonly [3, 4]' is not assignable to parameter of type '[number, number]'.// The type 'readonly [3, 4]' is 'readonly' and cannot be assigned to the mutable type '[number, number]'. å°½ç®¡ distanceFromOrigin å¹¶æ²¡æœ‰æ›´æ”¹ä¼ å…¥çš„å…ƒç´ ï¼Œä½†å‡½æ•°å¸Œæœ›ä¼ å…¥ä¸€ä¸ªå¯å˜å…ƒç»„ã€‚å› ä¸º point çš„ç±»å‹è¢«æ¨æ–­ä¸º readonly [3, 4]ï¼Œå®ƒè·Ÿ [number number] å¹¶ä¸å…¼å®¹ï¼Œæ‰€ä»¥ TypeScript ç»™äº†ä¸€ä¸ªæŠ¥é”™ã€‚ å‚è€ƒ TS ä¸­æ–‡æ–‡æ¡£","link":"/2024/03/21/TypeScript/ts-object-type/"},{"title":"Babel ç³»åˆ—ã€åŸºç¡€ç¯‡ã€‘","text":"Babel ç³»åˆ—ã€åŸºç¡€ç¯‡ã€‘ ç®€å•æè¿°ä¸€ä¸‹ Babel çš„ç¼–è¯‘è¿‡ç¨‹Babel æ˜¯ä¸€ä¸ª JavaScript ç¼–è¯‘å™¨ï¼Œæ˜¯ä¸€ä¸ªå·¥å…·é“¾ï¼Œä¸»è¦ç”¨äºå°†é‡‡ç”¨ ECMAScript 2015+ è¯­æ³•ç¼–å†™çš„ä»£ç è½¬æ¢ä¸ºå‘åå…¼å®¹çš„ JavaScript è¯­æ³•ï¼Œä»¥ä¾¿èƒ½å¤Ÿè¿è¡Œåœ¨å½“å‰å’Œæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–å…¶ä»–ç¯å¢ƒä¸­ã€‚Babel æœ¬è´¨ä¸Šå°±æ˜¯åœ¨æ“ä½œ AST æ¥å®Œæˆä»£ç çš„è½¬è¯‘ã€‚ASTæ˜¯æŠ½è±¡è¯­æ³•æ ‘ï¼ˆAbstract Syntax Tree, ASTï¼‰å¦‚æœæƒ³è¦äº†è§£æ›´å¤šï¼Œå¯ä»¥é˜…è¯»å’Œå°è¯•ï¼š åˆ†æ ASTï¼šASTexplorer.net AST è§„èŒƒï¼šgithub.com/estree/estree Babel çš„åŠŸèƒ½å¾ˆçº¯ç²¹ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç¼–è¯‘å™¨ã€‚å¤§å¤šæ•°ç¼–è¯‘å™¨çš„å·¥ä½œè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š è§£æï¼ˆParseï¼‰ï¼šå°†æºä»£ç è½¬æ¢æˆæ›´åŠ æŠ½è±¡çš„è¡¨ç¤ºæ–¹æ³•ï¼ˆä¾‹å¦‚æŠ½è±¡è¯­æ³•æ ‘ï¼‰ã€‚åŒ…æ‹¬è¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æã€‚è¯æ³•åˆ†æä¸»è¦æŠŠå­—ç¬¦æµæºä»£ç ï¼ˆChar Streamï¼‰è½¬æ¢æˆä»¤ç‰Œæµï¼ˆ Token Streamï¼‰ï¼Œè¯­æ³•åˆ†æä¸»è¦æ˜¯å°†ä»¤ç‰Œæµè½¬æ¢æˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆAbstract Syntax Treeï¼ŒASTï¼‰ã€‚ è½¬æ¢ï¼ˆTransformï¼‰ï¼šé€šè¿‡ Babel çš„æ’ä»¶èƒ½åŠ›ï¼Œå¯¹ï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰åšä¸€äº›ç‰¹æ®Šå¤„ç†ï¼Œå°†é«˜ç‰ˆæœ¬è¯­æ³•çš„ AST è½¬æ¢æˆæ”¯æŒä½ç‰ˆæœ¬è¯­æ³•çš„ ASTã€‚è®©å®ƒç¬¦åˆç¼–è¯‘å™¨çš„æœŸæœ›ï¼Œå½“ç„¶åœ¨æ­¤è¿‡ç¨‹ä¸­ä¹Ÿå¯ä»¥å¯¹ AST çš„ Node èŠ‚ç‚¹è¿›è¡Œä¼˜åŒ–æ“ä½œï¼Œæ¯”å¦‚æ·»åŠ ã€æ›´æ–°ä»¥åŠç§»é™¤èŠ‚ç‚¹ç­‰ã€‚ ç”Ÿæˆï¼ˆGenerateï¼‰ï¼šå°† AST è½¬æ¢æˆå­—ç¬¦ä¸²å½¢å¼çš„ä½ç‰ˆæœ¬ä»£ç ï¼ŒåŒæ—¶ä¹Ÿèƒ½åˆ›å»º Source Map æ˜ å°„ã€‚ ç»è¿‡è¿™ä¸‰ä¸ªé˜¶æ®µï¼Œä»£ç å°±è¢« Babel è½¬è¯‘æˆåŠŸäº†ã€‚ Babelçš„åŸç†ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š Parse(è§£æ)é˜¶æ®µ: è§£ææºç ï¼Œç”Ÿæˆ AST Transform(è½¬æ¢)é˜¶æ®µ: å¯¹ AST è¿›è¡Œè½¬æ¢ï¼Œç”Ÿæˆæ–°çš„ AST Generator(ç”Ÿæˆ)é˜¶æ®µ: æ ¹æ®æ–°çš„ AST ç”Ÿæˆç›®æ ‡ä»£ç  js Plugin æ’ä»¶Preset é¢„è®¾å‚è€ƒBabel ç³»åˆ—ã€åŸºç¡€ç¯‡ã€‘","link":"/2024/02/27/Other/babel/"},{"title":"éƒ¨ç½²vueé¡¹ç›®è‡³æœåŠ¡å™¨","text":"éƒ¨ç½²vueé¡¹ç›®è‡³æœåŠ¡å™¨ æ­¥éª¤å¦‚ä¸‹ ä¸‹è½½ finalShell ç‚¹å‡»æ–‡ä»¶å¤¹ç‚¹å‡»sshè¿æ¥ åç§° è‡ªå®šä¹‰ ä¸»æœº æœåŠ¡å™¨å…¬ç½‘ip è¿æ¥å root å¯†ç  æœåŠ¡å™¨ç™»è®°å¯†ç  ç‚¹å‡»ç¡®è®¤ æ¥å—å¹¶ä¿å­˜ è¿›å…¥å‘½ä»¤ç•Œé¢ å®‰è£…PCRE pcre-devel å’ŒZlib å¯èƒ½è¿˜éœ€å®‰è£…GCCå’ŒOpenSSL å®‰è£… Nginx ç‰ˆæœ¬ä¸å¯¹å¯èƒ½ä¼šæŠ¥é”™ï¼ˆå¯ä»¥é€šè¿‡æ³¨é‡Š -Wrong æˆ–è€… æ¢ç‰ˆæœ¬ è§£å†³ï¼‰ ç›®å‰æ˜¯ 1.16.1 123456789101112131415161718192021222324252627282930# ä¸‹è½½[root@iZbp1e31bqkj6opg1bsdr0Z ~]# wget -c https://nginx.org/download/nginx-1.14.0.tar.gz# è§£å‹å¹¶è¿›å…¥nginxç›®å½•[root@iZbp1e31bqkj6opg1bsdr0Z ~]# tar -zxvf nginx-1.14.0.tar.gz[root@iZbp1e31bqkj6opg1bsdr0Z ~]# cd nginx-1.14.0# ä½¿ç”¨nginxçš„é»˜è®¤é…ç½®, ç¼–è¯‘å®‰è£…./configuremakemake install# æŸ¥æ‰¾nginxä½ç½®[root@iZbp1e31bqkj6opg1bsdr0Z ~]# whereis nginx# è¿›å…¥ nginx sbin æ–‡ä»¶ä¸‹å¯åŠ¨[root@iZbp1e31bqkj6opg1bsdr0Z ~]# cd /usr/local/nginx[root@iZbp1e31bqkj6opg1bsdr0Z nginx]# cd sbin/[root@iZbp1e31bqkj6opg1bsdr0Z sbin]# ./nginx# æŸ¥çœ‹å¯åŠ¨çŠ¶æ€[root@iZbp1e31bqkj6opg1bsdr0Z sbin]# ps -ef|grep nginx# root 600651 1 0 13:57 ? 00:00:00 nginx: master process ./nginx# nobody 600652 600651 0 13:57 ? 00:00:00 nginx: worker process# root 665038 658796 0 14:35 pts/0 00:00:00 grep --color=auto nginx# éªŒè¯ä½ çš„nginx.confæ–‡ä»¶æ˜¯å¦æ˜¯æ­£ç¡®çš„, æ–‡ä»¶ä½ç½® /usr/local/nginx/conf[root@iZbp1e31bqkj6opg1bsdr0Z sbin]# ./nginx -t# nginx: the configuration file /usr/local/nginx/conf/nginx.conf syntax is ok# nginx: configuration file /usr/local/nginx/conf/nginx.conf test is successful# ä¿®æ”¹nginx.confæ–‡ä»¶[root@iZbp1e31bqkj6opg1bsdr0Z nginx]# cd conf[root@iZbp1e31bqkj6opg1bsdr0Z conf]# vim /nginx.conf# é‡å¯ nginx[root@iZbp1e31bqkj6opg1bsdr0Z sbin]# ./nginx -s reload æµè§ˆå™¨è¾“å…¥æœåŠ¡å™¨IP(å…¬ç½‘IP)å³å¯çœ‹åˆ°é¡µé¢ è‹¥nginxå¯åŠ¨æˆåŠŸï¼Œæµè§ˆå™¨æ— æ³•è®¿é—®ï¼Œå¯èƒ½æ˜¯é˜²ç«å¢™å¼€äº† æœåŠ¡å™¨ç«¯å£é…ç½®çš„ä¸ä¸.confä¸­ä¸€è‡´ï¼ˆä»¥æˆ‘ä¸ºä¾‹ï¼šæœåŠ¡å™¨æ˜¯22ï¼Œ.confä¸º80ï¼‰ï¼Œä¿®æ”¹confæˆ–è€…æœåŠ¡å™¨ç«¯å£è®¾ç½®ï¼ˆé˜¿é‡Œäº‘æœåŠ¡å™¨å¯è®¾ç½®ä¸€æ®µåŒºé—´éƒ½å¯è®¿é—®ï¼‰ æ‰“åŒ…ä¸ªäººvueé¡¹ç›® æ‰“åŒ…é…ç½®å¯èƒ½éœ€è®¾ç½® å°†distæ–‡ä»¶æ”¾å…¥nginxç›®å½•ä¸‹ finalShell æ— æ³•ç›´æ¥ä¸Šä¼ æ–‡ä»¶å¤¹ï¼Œåªèƒ½å•æ–‡ä»¶ï¼ˆæ–‡æ¡£å†™çš„æ˜¯æ”¯æŒçš„ï¼Œå¯èƒ½æ˜¯æ“ä½œé—®é¢˜ï¼‰ å› ä¸ºç¬¬ä¸€æ­¥çš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘æ‰‹åŠ¨æ–°å»º dist æ–‡ä»¶å¤¹ï¼Œå†æŠŠ vue æ‰“åŒ…çš„distæ–‡ä»¶ä¸­å•ä¸ªæ–‡ä»¶å…±åŒä¸Šä¼ è‡³è¯¥æ–‡ä»¶å¤¹ä¸­ ä¿®æ”¹.confä¸­è®¿é—®æ–‡ä»¶çš„ç›®å½• 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849location / { # rootåé»˜è®¤æ˜¯html root /usr/local/nginx/dist; index index.html index.html;}æ³¨æ„ï¼šnpm run bulid ä¸­ï¼Œè®¾ç½® vue2ï¼š publicPath : process.env.NODE_ENV === 'production' ? &quot;/meal&quot; : &quot;/&quot;})ï¼Œç”Ÿæˆçš„è·¯å¾„åº”å¸¦ä¸Šæ–‡ä»¶æ ¹ç›®å½•åœ°å€vue3: base: './' ç”Ÿæˆ ç›¸å¯¹è·¯å¾„ ./assets/ (viteé…ç½®ï¼šhttps://blog.csdn.net/weixin_45822171/article/details/127275984)ä¸Šè¿° /meal ç”Ÿæˆè·¯å¾„ /meal/assets/ æ‰“åŒ…ä¹‹åindex.htmlä¸­è·¯å¾„å¦‚ä¸‹ï¼š(è‹¥ä¸åŠ /meal,ä¸Šä¼ è‡³æœåŠ¡å™¨ä¹‹å‰ï¼Œæ— æ³•è®¿é—®)&lt;!doctype html&gt;&lt;html lang=&quot;&quot;&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1,maximum-scale=1&quot;&gt;&lt;link rel=&quot;icon&quot; href=&quot;/meal/favicon.ico&quot;&gt;&lt;title&gt;today-meal&lt;/title&gt;&lt;script defer=&quot;defer&quot; src=&quot;/meal/js/chunk-vendors.0833686f.js&quot;&gt;&lt;/script&gt;&lt;script defer=&quot;defer&quot; src=&quot;/meal/js/app.31f1556d.js&quot;&gt;&lt;/script&gt;&lt;link href=&quot;/meal/css/chunk-vendors.e18646e2.css&quot; rel=&quot;stylesheet&quot;&gt;&lt;link href=&quot;/meal/css/app.8bd79ca3.css&quot; rel=&quot;stylesheet&quot;&gt;&lt;/head&gt;&lt;body&gt;&lt;noscript&gt;&lt;strong&gt;We're sorry but today-meal doesn't work properly without JavaScript enabled. Please enable it to continue.&lt;/strong&gt;&lt;/noscript&gt;&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt; location /meal { root /usr/local/nginx; index index.html index.htm; } http://web.czhhx.cn/neck === http://web.czhhx.cn/neck/index.html location /neck { root /usr/local/nginx; try_files $uri $uri/ /index.html; // å‰ç«¯historyæ¨¡å¼404é—®é¢˜ï¼šå½“ç”¨æˆ·åˆ·æ–°é¡µé¢æ—¶ï¼ŒNginxä¼šå…ˆæ£€æŸ¥å½“å‰URLæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±ä¼šå°è¯•è®¿é—®index.htmlï¼Œä»è€Œå¯ä»¥æ­£å¸¸æ˜¾ç¤ºé¡µé¢ã€‚ index index.html index.htm; }location /refresh-step/ { proxy_pass http://127.0.0.1:7001; # è½¬å‘è§„åˆ™ proxy_set_header Host $proxy_host; # ä¿®æ”¹è½¬å‘è¯·æ±‚å¤´ï¼Œè®©8080ç«¯å£çš„åº”ç”¨å¯ä»¥å—åˆ°çœŸå®çš„è¯·æ±‚ proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;} meal: /usr/local/nginx/meal refresh-steps: /server/refresh-steps é‡å¯nginx [root@iZbp1e31bqkj6opg1bsdr0Z sbin]# ./nginx -s reload è®¿é—®æµè§ˆå™¨å³å¯çœ‹åˆ°vueé¡¹ç›® å®Œç»“linuxæœåŠ¡å™¨å®‰è£…nginxä»¥åŠvueé¡¹ç›®æ‰“åŒ…éƒ¨ç½²(Mac)nginxé…ç½®","link":"/2022/03/12/Other/nginx/"},{"title":"å¸¸è§çŸ¥è¯†ç‚¹æ±‡æ€»","text":"165d50f05814027fb7fe5e4ae8a088d829f96e3a1515b3df41063f132a3914ad9b36fd3758d13b07932d7c1410f1e84b6e35ce0794f98d746a18571012d14dcbd2ecda21e7914dddd82f7e15467ebe58bab0651ee3ce91318056e61547ce77833d0b54753e0095b6c2ee6cac3879645afc074cb758ca4ee5b928d8752283ce95d37cddcf7fc66ea2a40f080db3f8471d4502264dbdf8723f36d60061a33c01cbe8468d93ae7ee409d6ef9d66bcdccee73a95bebb2e87996ecac9e441e41ee6dfd9ab850412d461ab9fcf732296412e683a3df4ed71a6e5d745ba6ae7046b0e7546038712164cf61a196da9d24c637c2c380f1a2a7bd1a67d387b252517ef41f92b0d3582cb65e5d283c22ed3890dc890ed00e429550846d457a0a3710a4f39edc74be1813da123028437f1bab8d6aeeaed7fa559fab28a39eb470db12fcd6086ca65bdd412ce81bedf7db9abd83f717859870ecba43480a26c1bf3b287a27a4b8cd2dea1f59b9fade4ba079311bf4ace46a47f53b8846279f73e7ee04c2d5de4b96feb3a5a01a96e7edfc3aeeb6f3481e8749d890515e7a3fe64919f33df0a732565b47fea190c8d66911a7e0c103a59f38a10109b1f8aa91c84f17b66685fe233101d2ff46e3791fabcb131e5801c11bc7ec29426aa88ef2582b09033cadc80075071268cbe62e8ca2b06d5ad7cb53f957d5b317e961c44d3472f1c732c0a21e2b5f12b23a119e97c0ddef4efed8ca249955062db9aedd6811dc8ff9fc2248a3414690240b0f515946d8867811d922bee63041def17f009a4ffa1c31bde267eae050603caddad1080357882eb606305a9fc0b684ae71f62a77bf2e4e5c7fa0288fec9dbb3ad2429975fad16169da9db429f10c10a3d6cd93cbdd15be8fcf376af83c44f6d10d1f60c997fcc55f1db8c6bfb86243265dbe4ead48053d0c75593d5d1be57beb332970843970b2f8e5b82a7aaffcb6ed2faa1e5496f21992e0f090d28c3419940057ae0e020bcb9ae82bd74c429e43e9431923fb4c81175cc1b2dad3b66ab10c5ad37fb98d10cbff5f29c77fca1908a9954599a5f6c304cc3ba181e755b7850294dac448caf96b60b6a2d959675a8113222655a23ba5aabd46a94fd97717b2c431a3b7f400c9ad398c072c9fc92a910903d32329f9067d65d6f1185604c5d4fb3c288ea586c0efc7442914ace907fcb548b0e375a6abbba5faf1073088686fa491b0357b58c0837babdb4be17f66cdf8b118de940643f56bd15cc9516b0438edf4d7ec89b713e9ee3bd5828fab7a237bd36dd8632e849d4bb806d135f4b6069f83226018134c41e079537dc0fbcf6de7e52fc7acf1f518ed4d608b01f61b67a15dfcb766976404c72bbf738b39998d6487692b20a8c415361741a605453a3d26f01ade617f1e5acf34a7e3cc0fdd7f6beb8f16b55570b51555c01e6bfe6e307f23463e1dfb4ab70bec2ce7d96997f650106be9a740da4ba92ce1cadf643279d58ab13e89aeb33e9dab28eb73a708311468abd0946717800fadb6883ab37ce6219d119f03545a409b811ef535a330297682c22f5646e861edfa68f2f05e1bb8c34e7dfe082e07d587dffb6cd8dee386410e639135f9d3a02b995251bca190180bda58e65acef13a0c6502186d84e6b040062a9fdef8c0ba4f9e8161e623dd54073ed4cae0e493357b05d604747564be0585f60a3630c42cd101e988ae3b41cb8f4008b35cfa50eadf4ada1d8f24714af9fba8cd3316af3c14dbb9dd60b20f79898cb7fe8d4d74be99d6a933e31b9b2c8abd89057bbee36ae935a65b6e98b307f5e5601716395b289218f0a5de8123e9d826d3d508049e1ee10b76849f5cad3a76f793ab2bfb53c2811481f555adc72587ccbcf9251e08a889f433b88130af53ba1c252d6199c268e9db6deaef924915b96858da6f04d32f9995daf644b187d7eecef4f48a18f5c00e0061f0467ce3868005c21befa90379def671acb47780ecf679afdc28688dff80ce7f5e5fdd614bd3670d672e4de4ae6883180c00c28112160daebe76b856ba642137d17e6de29bd3dd93d5c05a5851b90d14987211779ec3540a4d6f615dcea9bca9feeef6fbc2cc71ae4e3312f2725f15d5e7a92564c3805bab8b6223d49d05b6764fa522c93f419d7bc604bdd4a9bf2e65998d247504cb902e0a220e280e1527ac90d2d5cbe3b1e352f1eacefe374651b87ca22aee315011de6d9ea9e5179618c316a1b3f6ba1d60a80f34a0c3a70d26292c2de29c22797b031f9f078c81d1f79fb62cb8360585ae9f7e4ca2d38e466fff6f5c9f1b4c857865a0572e1942f9ef32554c8b9655349fb126f18e5433ed43045b7bc9e91a37e544950f7961f8fd23d401e6ed62c4acd2016dfb615920ed1633da12e0410b4b5e3788f3d74eb7bbc694bd42cf5438d2e7b11ddc00913cf03660155e0f4ad03996dcaf3d92e8aef2d1ca75a8da60194292e9c13cf861a460993368cd3334b33efd13fcd262aa6bd7819e219ad80b19cf6c3562b02b834939d8c62903433e6c6961704dde028e30f9a4fc4c6573c4782618ee44023e76d1c127d7a770bc89f5c7eeee6a654c992e18737b58fd197bb46cf167b116555b8b5c4edbaa7aa6b7a590d0fa255cdd141805d97de7e4d692ac85700c9e0e1a5ba0f223f4fa0b4ba35767f1ecd7f67a434e1fc5942fc2cbf9186333ec77b844acdc1fb1f1076b47c3eb3a3b60706f4962e2dc981dc98654c001132011c45c43ff814ffcb3fa30a497c1d39aae17ff569a9974a200863955853182fc0c20527507231fb7db27b07b25d246b0cce54f1e85d5bea507f5b594e055e4256aaa890e17ab2d4e6fa2f0b2a7bf4e682ce91c35d3d8b6a95d095cbc694a9dca0b47931f9e96b3c4bfe399fe4c201c26b2501cd813e9ae629db4e18b7f4e4f3fd724ec18185f7cc75064ca957daee4379dafa655abf160b3a56151eb08a151225132a9b0e3af710eb6a82d2eda8cdfe63487b5952764d103904044d61eab093b394433b77535e42c136452b636cdadc37c4be7c37b981bf249595d7b48af5d2609e3cb5492bb600ad6b15639fea6be26bc5b4ab756dc6f464482af427d548f2449b6a3130421cfe38db838ee79d6cb9b8e3e620809cd6fd88f2bd5dcce79a7c524b0cadc31389dc8c68187f9275ffd5b70b76132ea8e4f0fe5cf9f5380e9da07c290282b13171088da6c9ffb2b2eff6271e030dd2f281fd3edc64f0fc97f9a5ec67dd147992e4fdfe5ee592a875c2db46424b8d23d7725c69aeb1eae17aa182de9a89cb70d994058ce89353facbdf6fb646e1e0f4696927de063d69fd75a0ad3ef13701fa661b0fa1714a2e814949c3e6e15ddf9a0d9ba5929a1e216b6a2dad5816be46569cc870bb70c5f1a7d09334d0ee5d4fdd041e96a722a45582c65faf89ad6c08597bf39de8c2f0f12643a1e30116d3572610c7c5dd14b2d8ec0ba1a004fb8a1351ee404cc6bbcf67676fb973c81a8f0b22011efea6059215adc3eeb26ea9a83ab5a13aeb870ffb3eda1031ec309644fcbbfd8d399ec8824a00bad2af62fa627366c2d807b042d8da5496025f18a71316e2f4efdd187db9fa4ca743ac6b877fa32cb17a04f38d0bbc5714a808de632a05319375979c86c9c90cdc25f7e0cfc4f7c29ddd6fd8dd47dd528021ac3bc92d9442f302c4b74a018e72ba56c38c35ba5b781ba9c204fd837c88a79b07a898fb77029f3c9b6346e9a40c4d57132656113473b493fad89b0a64dcfeb6239bdcbb72db31e24747f3ea2d8fae772bd17f6ff964f68b6923b63d62167686932e7a463e9dda698d4bedafe910c19657c578685e4902897ef8e96e3d65aebbc8b1baca5e287dd3915457b1903cee4ea2693c4e568012d0469c8a4a7de62c61adb28cd35d41a85cb80b46023cc83787a7c9ab5a80ad0699139580cf33949d937c16494c115d5d45d68a6a8dee9289421550f1ba4a2a3210c3e2eea2040469d43625bc8917057016ec7d7abda28a0b1da13a8efe1aa344b1a13d499daa2ca9665cce5d74fd5e21179afb3f758117894624bb4d7660a6ed542df842c804562f73db0a64a0e9c659d4f231417446a52dc0d9bf53e7cc7ce5636dd060caf1d986053f04a38ace2554ed8ae865840c55cc3d94fe323096adfd27add548530050aa1985c00ac755943e17a710e4a196da5c5d6d936e1f7348753c7014e6489796f2e464d842e7b85c6c528f79fdad3731c7ef13685cf56cb3472d2e64bdccb1c134092c871e3bc5fc5ba3d96801463cf30778336489641f5b0d466520fa0f815bf14f28c478866503f2043f5f7032d69395a3c9ccc65996a05d30a1630a671a95257c004fd717c260b9b613bd6cb6095bb49fa9f431020f055d18f92ce3476e15d5250baf38bdcfdf774ce37255a15bf59c5b13fcfe77c2e87214e0e573dfa35fb95a1116b097168b131cc44b5cdfaafde2e8b9e1e8447c42aa1500c65f1d3ddae40fd96985e7f8ec3ad27ee445a0de227947db32106f8b320e6e1c53984b8e30a5d07ae19f65dc3afd9a096a6ea21afcd173c4a8d112b996db35e80eb491a1cdab6b980d3d17acc3a26fc90eb2fdde3f54b431fe0f38ac9ff4c9c663465b1a16759e0c49e1374663645ac7511bd4189b88534a36414b71bacec07ca6f48cd7d933669d4170728adec0b3c7fccd0b506cb56a1d5d1c8b3f11bdd553b0efb013777afe64037bb151a06da9eb10c6dd884efe1c5840664e7334155031702b9fe226e01fc82be7850c4e5af30da1a53ff29a78bc897535a6cdc703663c9f86343d5d4e6a8e929c8a60c731a2a652e8e7d173ffc2b7d5ec67a52202e390351aadb4928cc164fff01e40a8fa4c95d960290feae721ba942cf57c7552278d528f0971452e31845458844090d54ba1e8890d229e0567963477189184be8e90312902a8d367412a76f44286c7049c7e027ea5091c8d8d07860212bf42cd17bc3fbfa356ae7e8580b0647a52ab969a6421c95294365da21cb515f80eabbcb926a1a9d1cf736ebf18cb6b766af431dac6e67888e1f2dbe7976c7c85d36eb0942481e017a05f7d22c474929f0cec3acc6ee7b753575998eac13bf2beb5caa3c757ddd9ebe969fd99f677914792da7eca033eb3114c0cc1b244ecde429461abff378fabdbf3b531eaf78490377acbf4dbed2406c52590cf2df79caa11e564224543a7ef13afadaf71126ccc625d994c1c32061f92a3c4dd2b6f691495bd551ea335011cd40d5038c9e835d797b697848bead6c181b5c9198947cd50dec63f43b95821e58e0223d73e5df9307b945fca89ba3a4f3f8ef910dfc0e661d7dce9485f6b9ab77c17704b1ba5a7c0d5b84a6d52c0c5a1b0b73a935a9ab58b7311db8ecc4e150504cad9f6788eadbcba376826a27575fa0891977838260f34d017f61801554d7e8b7e26849dc6562428b65766d30e03e6c42cae9d5246a4e53e717d9d7c35b99caaf515b42c17d9fff5c3c30e9085092dfc84c3c61c3c8556686e2f2f8eb5f02517b97282bd791272b5a7814b53ed3d9721b270265243c87be48f717b62846e7aa9b12107f1ed7d810561953ca5bedbc45565c9f19a80a0962872c25b86c5f497b31c3a2152f316440d751e2e48bf3c7e248df6931382c52054862c2c157f49a47ea00d6a6e7a64f343dae4902912607c7ec215280646bd8251baf2c2a859eccc7547adb0fa2f21ab32a0ccb4d0ec727abefc3df5110f61263180b8980c6dfe473d35dd2e21a7dbe630994b155108aab51a520805be37283811e4287b88b7d76da2f21f9749225e28ba5e87c97cfd9623c9247113040f046743fed023159e479c3ad75fb2403c8a6b85caa67976dac26067df8baee2fd223e2101cbe35079646cbc0506e6790f4cf377c645b1350b52ddb3db8c68db628a32094216643cc07e3f9e70f2d85e5bc85e0e776f446cd78a3361cae26e29f6bbd0eda15b6c04aeef66d9705acc46b169c0f370ade97f032ea7eb52995d0949e2e095b6d7f75e84b8246a3d4049d4ae7d1dd4d60ee7a634ab5b0472db9ab6da9c5814d9ef5e393a53721e09d1d40eaca07f27923fab808b1c0e35ce075647f85a05db567be447410e63f928bdb0c95654210bff21d728e796f93596c591708d1ec12f5b97670723fef6dc2e53d6728d0d9e3e834d5ead237cf6633aea13ce83ee80ea8804b8b2b39c866df1da970499c9748f3e9ea3e60e42c272598471581e43e5009806787db6327a62b0474c0bc7ea9d149421cc318e22f1ac1a7550750447ea44cb53c27e252bd8fabf081a19e4b67e94eb8fd36462c4593c830d48615d943c3f227a8fe097c241d7b3ac566a7bdab7637976323f2f8f6f287ee44e67574b6fa3f6afd97e6af4b083161e454947eac87d024dea6782cd3e90378633fb238648710f13310b20f87b099f2062aa7ae0def5302dc17b59b62ac7a2a9c4b8a179bd129e76756a1250acd9964ecc69d07cbfe777711041a070101824c280cc2ea6189f0134fd55e4a6d0c4c7f1dd0775ae579a7fe8b25b58320ba3f335ee4013f77078f9fde3c18aaa844f7967623782c758b75a8e1c11b98d5fcde5d929d5303316872d8d2c12073c10ae741cf6d98b5fb9b7b6ba61ffe92fa23a3d24929f8d1d13b54697f0da134983e4f47910c2443be95565444108a0debe323a5a70131e998a1ce4952ac65cc937b0d8d9e8f6b650f974929cce92b2205cf3db92999e3df9f420361f26debc6b4814d998d88381ed7ea438a2ba270b7b00d2845a9556006cdfc37a739d24da1548093ec56b70cc1b07dfe00fe792b3284dfca8a66b453e3623ffbe557b78a6d1a6e2e8a409b3f1d8019530198d737d806b87f197e676c8821d4b3e4cfad3a61e9a82f3c92a42a0d752eac15b5ae3fc250e02cb412e7466fb5aa3acb2f217903fbefee40d2c9b3f27e67eb6fc24e94fe99c337f02d0799cb5b772737d2c1b50f7e442c99ac800932238b062fbc162afa4ed1d1d2ae162e518ee811e75a7bc135a5c9c3bb42ceae5927215c064db0969a6fbb16462998e62edb7267c5d7fd13ca7e1fe87dc7a4991078bc7e70af5f7a29b5fdfa774dac3432b6ccbffcad9d5a7d785496c7c8ec47e43c4cba5069394778d05830fc476fec7794e25b98adaf9ac54a40c2a393fb037d306018ea8e0286ed06bff4ae819781c1e00141ed2e2ac066bd5fae171462864c091b7890d777ec4cf486793a0f685c68bfdbe2831c778f16338725d5cb2a33498d1c013f79a3afa3e08efbcf4c6a1ab4da0a6467513f2c5b799bfb53f03daa4f0ae819cb1fa3250fe7500f800d41e54cee54c699bd04403471027957e63c6cba5df6a26a39b8d29a7c9cd59ffbdcfe06b2e861d9a0c74032f174ae6ca2818750d3ccd37e16c34efa72383e177e2334a1b97dfe19112cf8a12947d9034f5d705eb9e298652d2f2d7483a60b63879c512ca26351e1a72b71a45378c2b9d68071ad3f651b7b18d16818cf9b56a97157d75fa04bccf73f3db7fde7f8623731732f2eebcc0bf9b3e88e3462e86c7b09a946401c0ec0f1c6849596f7531874f545d26257232668aaa75855813cf2416cff7b02fce7db49eba6debb42d0538eb3d4d7a6a69b8c180ccc45228de0a51423d14c5a009e7ecbd4a12afa1d31d57dbb98d6ba09a683afe0088edd6b8f9afbd299ea975accac2a0a5ad54091d93df39855eb55fce89bd201321bcff84d5f05ad4d1268bc6995a29f6d4c5d384d8eb1dab719a5e84de095ddd2d286f13e393aab482ed19395b15191201f32a60dc16c303234812186c04837fdacf99391cc130a4cf40a2e0e50cea796f0471dadd83bf40ba8b795e55fe6352c9da4042eff7cc18a4c1710e60ed757015c766951723e2a8b3068dd99a514dcddbb02c2ddf81e6b0fd8986b037d8b691c46435bb747a2028d212fb53e6a762cf573eeb9eb30985a43995a93fff1dcf3228bd9011253eb3d25840b3717af9539ad3fb4ac448e0a93f900f711d0886de6f9f78dc325cc0394b5619326d22d2047f365e84063504e4861b0e9258aee5c7a284f0dc7bf745e58ae4685d901186461c21a6526bf3404ec823c2a2de5bae82148ec9a2a72bc412fcb2183c332f0feba697762eca58fefd7e6202b79708c189798308bcd53d07f2a4b8ae43843fc2481a731fe0abb5b20f9aae6c2882f5cc6163ce694430c2b110d6e347f5b41fb981fe5e2ded6afb4f01cc2fdfb5d96d4681c2fa8ba6755b85662d2a05a400295527f810dc07872e4b078bb46e04a97878d15d257568baf0e305643d1228e95b354babb7b7724810c6e1f7663d395f7f557b403f44e5772a08f58c85e99352c18bbabf60f63d9331999d9abac5adb280724cb4bc9ee9042e5e1dbf15a14aa5dc0ac357b2fdf6c990e23b11b84a6da1428a2fc062be3ad44bc624acb51f95af33e6e5c64bc9d452d18f5fde62efcd55adf0aa9df1aa8032a703374d81cc04b7ecbf5bbb2beb7eea7bea128cc6eae15bc78d8c5ce7dbbef30a2e45ebb77031424450d32ec11af708e804f881a906e4fe913e5675e2c82fa74b5fda77f4fefec121894f708eda586be04422d78487e1d25f5047d33f7a1c06aab3a1c91bbd9c0d7a5022174e3d90a1e41741a4b0a89860e8b598ec0c11fa6115c6b91cb531ad6d9f10641cdde4aef1ac5b8de42257f33f0b248c66a38d372a32404352a78625f3edf8d655bbbe39a595bbddc68dad6de08e2d0c4a59899caf953341c2cb246cc92649ed9ae4b29017d6c12aa86c0a2b76ecb739a76afd7479da900a1fd05838233d1c71fba3955435b2a6eadc3fbf4f316e96356e6d2ca1169c6b839dd11f3baa54672e29cac483bd18464c7bb84b290fb9861e96e7f3c94cb64f7bffbe62a88a55478b61043150cfe81c9d7d1f9f707dadc8bd0180fa9369471ffdcb447c9433ba98bed993ac2b1d2001c90add8b12f983eff91439d7668a3bea957c9f6d76f9ff5db6a8753c1057f28cd0a838e6cb83f94d1ef4257dbeaca23350781e4be8d73d68d7848b166bf3146023581f262069f6004b153ac5f733127dfae82ddbe9f45dc642d905242d06504f1468b5af87fa3c6c3e6c5dbd2ff111bbab875df3dcda0132dafe0513ee6677a2c949c01ab87c74b639d0f6bece31513169321ced23195893f9adb2aa2f27de4aa79508761d7ac483cc98b387c968b92553093f739728115150a6f23ad996ba7fbac6077f7b52361eefeee8959ce1d57965b306f81376bacf63b56f5c96350e8dfd8065d7dbcd67961ed97d1b701c6c09cef470104481b2b9acabb4a5f9b4bc3db83594eb35fb682b2d9dad9bdb7248e95ef2c68a14acadc4b99d7cb438fe20153a7f41a4f3ed47a5a027a07476bc988d171d240a8e245bebb0219ccd010789f5d0adc6d33753635c86cf117116f11d9ea9dd00bc4d7c71c2267ef4053a83981a0567f635138e8c2539cbb4e106a3055354384476bacfb173fd68ce0fd1fe4947b3529ce0ceb35809dd2dff2094694f2f273c3567c062e7744c79dbc4357a2f7996f371fca011f853cfbf4dad2f817c73c4a3499b2edec1f451a18d24726199e8d172ba0e6adba43e220462c80ab7c770630d3bed3c92eaa042e328c1ba50038a00f90e915659507c29d34f56e58b90cc59242bff25e923989ff139984bf667456f26d8a2d2ca695a9c08143dd15c3e85ffa21cb87d75d1b1639157c10ff5dadb5974e733295df2e4192e032c21db1d823fa9bc6dab131068438c868b0ce5349d59adc6d64a009c173c7965a0ec6a1307b4032d925cad29a34b27296ce19e0d3273d7d5d216e1ea3173ffc8914a4cd21e3312730777a46249f8063a8f4b63ec7b14363c96cca279d2d92968f340006b8e0d2d84c37a9c9770484e9b726f6385ec50f2fe0b89d06ac2e9ebeb5475ef7580d205c15f645effc340e74e439fd30d1ba277dad9a090b0786a902b46941a281bbea40ce6cf7a3a96988adb4b119494d96daec4bf5368e40e49652f4ad6a64b87bb96d4ec0ec1181d543008c61a9b181166c5ab0d91e2b0ef46249b84af0f8fb0cdaea248cb4dfbd7b571270bfaf6f860210273e9688ce05ec8d46e32ad2bc444a6523f5de94adc10c5c9d73c82a2e7619ab38363d4e5faac6924f4c3a25f349f192693204eb3e1f4646e5f84512b3e92837b5f0da4bb0eb042073a0fe7fd20798d8e251f44236f7a47f2b768a68062d6ba56bb8ab2c12bf2ac247eb95e20dbb9e3c9908f7509a71781cfaa38e25d0c4d41b286676f87c62453e72e5839451c945d03b545fa7bcb1449aac60876c1efcdb2630e86b6a6b95442618766285194d09223b705dd1e09c5996e644a9bedefa2185d14035a79bb9fde91f77fcee18ce2ee1eb61a399c5149ed82465c7fa531efd8844e1f6430fa02f74a3deae9e7b71c0ff12e85393bca736f66969faa957a2962e2238b27b9f693435921aa6c65ca56da4220d5fa355b075a14cdbe58970cb936d53c7822e7f60a758c4d5f7e3e09ec16f54e268a9463e6a1226a788f275f482de0ea1b94344caac8b95ed304791379d4cee3105459b443456712c26d20de91a54630f34e810b5a8b70592f79de61508622e3c373493081cba21d88053d1d174f2172be2ecdf4066d7ec8e3fc0993cba14772580917e555750f3be3780cfe78174c5d585c9d96f336111f29316bc9e860e22b4004323dab8ba65fe549b318a6ec9f0095aff05e678b85f7aeefd50f0d55d6990b7c8eb42a31ce6221fce4f2aff01019771fa1b8cd60b607b91ce1476983096c6ce007b1ff49bab995bab6fa3186a97492edd8ab7410321af7cf0b8b526aeaee8f20ea5b8f69133e25282b880bc84dcdded139e8829d45afbcfa4bf5f8d4311cfbc2c071727421cb8b64b9e8132143e032fc67690adc1bd0d2fd2d98fd7def77848c91c8a6900d652f8f0e85fd6c4f7282f50a2498c691dc88900658476821d3949a29c25de037ac24c921706e68f69d40a8fc37c26a3dfe4d1a3a52616d04bd3aba31af98ed9272c254cce3a2f52a7924c72538104f37dff37f8eb86f1b07b55a39e87fcb59a2bba4726c2230431c59047ac23c8450b1412849c21130b477c4206a5cccf45a62bfb8edf6f5e70c17e5aadc7e4fe26ab480136267420ffd3cb1db09a3c05c810b48676dff22d2c2f842086750839727893c19ac4ff5be2e9acfdac57c0e346b4db182bc7fec9f42e7d964fda1389e6ed188bbc220f7f4cbaf3748f8efe39229db6dfc832b9e30436b6fc6dda32ea2724d3ad2f664d6fc110f954dbd327ce355be7723e3770bec8ed2596aa98364665e2997e613452d21840d8a211d6c4749c4d7606a019f1939d0a9ba87c5e056999d1c10d0b4be15160e813b5b31da276243873e48a5145363e0246c2ce1e167f08831f30a28cf0a76ed9b0c148363767b82560889fb00c43d5cbd663221c031fe09f77bad730e156c58c105772fa9b8008459f36532140bbb9654d4974dc9eb4a46a34ba041de533e8bad7f08155e482f050376cf0d59df45dc565fa7352d6a9db408cfca9348ed845f97ee2c8f29d44b947a9acd77dcb9882c7b7efc4f69a9b363533b4f9fbfc341a823616d6294af79fbbdd10086c970b3cc091b06d91d5741a17f2f63f2fa12a147b0496a0f1217d95a53306a5cbd82c8e774156ee50af55ae98c77d3e53ab38dddf39e84d11b1a772ff9348d235a9e3e78b6bda59975c223942aaa6c9a49345b7f732dc81127be670def9892ffea3d04440308766037a2973a61643ebad2490183652e0325ab5e5b06849a8297d1b8c778200e0026e6ca94e0f025c3a52f0d8b933d3fd112b40d6195d0e4fb1202f5f03b4a0db28851cd18582fae0250bfe5f4f551e9591b4a4b1d52ab336d5c48493ae49b958ee0f2194dd787d25fc62a09167856f49674227c4b7e22e4e9fb1d2cb5e114de9776b98889f964cf8f94b90be013fd52d394831469bf220273a4a7f33c4878dda12e9b28c965f962bd96d43d13608d9bf5d5417b59b01ab37843212ba6e22400b821c3c1140c65e07abb0987136d0234d144944f8e6801494ace14ecb925daa0130b823d549f2e5b79f2ed6f902761886705b4c6bbd6bec58969d9d96313726b8b8d61c266bf07daf1285f34f40c5282c49f116e75350091f140afe473df900470a64b946140449d495dbb8ec0265fd00f98406b1641501583026dd0d6ec9b057ad3cb40db1f645201277fcb5a060611d38d16436b38a9992b0cf8b8a58fd6c808c851259c5052a47604ecba1be9bb03fb58c435409ce0b370dae89e24e041e74ba995d91468a7aabfcf1d9ed6a2d201e447be19f32ce3b5b1ebe78aa3d6c5caf9a3183b33f48cc5ebac7e81c2a109454ab88109583ef6cb2552a5cd6888e5111606c4f631ab257e291102838b15c2062aa22a192a20302adccafd62547d0e54b774a4415f6a4027d9f5f118bc0568158e921d6a23e27411e558c9bc438785a6b70f18fa352f476f38b9cbec9a6962575e6da4b2e21a3f6360f079d8a42487a44cf6166ecfef3ef52b987c71edbc75ebe43d06662d41a5fe0f4518552a48cb5c011fe43972527ec85eb3d77b4d5667bc7a1d51afa84461c397ef2e077367e075a8f0c8693a75d4158d24bf7d1ac4e1d1136b1cadc912081bb5876347cdf6f889b3150fad4a05eda7b723714893e42acda090a526f7187131d74435c58d0f5e6bf69c7b262ab0e191caa7fe00850c02a1d6360642d2e1ff1bf4235c4d0b972106146b85927622b723755e87138e7cf791864e8e79e403ca9cc8d1646ad05f714a3cf10e9f262254460a71eab81eda69e661437d0721c948215d1d6a0e65f3229d205032c023a9891c5f2e3722bad2341fb609cda02aec477b15fc9ac51dcf428072b595552991a9c3e703b745fa00efe86862f165e3d4b7c108f00cd8be8400baa7590ea513179817bd5e6a290a7be62b9450682e8a7ebaff49ad130108e065bc38d4f3386ba07992587116b740ebdea5552de935f6737ca2d66c174b0c3417d2b3b469f401c51cb60f7078dabccde2e4b84f972b8bffa505fec329f47b6cbf0aaff77af80ef6f97171a69ec4f42ee53ae025794b0d84a7764fecf99362d97e1015e0908c0eb4ca2e844aa359da57164935458cb19d37efebcf033a836d14f65811c043184c5d713e59931a0540c23346b76376eccc71c0b68d27be2e27d3181da0f5eafd2d6f3f164f60e4f6c83b9c98839083fbd553910fa3a47198e7695e589911454856b2d1fdae2d61eb9a428100af03bdab1feb34771a725cb812b88d9df7d3d7699775a511584346568d1348a1b57b3b51bd339655402866c092db9a3cbd896fee251a25178ee6fda62c8d802ade6d7a023456644e283c6e347ddcea1a614cf323a724258a668d3b5b05b981adda85c2e843a0250c67d31f3929bea43f820e3b85e6c31b4dcacf817671c9acb2492e9192d97ca2c95e7e1ad434af3ce961da5da508f441cbdbc69c8937d6f6e0b893165733ed2211797b5a18580319a6029cf8f4172884e842475432ac34e7760c876562880af63493ba405974be51b6c20f7ee686f61f4d7a7070c788780833aa004d8a024740c7727ffb0c9d2a5565448b2da29dd3a1e08500d6efa151109e97fd5a9629f71d580356faed9e39a085d54de4fbfeaeea62c194d975b42f1c75a3635844af52b8fff9209828d3010d6820e6412bc892bce963df0c390e6ed570e9edcf6220f037efc1c7123f5360a9bf9283f6590d3649fb6a6e3a9e19547e5cfc47491d04363dd43f7cb23d64f09d996e3aa575842595d9f0235b02709c983745476cbe9fa7c3d3a702dcf54ce8736d3c1553fb0117794595fb1dc4fa9d245b0605fe4739fda45cd677808cab4a0d01721f09863fd4132f278a9ab4fe853e8c75b50458f157ef73a83198b5026662604eba99c422809201330b79c5258559e57c72420e5d6cf1743f3bd46a775a63c6c4da537b0a68bf6bd0b08e583600c53b7388da7d4d88427d286935d6ecd7988a02f169fd7e2228e5a0a3ae2459cd1ed7d09d14029897d1b2ff0f9c5c438090a571869d726a6f69d3818aeef8eb39b7e4a1b0c36edf84213984ae0e8c905450db41b0170dc0f68525abbbf84e3d7559cc9bc585bafee31902a691e1e6958f1de36092e8ed627b7cfca8d43a3e36c4ac5dc03901e37d794c01591491fcf98be11ba9fc5a086ae1e6fc346280c2386fab74dba0d01b7bdb3df8a9512b92b6486ef34a256074e65be22ed81b03815ab3422054d0ee51c24ec6a6127132d4d905cce0e36b7dcf82ccb4ae5a58286e097dc9c79ab0b8ea726e9ffa490d1b71a5cd9ccb874286b58474a8b1f68fae5167eb095497d48d245bf078478057c2daae7ac7fbbe557046fe2440cbd858a97f9e29821a98780dc1967fa1d8b1a4164086f8ba8e4b52b2387ea186dd086c057c1eb3ad90dc6e80ae162f8838b5d6bdc091b281b3c484d41dbe34ee83302bd9343295d637eebd965f0492bfc26b9e149fd4870e0d273ea010a0217cbeff510593bed90c906b17b10910209f4a1a5a0ab03d8181e147f969233b0b9577072c15595b51ea0848435e47bcb11b6c2c99eff4b24fdada6972c047f810b835cde5aa795c126a37804e38399e57efafb1bbbf88d7432a98900d4b73d797037fcc041a56cdadb31aceaa01da5acd514576871f4312845eba6ba5de1144393fbca91dc74a52cf1f0034bd5b5b79e68f436b5775ab7dc33ad91bcf1789812731b0b9d9de63d8daea9d4e04b90ee227b7f0cc70b7cc0f86accf1907b6fffb41589b51979a3d9b08bf06f9f739d6f81c4246767b6958f19639a99c6cbd7550597c4cc36da5145e8714d7fea69a9d61d2d981c0df4307d08db6b246c46e966e42079f725e533ae3e399a10dfc24ecfbb363538d6a232484a93dd31e5e79228acd45a326cbd6df867bd2a3c54b4a655fa40dd3dd2d244b3387e1e0cf708607e5351a7795b03e9732adb2a18bfe28a6dc573800dc1ac327679c83cd96b71bcec28cb5f1773f69f4e333fc3c6a884bf4bd50ea2b56d5752f171d828554ea762f77f37d129b00b5346c33063e021cf1a9c4dc808a4bec68521c86961a9e46bab63395e20a812c326c87456a23e42d10a34a19cc461acdadf695eb6e175d102178b428adb8ecdd7c400a86af25921ffa0aa2932f217702dcf1cf843ecc0083a47e7638ffc104389d273290b5aa44d7f1aa23b35049731aff968cc664b66d0ef61265429c7717e0bff8fe310e3d35eedb0da36c170558fc206254ef1f3cba4c40b67e7507e72f0bac3a45e00565771e435960469d45b7aeffa21d02b70fb8c30ecaadc17659c1c873e843b26b4b7fa392fbf24b78f6e11c763c850aa34b9ccf3478e3eb4d621d1157fd5a70531ecc428eb8835c6c3b78ca7376bbb74ff2722120a3e54610603612613dc37b635ef46af2166aeb879b466a35981c516517608eeba48064d0583120b60ad5e76755c3f05555dc1fa816d2f95dc19df42dc2202e563a13a270969f4fd58be847aeaacc71f7055efbd6f4162d376de29fb9c9307f636803b2447d3b01f58f1c9ce88072b207f183364c8c7f4afd991c8d6526c3e30e6bcd7b5afe6be32fea0f05a19a70fd5c9b4165745c5de23f440ca7b232b082b033ca9fe27b0858a7d2e3ccc5fb0eaf304e9bc8157c1ac6cbb485211e5f6496194cc2eecddc7582573f57078763e2a0d8a5db700337cc376bcbe5a3fb66eca3c96182c88fe17d01e6b67c1d1f732db5cb817505b1031753db86be91719f31a63014b3ef0b9945365ec6782505fdf46d0f06a24faa55c42f88decf51ecef2ff7dee15f030ecf39913f02f4c9de9397fe67c2c0ea3b3a54d9cfbf0860c86785707f50b4e4fb41e57aa23f1833ce3e02f4773df34b16555752ac0bab4066f8e5cb6013ae7991f353dc6a3ae0a4b9d26877af06e33c4d2315ccb23f09c1f7ba5a46888885ebdcc1b1d67df51f7d3254797deab2ba8fd6993bab4407d3e6ca0507f55a61cbe70f8cef7988f92b6a3af34969e895a49329d65df0d7d1e2f68e92c20585712a8681c70eae8b88f62acc53de72149ba1c85cb6e77210d47b39f04c9df2529da2d3342a0378cc64e42e8659504d00219fff11c93338dd32318b6042d4f9bf8c895b1026bf2be624018a481e380e4d64547c5304f08a6e098ee27a171d5fd983e0416ce26ee5202a924609dd17be0ae8e7bf7836a2bb6a154f71c1f007944277db8e9f6664d0a060c9a7f4fe86ad4f3a9ece57f897ef948bcc26d129a003efd526f0dff43224d3d7190c3519cd0739987eb00edcd6a4d60f0742e14f211748beddbe280c596fb28db94c976cd6fbdffc70d3f150005ed7e0ff1fae6a1429ea97ab400164c34c3717c8a53c4613c01a0dd6a787b030631cc4e3f952b8bb57123c6a80d76de2db94fb9c358fcb1eb8003861b879281e980880ab40f81cefca20d27ab43cc682186c869ce8383d27bfbfa4c6491d53b30c86d945253572c2d470f4cd2ad914389708c4d166038e73a4e99d3e57fb046585ef71e82636b2747902153e387227bf180e25e7b2ccf830d0578d2965f5a5b72ba7e024a7b5230f7a8459ec6815626efa24063cea0fa3d2fc494775cb00ea1974bf6c5ddfc17397e779819f7a9d2525d7adcef2f4b5f6dfbd69f3c410f2f9dfc5c199c5ff1724ca0251ffe19eebdc7a310e9577d98ca00aaa4c189cca5c716628c9a6ecc85fe740eaca1cf10e7dc65ac627de1308df1ee472ab68c399f2e778745b797cbb4dea61cd2353d069d756babb2dabebda7666bc86e2a312bb1be49b2bb00759631b15e9ebee70ebfd99658b80f165e2538a62d706e51420e890fe227a207ee571d6d0eb6855fff09a7095aa0b9eff6d3cc8b0df09c887214fc704dfc1c7814c3da07b24a75c413dd407ee44eda4558e0abc18a36c5c2d0fbc6412f9d80a51b392448ef6a21a062de289626a1b6cd23fced4a09e7d03765640067c3e5701d88c24b94221f0bdee9c2ff461623b3067d52680526735f378a21b937c833238e8ef01557560ffde99d75eae1f9698863d859dae665c8ae5383d69154bf8300a0de70a3bd4f77ac40ea80e377b698f8a79db5979e399fa62c2f6908a2f289dc3c19b88ecaf9c06a0ab649caa1171167b7596a4de99fcb25e681446a47b6c7eb9b4d8e4b864dc64e9fda271f1e7144787a4aaae63fd9e5447a11bb0862b862ad3d510ff45e413c0703a6e92a7772c023960f1ee95ab62c5ee9745872330cf9261677366104b34c14fa08c739e15e3fa9eaa3ad4d472a69df8ae932627ae194857e1b6c2bcbd2c476c97f73a20dfdbe0164d9243c4ba36af7dfddb680b7747d7280cf22076e9e6f9f89372c54ea3aa355313ad0e1677df30a7e51fad3690aa2210e9e1a995096ed0ac40c956dcb3ad15afada4138caa39486a6f085f3c0660957a316c160e31e4830c8ecadf4503f5bfdc8285a237a94f9db8fde745f32568cd98cae9a99fef9d0c827e7152e713ec3879fcb6b0034831c13b0fbf41b705d9b1061ab2c39bad7062edda2286258e4745dcc9b5329cd4c52ab375b3d97986f3d7ff16e64592dd70a933abb1d1149833f268f4fb292ab31000955e2b8c9bcc826843 è¯·è¾“å…¥å¯†ç æŸ¥çœ‹è¯¦ç»†å†…å®¹","link":"/2022/03/12/Other/question/"},{"title":"åŸºäº vue + electron ç¼–å†™ä¸€ä¸ªæ¡Œé¢åº”ç”¨","text":"åŸºäº vue-cli3.0 + Electron ç¼–å†™ä¸€ä¸ªæ¡Œé¢åº”ç”¨ ã€Œ è¯´æ˜ ã€ é¡¹ç›®åœ°å€ï¼šMonit æ ¹æ® README.md æ–‡ä»¶æ•™ç¨‹å®‰è£…ä¾èµ–å¹¶è¿è¡Œ ç”±äºå¯¹ Electron æš‚ä¸ç†Ÿæ‚‰ï¼Œè¯¦ç»†ä»£ç å®ç°åç»­è¯¦å†™ï¼Œæœ¬æ¬¡å…ˆå¯¹é¡¹ç›®å®‰è£…æ„å»ºè¿‡ç¨‹ä¸­é‡åˆ°çš„å‡ ä¸ªæ³¨æ„äº‹é¡¹è®°å½•ä¸€ä¸‹ã€‚ âš ï¸æ³¨æ„äº‹é¡¹ å®‰è£…ä¾èµ–æ—¶æœ‰äº›ä¾èµ–æ–‡ä»¶è¾ƒå¤§ï¼Œéœ€è¦ç­‰å¾…ä¸‹è½½ä¸€æ®µæ—¶é—´ï¼› npm run build è¿‡ç¨‹ä¸­éœ€è¦å®‰è£…æ‰“åŒ…ååº”ç”¨çš„ç¯å¢ƒæ–‡ä»¶ç­‰ï¼Œå¯èƒ½éœ€è¦80Mä»¥ä¸Šï¼Œè‹¥ä¸æƒ³é•¿æ—¶é—´ç­‰å¾…å¯ä»¥ä½¿ç”¨ç§‘å­¦ä¸Šç½‘æˆ–è€…æ ¹æ®åœ°å€æ‰‹åŠ¨ä¸‹è½½å®‰è£…åŒ…æ”¾å…¥æ–‡ä»¶çš„æ–¹æ³•è§£å†³ï¼› vue-cli-plugin-electron-builderå·²é›†æˆè·¨ç³»ç»Ÿæ‰“åŒ…åŠŸèƒ½ï¼Œåªéœ€ä¿®æ”¹æ‰“åŒ…å‘½ä»¤åŠé…ç½®å³å¯å®ç°æ‰“åŒ… mac åŠ windows åº”ç”¨ï¼›ä¿®æ”¹å¦‚ä¸‹ vue.config.js ä¸­ä¿®æ”¹æ„å»ºé€‰é¡¹ builderOptions 12345678910111213141516171819202122232425262728// æ„å»ºé€‰é¡¹builderOptions: { productName: 'Monit', // åº”ç”¨å icon: 'public/logo/icon.png', // å›¾æ ‡ appId: 'top.fzf404.monit', // app id artifactName: '${productName}-${version}-${os}-${arch}.${ext}', // æ‰“åŒ…å‘½åæ–¹å¼ linux: { target: 'AppImage', publish: ['github'], }, mac: { target: { target: 'dmg', arch: ['x64', 'arm64'], }, }, win:{ //winç›¸å…³é…ç½® &quot;target&quot;: [ { &quot;target&quot;: &quot;nsis&quot;,//åˆ©ç”¨nsisåˆ¶ä½œå®‰è£…ç¨‹åº &quot;arch&quot;: [ &quot;x64&quot;,//64ä½ &quot;ia32&quot;//32ä½ ] } ] }} package.json ä¸­ä¿®æ”¹æ„å»ºå‘½ä»¤ 12345678 &quot;scripts&quot;: { &quot;serve&quot;: &quot;vue-cli-service electron:serve&quot;, &quot;build&quot;: &quot;vue-cli-service electron:build --win --ia32&quot;, &quot;package-win&quot;:&quot;electron-packager ./ --platform=win32 --out ./dist --overwrite --ignore=node_modules --arch=x64&quot;, &quot;release&quot;: &quot;vue-cli-service electron:build --publish always&quot;, &quot;prettier&quot;: &quot;prettier --write .&quot;}// ä¸åŠ  --win --ia32 é»˜è®¤æ‰“åŒ…æˆå½“å‰ç³»ç»Ÿåº”ç”¨ å‚è€ƒï¼š åŸºäºvue + electronåˆ›é€ ä¸€ä¸ªéšå¿ƒå¼€å‘ç»„ä»¶çš„è·¨ç«¯æ¡Œé¢åº”ç”¨ ä½¿ç”¨vue-cli-plugin-electron-builderå¼€å‘vue-cli3.0+Electronæ¡Œé¢å¼€å‘åº”ç”¨","link":"/2022/06/12/Other/vue-electron/"},{"title":"Three.js ç³»åˆ—ã€åŸºç¡€ç¯‡ã€‘","text":"Three.js ç³»åˆ—ã€åŸºç¡€ç¯‡ã€‘ åˆ›å»ºä¸€ä¸ªåœºæ™¯12345678910111213141516const scene = new THREE.Scene()// åœ¨åœºæ™¯ä¸­æ·»åŠ é›¾çš„æ•ˆæœï¼ŒFogå‚æ•°åˆ†åˆ«ä»£è¡¨â€˜é›¾çš„é¢œè‰²â€™ã€â€˜å¼€å§‹é›¾åŒ–çš„è§†çº¿è·ç¦»â€™ã€åˆšå¥½é›¾åŒ–è‡³çœ‹ä¸è§çš„è§†çº¿è·ç¦»â€™scene.fog = new THREE.Fog(0x000000, 0, 10000)// ç›’æ¨¡å‹çš„æ·±åº¦const depth = 1400// åœ¨åœºæ™¯ä¸­æ·»åŠ ä¸€ä¸ªåœ†çƒç›’æ¨¡å‹// 1.åˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“const geometry = new THREE.BoxGeometry(1000, 800, depth)// 2.åŠ è½½çº¹ç†const texture = new THREE.TextureLoader().load('bg.png')// 3.åˆ›å»ºç½‘æ ¼æè´¨ï¼ˆåŸæ–™ï¼‰const material = new THREE.MeshBasicMaterial({map: texture, side: THREE.BackSide})// 4.ç”Ÿæˆç½‘æ ¼const mesh = new THREE.Mesh(geometry, material)// 5.æŠŠç½‘æ ¼æ”¾å…¥åœºæ™¯ä¸­scene.add(mesh) è®¾ç½®å…‰æº12345678// 1.åˆ›å»ºç¯å¢ƒå…‰const ambientLight = new THREE.AmbientLight(0xffffff, 1)// 2.åˆ›å»ºç‚¹å…‰æºï¼Œä½äºåœºæ™¯å³ä¸‹è§’const light_rightBottom = new THREE.PointLight(0x0655fd, 5, 0)light_rightBottom.position.set(0, 100, -200)// 3.æŠŠå…‰æºæ”¾å…¥åœºæ™¯ä¸­scene.add(light_rightBottom)scene.add(ambientLight) åˆ›å»ºç›¸æœºï¼Œè®¾ç½®ç›¸æœºä½ç½®å’Œç›¸æœºé•œå¤´çš„æœå‘123456789101112131415/** * ä¸ºäº†é¿å…è¾¹ç¼˜å˜å½¢ï¼Œè¿™é‡Œå°†fovè§’åº¦è®¾ç½®å°ä¸€äº›ï¼Œè·ç¦»æ‹‰è¿œä¸€äº› * å›ºå®šè§†åŸŸè§’åº¦ï¼Œæ±‚éœ€è¦å¤šå°‘è·ç¦»æ‰èƒ½æ»¡è¶³å®Œæ•´çš„è§†é‡ç”»é¢ * 15åº¦ç­‰äº(Math.PI / 12) */const container = document.getElementById('login-three-container')const width = container.clientWidthconst height = container.clientHeightconst fov = 15const distance = width / 2 / Math.tan(Math.PI / 12)const zAxisNumber = Math.floor(distance - depth / 2)const camera = new THREE.PerspectiveCamera(fov, width / height, 1, 30000)camera.position.set(0, 0, zAxisNumber)const cameraTarget = new THREE.Vector3(0, 0, 0)camera.lookAt(cameraTarget) åˆ›å»º3Dæ¸²æŸ“å™¨ï¼Œä½¿ç”¨æ¸²æŸ“å™¨æŠŠåˆ›å»ºçš„åœºæ™¯æ¸²æŸ“å‡ºæ¥12345678910// è·å–å®¹å™¨domconst container = document.getElementById('login-three-container')// åˆ›å»ºwebglæ¸²æŸ“å™¨å®ä¾‹const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true })// è®¾ç½®æ¸²æŸ“å™¨ç”»å¸ƒçš„å¤§å°renderer.setSize(width, height)// æŠŠç”»å¸ƒå®ä¾‹ï¼ˆcanvasï¼‰æ”¾å…¥å®¹å™¨ä¸­container.appendChild(renderer.domElement)// æ¸²æŸ“å™¨æ¸²æŸ“åœºæ™¯renderer.render(scene, camera) å‚è€ƒ Three.js å®˜ç½‘ Three.js ä¸­æ–‡ç½‘ æ•™ä½ ç”¨three.jså†™ä¸€ä¸ªç‚«é…·çš„3Dç™»é™†é¡µé¢","link":"/2024/04/17/Other/threejs/"},{"title":"Vueç»„ä»¶é€šä¿¡çš„8ç§æ–¹å¼","text":"props å’Œ $emit $children å’Œ $parent ref provide å’Œ inject eventBus $attrs å’Œ $listeners Vuex localStorage å’Œ sessionStorage çˆ¶å­å…³ç³»çš„ç»„ä»¶æ•°æ®ä¼ é€’é€‰æ‹© props ä¸ $emit è¿›è¡Œä¼ é€’ï¼Œä¹Ÿå¯é€‰æ‹© ref å…„å¼Ÿå…³ç³»çš„ç»„ä»¶æ•°æ®ä¼ é€’å¯é€‰æ‹© $busï¼Œå…¶æ¬¡å¯ä»¥é€‰æ‹© $parent è¿›è¡Œä¼ é€’ ç¥–å…ˆä¸åä»£ç»„ä»¶æ•°æ®ä¼ é€’å¯é€‰æ‹© attrs ä¸ listeners æˆ–è€… Provide ä¸ Inject å¤æ‚å…³ç³»çš„ç»„ä»¶æ•°æ®ä¼ é€’å¯ä»¥é€šè¿‡ vuex å­˜æ”¾å…±äº«çš„å˜é‡å‚è€ƒ Vueç»„ä»¶é€šä¿¡ Vueé€šä¿¡æ–¹å¼","link":"/2022/03/12/Vue/vue-communication/"},{"title":"vue-router","text":"è·¯ç”±æ¨¡å¼ è·¯ç”±å®ˆå« è·¯ç”±æ¨¡å¼vue-router æœ‰ 3 ç§è·¯ç”±æ¨¡å¼ï¼šhashã€historyã€abstractï¼š hash: ä½¿ç”¨ URL hash å€¼æ¥ä½œè·¯ç”±ã€‚æ”¯æŒæ‰€æœ‰æµè§ˆå™¨ï¼ŒåŒ…æ‹¬ä¸æ”¯æŒ HTML5 History Api çš„æµè§ˆå™¨; history: ä¾èµ– HTML5 History API å’ŒæœåŠ¡å™¨é…ç½®(å¸¸ç”¨); abstract: æ”¯æŒæ‰€æœ‰ JavaScript è¿è¡Œç¯å¢ƒï¼Œå¦‚ Node.js æœåŠ¡å™¨ç«¯ã€‚å¦‚æœå‘ç°æ²¡æœ‰æµè§ˆå™¨çš„ APIï¼Œè·¯ç”±ä¼šè‡ªåŠ¨å¼ºåˆ¶è¿›å…¥è¿™ä¸ªæ¨¡å¼; hash æ¨¡å¼ä¾‹å¦‚ï¼šxxx.com/index.html/#/mine#å·åé¢çš„ï¼Œå°±æ˜¯ä¸€ä¸ªURLä¸­å…³äºhashçš„ç»„æˆéƒ¨åˆ†ï¼Œä¸åŒè·¯ç”±å¯¹åº”çš„hashæ˜¯ä¸ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æ˜¯åœ¨è®¿é—®åŒä¸€ä¸ªé™æ€èµ„æºindex.htmlã€‚æˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯å¦‚ä½•èƒ½å¤Ÿç›‘å¬åˆ°URLä¸­å…³äºhashéƒ¨åˆ†å‘ç”Ÿçš„å˜åŒ–ï¼Œä»è€Œåšå‡ºå¯¹åº”çš„æ”¹å˜ã€‚å…¶å®æµè§ˆå™¨å·²ç»æš´éœ²ç»™æˆ‘ä»¬ä¸€ä¸ªç°æˆçš„æ–¹æ³•hashchangeï¼Œåœ¨hashæ”¹å˜çš„æ—¶å€™ï¼Œè§¦å‘è¯¥äº‹ä»¶ã€‚æœ‰äº†ç›‘å¬äº‹ä»¶ï¼Œä¸”æ”¹å˜hashé¡µé¢å¹¶ä¸åˆ·æ–°ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ç›‘å¬äº‹ä»¶çš„å›è°ƒå‡½æ•°ä¸­ï¼Œæ‰§è¡Œæˆ‘ä»¬å±•ç¤ºå’Œéšè—ä¸åŒUIæ˜¾ç¤ºçš„åŠŸèƒ½ï¼Œä»è€Œå®ç°å‰ç«¯è·¯ç”±ã€‚ history æ¨¡å¼historyè·¯ç”±æ¨¡å¼ çš„å®ç°ï¼Œæ˜¯è¦å½’åŠŸäºHTML5æä¾›çš„ä¸€ä¸ª history å…¨å±€å¯¹è±¡ï¼Œå¯ä»¥å°†å®ƒç†è§£ä¸ºå…¶ä¸­åŒ…å«äº†å…³äºæˆ‘ä»¬è®¿é—®ç½‘é¡µï¼ˆå†å²ä¼šè¯ï¼‰çš„ä¸€äº›ä¿¡æ¯ã€‚åŒæ—¶å®ƒè¿˜æš´éœ²äº†ä¸€äº›æœ‰ç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š history: äºHTML5æä¾›çš„ä¸€ä¸ªhistoryå…¨å±€å¯¹è±¡ window.history.go å¯ä»¥è·³è½¬åˆ°æµè§ˆå™¨ä¼šè¯å†å²ä¸­çš„æŒ‡å®šçš„æŸä¸€ä¸ªè®°å½•é¡µ window.history.forward æŒ‡å‘æµè§ˆå™¨ä¼šè¯å†å²ä¸­çš„ä¸‹ä¸€é¡µï¼Œè·Ÿæµè§ˆå™¨çš„å‰è¿›æŒ‰é’®ç›¸åŒ window.history.back è¿”å›æµè§ˆå™¨ä¼šè¯å†å²ä¸­çš„ä¸Šä¸€é¡µï¼Œè·Ÿæµè§ˆå™¨çš„å›é€€æŒ‰é’®åŠŸèƒ½ç›¸åŒ window.history.pushState å¯ä»¥å°†ç»™å®šçš„æ•°æ®å‹å…¥åˆ°æµè§ˆå™¨ä¼šè¯å†å²æ ˆä¸­ window.history.replaceState å°†å½“å‰çš„ä¼šè¯é¡µé¢çš„urlæ›¿æ¢æˆæŒ‡å®šçš„æ•°æ® è€Œhistoryè·¯ç”±çš„å®ç°ï¼Œä¸»è¦å°±æ˜¯ä¾é äºpushStateä¸replaceStateå®ç°çš„ã€‚ æ€»ç»“ hashçš„å®ç°å…¨éƒ¨åœ¨å‰ç«¯ï¼Œä¸éœ€è¦åç«¯æœåŠ¡å™¨é…åˆï¼Œå…¼å®¹æ€§å¥½ï¼Œä¸»è¦æ˜¯é€šè¿‡ç›‘å¬hashchangeäº‹ä»¶ï¼Œå¤„ç†å‰ç«¯ä¸šåŠ¡é€»è¾‘ historyçš„å®ç°ï¼Œéœ€è¦æœåŠ¡å™¨åšä»¥ä¸‹ç®€å•çš„é…ç½®ï¼Œé€šè¿‡ç›‘å¬pushStateåŠreplaceStateäº‹ä»¶ï¼Œå¤„ç†å‰ç«¯ä¸šåŠ¡é€»è¾‘ è¯¦ç»†ï¼šhttps://juejin.cn/post/7127143415879303204 è·¯ç”±å®ˆå«å…¨å±€å®ˆå«ï¼š123456const router = createRouter({ ... })router.beforeEach((to, from) =&gt; { // ... // è¿”å› false ä»¥å–æ¶ˆå¯¼èˆª return false}) è·¯ç”±ç‹¬äº«å®ˆå«ï¼š12345678910const routes = [ { path: '/users/:id', component: UserDetails, beforeEnter: (to, from) =&gt; { // reject the navigation return false }, },] ç»„ä»¶å†…çš„å®ˆå«ï¼š123456789101112const UserDetails = { template: `...`, beforeRouteEnter(to, from) { // åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢«éªŒè¯å‰è°ƒç”¨ }, beforeRouteUpdate(to, from) { // åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨ }, beforeRouteLeave(to, from) { // åœ¨å¯¼èˆªç¦»å¼€æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨ },} vue-routerä¸­ä¿æŠ¤è·¯ç”±çš„æ–¹æ³•å«åšè·¯ç”±å®ˆå«ï¼Œä¸»è¦ç”¨æ¥é€šè¿‡è·³è½¬æˆ–å–æ¶ˆçš„æ–¹å¼å®ˆå«å¯¼èˆªã€‚ è·¯ç”±å®ˆå«æœ‰ä¸‰ä¸ªçº§åˆ«ï¼šå…¨å±€ã€è·¯ç”±ç‹¬äº«ã€ç»„ä»¶çº§ã€‚å½±å“èŒƒå›´ç”±å¤§åˆ°å°ï¼Œä¾‹å¦‚å…¨å±€çš„router.beforeEach()ï¼Œå¯ä»¥æ³¨å†Œä¸€ä¸ªå…¨å±€å‰ç½®å®ˆå«ï¼Œæ¯æ¬¡è·¯ç”±å¯¼èˆªéƒ½ä¼šç»è¿‡è¿™ä¸ªå®ˆå«ï¼Œå› æ­¤åœ¨å…¶å†…éƒ¨å¯ä»¥åŠ å…¥æ§åˆ¶é€»è¾‘å†³å®šç”¨æˆ·æ˜¯å¦å¯ä»¥å¯¼èˆªåˆ°ç›®æ ‡è·¯ç”±ï¼›åœ¨è·¯ç”±æ³¨å†Œçš„æ—¶å€™å¯ä»¥åŠ å…¥å•è·¯ç”±ç‹¬äº«çš„å®ˆå«ï¼Œä¾‹å¦‚beforeEnterï¼Œå®ˆå«åªåœ¨è¿›å…¥è·¯ç”±æ—¶è§¦å‘ï¼Œå› æ­¤åªä¼šå½±å“è¿™ä¸ªè·¯ç”±ï¼Œæ§åˆ¶æ›´ç²¾ç¡®ï¼›æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºè·¯ç”±ç»„ä»¶æ·»åŠ å®ˆå«é…ç½®ï¼Œä¾‹å¦‚beforeRouteEnterï¼Œä¼šåœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢«éªŒè¯å‰è°ƒç”¨ï¼Œæ§åˆ¶çš„èŒƒå›´æ›´ç²¾ç¡®äº†ã€‚ ç”¨æˆ·çš„ä»»ä½•å¯¼èˆªè¡Œä¸ºéƒ½ä¼šèµ°navigateæ–¹æ³•ï¼Œå†…éƒ¨æœ‰ä¸ªguardsé˜Ÿåˆ—æŒ‰é¡ºåºæ‰§è¡Œç”¨æˆ·æ³¨å†Œçš„å®ˆå«é’©å­å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰é€šè¿‡éªŒè¯é€»è¾‘åˆ™ä¼šå–æ¶ˆåŸæœ‰çš„å¯¼èˆªã€‚ å…¨å±€å‰ç½®/é’©å­ï¼šbeforeEachã€beforeResolveã€afterEach è·¯ç”±ç‹¬äº«çš„å®ˆå«ï¼šbeforeEnter ç»„ä»¶å†…çš„å®ˆå«ï¼šbeforeRouteEnterã€beforeRouteUpdateã€beforeRouteLeave å‚è€ƒ https://juejin.cn/post/7204844328111374391 https://juejin.cn/post/6844903918753808398#heading-18","link":"/2022/03/12/Vue/vue-router/"},{"title":"Vue2&#x2F;Vue3ä¼˜ç§€å¼€æºæ¡†æ¶æ¨¡æ¿","text":"Vue2/Vue3ä¼˜ç§€å¼€æºæ¡†æ¶æ¨¡æ¿ Vue2 èŠ±è£¤è¡©å¤§ä½¬çš„ vue-element-admin Vue3 vue-pure-admin ğŸ”¥ å…¨é¢ESM+Vue3+Vite+Element-Plus+TypeScriptç¼–å†™çš„ä¸€æ¬¾åå°ç®¡ç†ç³»ç»Ÿï¼ˆå…¼å®¹ç§»åŠ¨ç«¯ï¼‰ v3-admin-viteâ€“pany â˜€ï¸ A vue3 admin template | vue3 admin/element plus admin/vite admin/vue3 template/vue3 åå°/vue3 æ¨¡æ¿/vue3 åå°ç®¡ç†ç³»ç»Ÿ vue3-element-adminâ€“æœ‰æ¥æŠ€æœ¯ ğŸ”¥åŸºäº vue3 + vite5 + typescript + element-plus æ„å»ºçš„åå°ç®¡ç†å‰ç«¯æ¨¡æ¿ï¼ˆé…å¥—åç«¯æºç ï¼‰ï¼Œvue-element-admin çš„ vue3 ç‰ˆæœ¬ã€‚ åŸºäº Naive UI çš„æœ‰ naive-ui-admin å’Œ soybean-admin åŸºäº Ant Design Vue çš„æœ‰ vue-vben-admin å’Œ vue3-antd-admin fantastic-adminâ­â­â­â­â­ ä¸€æ¬¾å¼€ç®±å³ç”¨çš„ Vue ä¸­åå°ç®¡ç†ç³»ç»Ÿæ¡†æ¶ï¼Œæ”¯æŒå¤šæ¬¾ UI ç»„ä»¶åº“ï¼Œå…¼å®¹PCã€ç§»åŠ¨ç«¯ã€‚vue-admin, vue-element-admin, vueåå°, åå°ç³»ç»Ÿ, åå°æ¡†æ¶, ç®¡ç†åå°, ç®¡ç†ç³»ç»Ÿ é—®é¢˜vue3-element-admin é¡¹ç›®å¯åŠ¨åï¼Œvscodeå‘½ä»¤è¡Œæäº¤ä»£ç æ— æŠ¥é”™ï¼ŒsourceTreeæäº¤æŠ¥é”™ï¼Œpre-commit æŠ¥é”™ï¼š.husky/pre-commit: line 8: npm: command not foundæ–¹æ¡ˆï¼šåˆ›å»º~/.huskyrcæ–‡ä»¶ï¼Œæ ¹ç›®å½•/Users/chenzhihao/.huskyrcï¼Œå¢åŠ å¯¹nvmè·¯å¾„çš„æ”¯æŒï¼švi ~/.huskyrcæŸ¥çœ‹npmè·¯å¾„ï¼šwhich npm/Users/chenzhihao/.nvm/versions/node/v14.18.1/bin/npmhuskyrcæ–‡ä»¶ä¿®æ”¹ä¸ºï¼šexport PATH=/Users/chenzhihao/.nvm/versions/node/v18.17.0/bin:$PATHï¼ï¼ï¼æ³¨æ„å¯¹åº”çš„ç‰ˆæœ¬å· å‚è€ƒ https://ask.csdn.net/questions/1058267https://blog.csdn.net/wuyulkl/article/details/129803496https://blog.csdn.net/qq_39852145/article/details/123867238?spm=1001.2101.3001.6650.5&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-5-123867238-blog-131233569.235%5Ev43%5Epc_blog_bottom_relevance_base4&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-5-123867238-blog-131233569.235%5Ev43%5Epc_blog_bottom_relevance_base4&amp;utm_relevant_index=10 é“¾æ¥ âœ¨ ä¸€ä¸ªåŸºäº Vue3 + TS + Element Plus + Pinia çš„ä½æˆæœ¬åå°ç®¡ç†æ¨¡æ¿","link":"/2024/03/06/Vue/vue/"},{"title":"Hexo Icarus -- æ­å»ºèµ›åšæœ‹å…‹é£æ ¼ä¸ªäººåšå®¢","text":"åŸºäº Hexo ï¼Œä½¿ç”¨é…·ç‚«çš„ Icarus ä¸»é¢˜âœ¨ ä¸”åŠ å…¥ä¼—å¤šä¸ªæ€§åŒ–é…ç½®ï¼Œæ‰“é€ å‡ºçš„ä¸ªäººåšå®¢ï¼Œæ•ˆæœæƒŠè‰³ï¼Œè®©æˆ‘ä»¬ä»é›¶å¼€å§‹ï¼Œæ­å»ºä¸€ä¸ªä¸“å±è‡ªå·±çš„ èµ›åšæœ‹å…‹ é£æ ¼åšå®¢å§ã€‚ å®‰è£…Node.js å®‰è£…Hexo å¼•å…¥Icarusä¸»é¢˜ ä¸ªæ€§åŒ–é…ç½® åˆ›å»ºGitHubä¸ªäººä»“åº“ ç»‘å®šä»“åº“ å‘å¸ƒæ–‡ç«  HexoåŠMarkDownè¯­æ³• å®‰è£…æ’ä»¶ï¼ˆè¯„è®ºï¼Œç»Ÿè®¡ï¼Œåˆ†äº«ç­‰ï¼‰ ç»‘å®šä¸ªäººåŸŸå ä½¿ç”¨å›¾åºŠå·¥å…· å®‰è£…Node.jsHexoåŸºäºNode.jsï¼ŒNode.jsä¸‹è½½åœ°å€ï¼šDownload | Node.js ä¸‹è½½å®‰è£…åŒ…(æˆ–è€…ä½¿ç”¨ nvm ç®¡ç†nodeç‰ˆæœ¬)ï¼Œæ³¨æ„å®‰è£…Node.jsä¼šåŒ…å«ç¯å¢ƒå˜é‡åŠnpmçš„å®‰è£…ï¼Œå®‰è£…åï¼Œæ£€æµ‹Node.jsæ˜¯å¦å®‰è£…æˆåŠŸï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ node -v : 1$ npm -v å®‰è£…Hexoåˆå§‹åŒ–é¡¹ç›®éå¸¸ç®€å•ï¼ŒæŒ‰ç…§ Hexoå®˜ç½‘æ–‡æ¡£ æ“ä½œå³å¯:ä½¿ç”¨npmå®‰è£…Hexo 123$ npm install -g hexo-cli# æ›´æ–°ç‰ˆæœ¬# npm update hexo 123$ hexo init &lt;folder&gt;$ cd &lt;folder&gt;$ npm install æ ‡å‡†çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š 1234567â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source| â”œâ”€â”€ _drafts| â””â”€â”€ _postsâ””â”€â”€ themes ä½¿ç”¨ generate å‘½ä»¤ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œå¯ç®€å†™å¦‚ä¸‹ï¼š 1$ hexo g ä½¿ç”¨ server å‘½ä»¤å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨æŸ¥çœ‹é¡µé¢æ•ˆæœï¼Œå¯ç®€å†™å¦‚ä¸‹ï¼š 1$ hexo s æ­¤æ—¶ï¼Œæ‰“å¼€ localhost:4000, ä¸€ä¸ªé»˜è®¤çš„ landscape ä¸»é¢˜çš„åšå®¢é¡µé¢å°±å‡ºç°äº†ï¼Œå¦‚ä¸‹ï¼š å¼•å…¥Icarusä¸»é¢˜å¼•å…¥ä¸»é¢˜ä¹Ÿéå¸¸ç®€å•ï¼Œæˆ‘ä»¬æŸ¥çœ‹ Icarus ä¸»é¢˜ ã€‚æ›´æ¢ä¸»é¢˜ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ npm å®‰è£…ä¸»é¢˜çš„æ–¹å¼ï¼Œå¦ä¸€ç§æ˜¯ä¸‹è½½æºç æ”¾åˆ° theme æ–‡ä»¶å¤¹çš„æ–¹å¼ã€‚ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å…ˆé‡‡ç”¨ npm çš„æ–¹å¼ï¼š 1$ npm add hexo-theme-icarus ä½¿ç”¨ hexo å‘½ä»¤ä¿®æ”¹ä¸»é¢˜ä¸º Icarus: 1$ npm hexo config theme icarus å¯åŠ¨æœåŠ¡å™¨ï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š æ ¹æ®æç¤ºï¼Œæ·»åŠ ä¾èµ–(æç¤ºç¼ºå°‘å“ªäº›å°±å®‰è£…å“ªäº›)ï¼š 1$ npm add bulma-stylus@0.8.0 hexo-renderer-inferno@^0.1.3 å†æ¬¡å°è¯•æ„å»ºå¹¶å¯åŠ¨ï¼ŒæˆåŠŸå‡ºç° Icarus ä¸»é¢˜äº†ï¼š åœ¨ _config.icarus.yml æ–‡ä»¶ä¸­ä¿®æ”¹ï¼š 12# Icarus theme variant, can be &quot;default&quot; or &quot;cyberpunk&quot;$ variant: cyberpunk å†æ¬¡æ„å»ºå¯åŠ¨ï¼ŒæˆåŠŸå‡ºç° èµ›åšæœ‹å…‹ é£æ ¼ä¸»é¢˜äº†ï¼š åˆšæ‰è¯´åˆ°ä½¿ç”¨ Icarus ä¸»é¢˜æœ‰ä¸¤ç§æ–¹å¼ï¼Œ npm åŒ…çš„æ–¹å¼è™½ç„¶ç®€ä¾¿ï¼Œä½†æ˜¯å¦‚æœæƒ³å¯¹ Icarus ä¸»é¢˜æœ‰æ›´æ·±çš„é…ç½®å°±ä¸å¤ªå¥½å¼„äº†ï¼Œå°¤å…¶æ˜¯è¿‡å» Icarus ä¸€ç›´éƒ½é‡‡ç”¨çš„æ˜¯æºç æ¨¡å¼ï¼Œå¾ˆå¤š Issue çš„è§£å†³æ–¹æ¡ˆéƒ½æ˜¯ä¿®æ”¹æºç çš„ï¼Œè€Œå¯¹åº”çš„ npm åŒ…çš„æ–¹å¼åˆ™å¾ˆå°‘æåŠï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ”¹ä¸ºä½¿ç”¨æºç æ–¹å¼ï¼Œæ–¹ä¾¿åç»­é…ç½®ã€‚ é¦–å…ˆåˆ æ‰ hexo-theme-icarus ä¾èµ–ï¼Œåœ¨ Icarus ä»“åº“ ä¸‹è½½ä»£ç ï¼Œè§£å‹åæ‹·è´åˆ° theme æ–‡ä»¶å¤¹ä¸­ã€‚ ä¸ªæ€§åŒ–é…ç½®ä¿®æ”¹é…ç½®æ–‡ä»¶ _config.yml å’Œ _config.icarus.yml ï¼Œé…ç½®ç½‘ç«™ç›¸å…³ä¿¡æ¯ã€‚ ä¸»è¦åŒ…æ‹¬ logoã€faviconã€navbar çš„ menu å’Œ linksã€footerã€donatesï¼ˆèµåŠ©ä¿¡æ¯ï¼Œæ³¨é‡Šæ‰æ²¡ç”¨çš„æ”¯ä»˜æ¸ é“ï¼‰ã€widgetsã€‚ é¦–é¡µå¦‚æœæ–‡ç« è¿‡é•¿ï¼Œç”¨æˆ·å‘ä¸‹æ»šåŠ¨æ—¶å°±åªä¼šçœ‹åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œå¦‚æœåªæƒ³è®©ç”¨æˆ·çœ‹ä¸€éƒ¨åˆ†å†…å®¹æ€ä¹ˆåŠå‘¢ï¼Ÿéå¸¸ç®€å•ï¼Œåœ¨ md æ–‡ä»¶ä¸­æ·»åŠ  &lt;!â€“ more â€“&gt; å³å¯ï¼Œæ·»åŠ å®Œä¹‹åï¼Œå°±ä¼šå‡ºç°â€œé˜…è¯»æ›´å¤šâ€çš„æŒ‰é’®ï¼Œé¦–é¡µå°±èƒ½çœ‹åˆ°å¤šç¯‡æ–‡ç« äº†ã€‚ ç›®å‰æ–‡ç« é¡µä»ç„¶å’Œé¦–é¡µä¸€æ ·ï¼Œæ˜¯ä¸‰æ å¸ƒå±€ï¼Œä¸ºäº†æœ‰æ•ˆåˆ©ç”¨ç©ºé—´ï¼Œå¸Œæœ›æ–‡ç« é¡µèƒ½å¤Ÿä¸¤æ å¸ƒå±€ã€‚æ­¤æ—¶æˆ‘ä»¬éœ€è¦åœ¨ Icarus æºç æ–‡ä»¶å¤¹æ·»åŠ  _config.post.yml æ–‡ä»¶ï¼Œå¹¶é…ç½®æˆä¸¤æ å¸ƒå±€ï¼š 123456789101112widgets: # Profile widget configurations - # Where should the widget be placed, left sidebar or right sidebar position: right type: toc # Whether to show the index of each heading index: true # Whether to collapse sub-headings when they are out-of-view collapsed: false # Maximum level of headings to show (1-6) depth: 3 çœ‹çœ‹æ•ˆæœ(å¤´åƒåŠåŠ¨æ€èƒŒæ™¯åé¢æ·»åŠ )ï¼š åˆ›å»ºGitHubä¸ªäººä»“åº“ç™»å½•åˆ° å…¨çƒæœ€å¤§åŒæ€§äº¤å‹ç½‘ç«™âœ¨(GitHub),å¦‚æœæ²¡æœ‰GitHubå¸å·ï¼Œä½¿ç”¨ä½ çš„é‚®ç®±æ³¨å†ŒGitHubå¸å·(æ­¤å¤„ä¸èµ˜è¿°å¯å‚è€ƒ: å»–é›ªå³°è€å¸ˆGitæ•™ç¨‹)ã€‚ç‚¹å‡»GitHubä¸­çš„New repositoryåˆ›å»ºæ–°ä»“åº“ï¼Œä»“åº“ååº”è¯¥ä¸ºï¼šç”¨æˆ·å.github.io è¿™ä¸ªç”¨æˆ·åä½¿ç”¨ä½ çš„GitHubå¸å·åç§°ä»£æ›¿ï¼Œè¿™æ˜¯å›ºå®šå†™æ³•ï¼Œå¦‚å›¾ï¼š å®‰è£…æˆåŠŸåï¼Œå°†ä½ çš„Gitä¸GitHubå¸å·ç»‘å®šï¼ŒåŒå‚è€ƒ å»–é›ªå³°è€å¸ˆGitæ•™ç¨‹ ã€‚ ç»‘å®šä»“åº“åœ¨ _config.yml ä¸­é…ç½®ä½ çš„ GitHub Pages å¯¹åº”çš„ä»“åº“åœ°å€: 1234deploy: type: git repo: https://github.com/xx/xx.github.io branch: master å…¶ä¸­ï¼š type å¯¹åº”éƒ¨ç½²çš„æœåŠ¡å™¨ç±»å‹ï¼Œæˆ‘ä»¬è¿™é‡Œå¡«å†™gitå°±å¯ä»¥ repo å¯¹åº”ä»“åº“åœ°å€ï¼Œä¹Ÿå°±æ˜¯ä»“åº“å…‹éš†çš„åœ°å€ branch ä¸å†™é»˜è®¤æ˜¯masterï¼Œé€šå¸¸æˆ‘ä»¬å†™æˆmasterå°±å¯ä»¥ å¦‚å›¾ï¼š ä»¥ä¸Šé…ç½®å®Œæˆåä¿å­˜ ç„¶åå›åˆ°ç»ˆç«¯æ‰§è¡Œ npm install hexo-deployer-git â€“save å®‰è£…æ’ä»¶ï¼Œå°†å†™å¥½çš„æ–‡ç« éƒ¨ç½²åˆ°githubæœåŠ¡å™¨ä¸Šå¹¶è®©åˆ«äººæµè§ˆåˆ°ã€‚å®‰è£…å®Œæˆååœ¨ç»ˆç«¯ä¸­ä¾æ¬¡æ‰§è¡Œå¦‚ä¸‹ä»£ç (ä¸ºäº†ç®€å•åç»­ç»Ÿç§°ä¸ºä¸‰æ­¥)ï¼š hexo clean æ¸…ç†ç¼“å­˜ï¼Œæ•´ä¸ªpublicæ–‡ä»¶åˆ é™¤ï¼Œç®€å†™ä¸º hexo c hexo generate è¿›è¡Œæ¸²æŸ“ï¼Œå°†sourceä¸­çš„æ–‡ä»¶æŒ‰ç…§æŸç§è§„åˆ™æ–¹å¼æ¸²æŸ“æˆé™æ€çš„é¡µé¢æ–‡ä»¶æ”¾åˆ°publicä¸­ï¼Œç®€å†™ä¸º hexo g hexo server éƒ¨ç½²åˆ°æœ¬åœ°ï¼Œç®€å†™ä¸º hexo s hexo deploy å°†publicä¸­æ–‡ä»¶éƒ¨ç½²åˆ°gitæœåŠ¡å™¨ï¼Œç®€å†™ä¸º hexo d å‘å¸ƒæ–‡ç« åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„æ–‡ç« ï¼Œå»ºç«‹å¥½çš„æ–‡ç« åœ¨ source/_posts ä¸­ï¼š 1hexo new post â€œæ–‡ç« åå­—â€ æ³¨æ„å¤´éƒ¨é…ç½®æ–‡ä»¶ç›¸å…³ä¿¡æ¯ï¼Œåœ¨æ–°ç‰ˆ Icarus ä¸­å¤´å›¾éœ€è¦é¢å¤–é…ç½® cover é€‰é¡¹ï¼Œå¦‚ä¸‹ï¼š 1234567891011---title: &quot;hello&quot; # æ ‡é¢˜date: 2021/03/08 # æ—¥æœŸcategories: # åˆ†ç±»- Front-Endtags: # æ ‡ç­¾- GitHubtoc: true # æ˜¯å¦æ˜¾ç¤ºç›®å½•thumbnail: '' # ç¼©ç•¥å›¾cover: '/img/a.png' # å¤´å›¾--- ç¼–è¾‘å®Œæˆåæ‰§è¡Œä¸Šé¢ä¸‰æ­¥æ“ä½œï¼Œåˆ·æ–°ä¸‹æµè§ˆå™¨å³å¯çœ‹åˆ°æ–°æ–‡ç« å•¦. HexoåŠMarkDownè¯­æ³•å¤§å®¶å¯å‰å¾€å¯¹åº”å®˜ç½‘å­¦ä¹  MarkDownåŸºæœ¬è¯­æ³• åŠ Hexoæ–‡æ¡£ âš ï¸æ³¨æ„ï¼šå¯ä»¥å°†HTMLæ ‡ç­¾æ·»åŠ åˆ°ä»»ä½•Markdownæ–‡ä»¶ä¸­ä½¿ç”¨ã€‚å¦‚æœæ‚¨æ›´å–œæ¬¢æŸäº›HTMLæ ‡è®°è€Œä¸æ˜¯Markdownè¯­æ³•ï¼Œè¿™å°†å¾ˆæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œæœ‰äº›äººå‘ç°å°†HTMLæ ‡ç­¾ç”¨äºå›¾åƒæ›´å®¹æ˜“ã€‚ æ·»åŠ ç½‘æ˜“äº‘éŸ³ä¹æ‰“å¼€ç½‘é¡µç‰ˆçš„ ç½‘æ˜“äº‘éŸ³ä¹ï¼Œé€‰æ‹©å–œæ¬¢çš„éŸ³ä¹ï¼Œç‚¹å‡»ç”Ÿæˆå¤–é“¾æ’­æ”¾å™¨ å¯è‡ªå®šä¹‰é…ç½®ï¼š å®‰è£…æ’ä»¶ï¼ˆè¯„è®ºï¼Œç»Ÿè®¡ï¼Œåˆ†äº«ç­‰ï¼‰è¯„è®ºç³»ç»ŸHexoçš„è¯„è®ºæ’ä»¶å®˜æ–¹æ¨èäº†disqusï¼Œä½†å›½å†…æ— æ³•è®¿é—®ï¼Œä¸èƒ½ä¿è¯æ‰€æœ‰äººéƒ½æœ‰å…‹æœçš„æ–¹æ³•ã€‚æ‰€æœ‰æˆ‘ä»¬æ‰“ç®—é‡‡ç”¨å…¶ä»–çš„ç¬¬ä¸‰æ–¹æ¥å®ç°ï¼Œå¸‚é¢ä¸Šäº§å“å¾ˆå¤šï¼Œæˆ‘ä»¬åšå¦‚ä¸‹å¯¹æ¯”ï¼š Githubç±»ï¼šgitmentï¼Œ gitalkï¼Œgitterï¼Œé£æ ¼å¾ˆåƒgithubï¼Œè¯„è®ºéœ€è¦githubè´¦å·ï¼› åŸºäº leancloud çš„æ— åç«¯è¯„è®ºç³»ç»Ÿï¼šValineï¼Œéœ€è¦å®åæ³¨å†Œleancloudå¸å·ï¼› livere ä¸­æ–‡åå­—å«æ¥å¿…åŠ›ï¼Œæ˜¯ä¸€æ¬¾éŸ©å›½çš„è¯„è®ºç³»ç»Ÿï¼› ç•…è¨€äº‘è¯„ï¼Œå®‰è£…éœ€è¦å¤‡æ¡ˆå·ï¼› disqus æ¯”è¾ƒå¤§ç‰Œçš„è¯„è®ºç³»ç»Ÿï¼ŒæœåŠ¡ç¨³å®šï¼Œå”¯ä¸€çš„ç¼ºç‚¹æ˜¯å›½å†…æ— æ³•ä½¿ç”¨ã€‚ æœ€ç»ˆï¼Œæ¨èä½¿ç”¨ valine è¯„è®ºç³»ç»Ÿï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š æ³¨å†ŒLeanCloud (https://leancloud.app/)ï¼Œå¹¶å®åè®¤è¯ åˆ›å»ºåº”ç”¨ï¼Œåº”ç”¨åç§°éšä¾¿å– ç‚¹å‡» è®¾ç½® &gt; å®‰å…¨ä¸­å¿ƒ æŠŠè‡ªå·±åšå®¢ç½‘å€æ·»åŠ åˆ°å®‰å…¨ä¸­å¿ƒï¼Œä¿è¯æ•°æ®çš„è°ƒç”¨å®‰å…¨ã€‚ ç‚¹å‡»è®¾ç½® &gt; åº”ç”¨Key å¤åˆ¶App ID å’Œ App Key ä¿®æ”¹é…ç½® 1234567891011121314151617181920212223 # Valine.# You can get your appid and appkey from https://leancloud.cn# more info please open https://valine.js.orgvaline: enable: true # å¯ç”¨ appid: xxx # leancloudåº”ç”¨ä¸­çš„appId å¿…å¡« appkey: xxx # leancloudåº”ç”¨ä¸­çš„appKeyå¿…å¡« notify: false # mail notifier , https://github.com/xCss/Valine/wiki verify: false # Verification code placeholder: &quot;&quot; # å¯é€‰å¡« avatar: robohash # é»˜è®¤å¤´åƒ avatar_force: false # å¯é€‰å¡« meta: [&quot;nick&quot;, &quot;mail&quot;, &quot;link&quot;] # å¯é€‰å¡« page_size: 10 # å¯é€‰å¡« lang: zh-CN # å¯é€‰å¡« visitor: false # å¯é€‰å¡« highlight: true # å¯é€‰å¡« record_ip: false # å¯é€‰å¡« server_urls: # å¯é€‰å¡« emoji_cdn: # å¯é€‰å¡« emoji_maps: # å¯é€‰å¡« enable_qq: false # å¯é€‰å¡« required_fields: [] æµ‹è¯•valineè¯„è®ºæ‰§è¡Œ hexo c ä¸‰æ­¥ï¼Œé‡å¯åšå®¢ï¼ŒæŸ¥çœ‹æ•ˆæœï¼Œè¯„è®ºçš„æ•°æ®å­˜åœ¨leancloudåº”ç”¨ä¸­ï¼Œå¦‚å›¾ï¼š leancloudåº”ç”¨æ•°æ®ï¼š âš ï¸æ³¨æ„ï¼šåœ¨ Front-matter ä¸­é€šè¿‡commentså±æ€§è®¾ç½®trueæˆ–falseæ§åˆ¶è¯¥é¡µé¢æˆ–è€…æ˜¯æ–‡ç« çš„è¯„è®ºåŠŸèƒ½æ˜¯å¦æ‰“å¼€ï¼Œå¦‚ä¸‹ï¼š 123456---title: Tagsdate: 2019-12-19 16:10:19type: &quot;tags&quot;comments: false--- åŠ å¯†æ’ä»¶å‚è€ƒæ–‡ç« å¯¹ Hexo åšå®¢æ–‡ç« è¿›è¡ŒåŠ å¯† âš ï¸æ³¨æ„ï¼šéƒ¨ç½²åéœ€ä½¿ç”¨httpsåè®®ï¼Œé—®é¢˜å‚è€ƒ å¯†ç ä¹‹åæ²¡ååº” consoleæŠ¥é”™å¦‚ä¸‹ å…¶ä»–ä¸ªæ€§åŒ–è®¾ç½®ï¼ˆç»Ÿè®¡ï¼Œåˆ†äº«ç­‰ï¼‰ï¼Œå¤§å®¶å¯ä»¥è¯„è®ºåˆ†äº«ï¼Œå…±åŒæ¢è®¨ã€‚ ç»‘å®šä¸ªäººåŸŸååŸŸåè´­ä¹°è´­ä¹°æ¸ é“æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä»¥ é˜¿é‡Œäº‘çš„ä¸‡ç½‘åŸŸåè´­ä¹°ä¸ºä¾‹ï¼Œæ‰¾åˆ°åˆé€‚è‡ªå·±çš„åŸŸåï¼š é€‰æ‹©åŸŸåï¼Œæ ¹æ®æç¤ºç»‘å®šé‚®ç®±ä¸Šä¼ å®åè®¤è¯ä¿¡æ¯ï¼Œå®¡æ ¸é€šè¿‡åå³å¯ä»˜æ¬¾ åŸŸåè§£æåŸŸåè§£æåˆ°è´­ä¹°å‚å•†å¤„è¿›è¡Œè§£æï¼Œæ­¤å¤„åœ¨é˜¿é‡Œäº‘çš„ æ§åˆ¶å° &gt; åŸŸå &gt; åŸŸååˆ—è¡¨ æ‰¾åˆ°åŸŸåå³ä¾§å¯¹åº”çš„è§£ææŒ‰é’®ã€‚ç‚¹å‡»ç„¶åæ·»åŠ è§£æ æŒ‰ç…§å¦‚ä¸‹å¡«å†™æ·»åŠ è§£æï¼Œè®°å¾—æŠŠè®°å½•å€¼æ›¿æ¢æˆä½ è‡ªå·±çš„åšå®¢åœ°å€ ä»“åº“é…ç½®å›åˆ°githubä»“åº“ï¼Œè¿›å…¥ä½ çš„ä»“åº“è®¾ç½®é¡µé¢ï¼Œåœ¨æ·»åŠ åŸŸåï¼Œç„¶åä¿å­˜å³å¯ï¼Œgithubé»˜è®¤åœ¨ä»“åº“é‡Œé¢åˆ›å»ºä¸€ä¸ªCNAMEæ–‡ä»¶ï¼Œå†…å®¹ä¸ºä½ çš„åŸŸåï¼Œä¹‹åå°±å¯ä»¥é€šè¿‡ä½ çš„åŸŸåè®¿é—®åšå®¢å•¦ã€‚ æ­¤å¤„çš„ Enforce HTTPS é…ç½®ï¼Œé€‰ä¸­æ—¶å°†å¼ºåˆ¶ä½¿ç”¨HTTPSï¼Œæ‚¨çš„ç«™ç‚¹å°†åªé€šè¿‡HTTPSæœåŠ¡ï¼Œä¸èƒ½ä½¿ç”¨httpæœåŠ¡ï¼ˆåé¢å›¾åºŠå·¥å…·ä¸­æˆ‘ä»¬å°†åªèƒ½ä½¿ç”¨httpï¼Œè‹¥åŸŸåæœªé…ç½®SSLè¯ä¹¦ï¼‰ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´å›¾ç‰‡æ— æ³•æ˜¾ç¤º CNAME å³æŒ‡åˆ«åè®°å½•ï¼Œä¹Ÿè¢«ç§°ä¸ºè§„èŒƒåå­—ã€‚è¿™ç§è®°å½•å…ä½ å°†å¤šä¸ªåå­—æ˜ å°„åˆ°åŒä¸€å°è®¡ç®—æœºã€‚ å½“éœ€è¦å°†åŸŸåæŒ‡å‘å¦ä¸€ä¸ªåŸŸåï¼Œå†ç”±å¦ä¸€ä¸ªåŸŸåæä¾› ipåœ°å€ï¼Œå°±éœ€è¦æ·»åŠ  CNAME è®°å½•ã€‚ åœ¨githubä¸­é»˜è®¤ç”Ÿæˆçš„CNAMEæ–‡ä»¶ï¼Œä¼šåœ¨ä¸‹æ¬¡ hexo d éƒ¨ç½²ä¹‹åä¸¢å¤±ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®çš„ sourceæ–‡ä»¶ä¸‹æ–°å»ºCNAMEæ–‡ä»¶ï¼Œå†…å®¹ä¾ç„¶æ˜¯è‡ªå·±çš„åŸŸåï¼Œè¿™æ ·æ¯æ¬¡æ‰“åŒ…ï¼Œéƒ½ä¼šåœ¨ public æ–‡ä»¶ä¸­å¸¦æœ‰CNAMEæ–‡ä»¶ âš ï¸æ³¨æ„ï¼šä»¥ä¸Šæ­¥éª¤å®Œæˆåå¯ä»¥é€šè¿‡åŸŸåè®¿é—®ï¼Œä½†æ˜¯åŸŸåå‰æ˜¯httpåè®®ï¼Œè™½è¯´ä¸å½±å“ä½¿ç”¨å’Œé˜…è¯»ï¼Œä½†å¦‚ä½•å°†è‡ªå·±çš„åšå®¢åè®®æ”¹ä¸ºHttpsï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå›½å¤–çš„CDNæœåŠ¡æä¾›å•† Cloudflareï¼Œè¯¦ç»†æ“ä½œåç»­è¡¥å…¨ã€‚ ä½¿ç”¨å›¾åºŠå·¥å…·åšæ–‡ä¸­æœ‰å›¾ç‰‡æ—¶ï¼Œè‹¥æ˜¯å°‘é‡å›¾ç‰‡ï¼Œå¯ä»¥ç›´æ¥æŠŠå­˜æ”¾åœ¨sourceæ–‡ä»¶å¤¹ä¸­ï¼Œä½†ä¼šå æ®å¤§é‡çš„å­˜å‚¨çš„ç©ºé—´ï¼ŒåŠ è½½æ—¶ç¼“æ…¢ ï¼Œæ‰€ä»¥è€ƒè™‘æŠŠåšæ–‡é‡Œçš„å›¾ç‰‡ä¸Šä¼ åˆ°æŸä¸€ç½‘ç«™ï¼Œç„¶åè·å¾—å¤–éƒ¨é“¾æ¥ï¼Œä½¿ç”¨Markdownè¯­æ³•ï¼Œ![å›¾ç‰‡ä¿¡æ¯](å¤–éƒ¨é“¾æ¥) å®Œæˆå›¾ç‰‡çš„æ’å…¥ï¼Œè¿™ç§ç½‘ç«™å°±è¢«æˆä¸ºå›¾åºŠã€‚å¸¸è§çš„ç®€æ˜“çš„å›¾åºŠç½‘ç«™å¾ˆå¤šï¼Œå¤§å®¶æœ‰å…´è¶£å¯ä»¥è‡ªè¡Œæœç´¢ï¼Œæ¯”å¦‚ SM.MS ï¼Œpostimg ï¼Œä¸ƒç‰›äº‘ ç­‰ï¼Œgithubä¹Ÿæ˜¯å¯ä»¥ç”¨æ¥å½“åšå›¾åºŠã€‚æˆ‘ä»¬è¿™è¾¹ä»¥ ä¸ƒç‰›äº‘ ä¸ºä¾‹ã€‚ âš ï¸æ³¨æ„ï¼šä¸ƒç‰›äº‘æ³¨å†Œå¸å·åå…è´¹æä¾›ä¸€ä¸ªæµ‹è¯•åŸŸåï¼Œæ¯ä¸ªåŸŸåæ¯æ—¥é™æ€»æµé‡ 10GBï¼Œæ¯ä¸ªæµ‹è¯•åŸŸåè‡ªåˆ›å»ºèµ· 30 ä¸ªè‡ªç„¶æ—¥åç³»ç»Ÿä¼šè‡ªåŠ¨å›æ”¶ã€‚æ‰€ä»¥æœ‰é•¿ä¹…éœ€æ±‚çš„ç”¨æˆ·éœ€è¦è‡ªå·±çš„ä¸ªäººå¤‡æ¡ˆåŸŸåã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š æ³¨å†Œä¸ƒç‰›äº‘ åˆ›å»ºä¸ƒç‰›äº‘å­˜å‚¨ç©ºé—´ ä¸ªäººåŸŸåå¤‡æ¡ˆ ç»‘å®šåŸŸå æ³¨å†Œå¸å·æ ¹æ®æç¤ºå®Œæˆæ³¨å†Œç»‘å®šé‚®ç®±ç­‰æ“ä½œã€‚ åˆ›å»ºä¸ƒç‰›äº‘å­˜å‚¨ç©ºé—´åœ¨ æ§åˆ¶å° &gt; å¯¹è±¡å­˜å‚¨ &gt; ç©ºé—´ç®¡ç† ä¸­æ–°å»ºå­˜å‚¨ç©ºé—´ï¼Œåç§°è‡ªå®šä¹‰ï¼ŒåŒºåŸŸé€‰ç¦»è‡ªå·±è¿‘çš„ï¼Œè®¿é—®æ§åˆ¶å¯ä»¥é€‰å…¬å¼€ï¼Œè‹¥é€‰ç§æœ‰ï¼Œåç»­è·å–å›¾ç‰‡å¤–é“¾è¦æˆæƒã€‚ âš ï¸æ³¨æ„ï¼šæ­¤å¤„æœ‰å‘ï¼Œå°½é‡é€‰æ‹©å‰é¢çš„5ç§ï¼Œæš‚æ—¶åˆ«é€‰åä¸œ-æµ™æ±Ÿ2ï¼Œåé¢é…ç½®PicGoæ—¶ä¼šæœ‰é—®é¢˜ã€‚ åˆ›å»ºå®Œä¹‹åï¼Œåœ¨ æ§åˆ¶å° &gt; CDN &gt; åŸŸåç®¡ç† ä¸­å¯çœ‹åˆ°å…è´¹çš„æµ‹è¯•åŸŸåï¼š æµ‹è¯•åŸŸåæœ‰ä½¿ç”¨é™åˆ¶ï¼š æ‰€ä»¥éœ€è¦ç»‘å®šä¸€ä¸ªå·²å¤‡æ¡ˆçš„ä¸ªäººåŸŸåï¼š ä¸ªäººåŸŸåå¤‡æ¡ˆa. è¿›å…¥é˜¿é‡Œäº‘ æ§åˆ¶å° &gt; ICPå¤‡æ¡ˆ ç‚¹å‡»æˆ‘è¦å¤‡æ¡ˆ b. æ ¹æ®æç¤ºï¼Œå¡«å†™ä¿¡æ¯ ç‚¹å‡» ä¿¡æ¯æ ¡éªŒ ï¼Œè‹¥æŠ¥é”™ï¼Œåˆ™æ ¹æ®æç¤ºä¿®æ”¹ï¼Œå¯ä»¥å‚è€ƒICPå¤‡æ¡ˆæ–‡æ¡£ æˆ–å³ä¾§æ™ºèƒ½åœ¨çº¿è¯¢é—®ã€‚å› ä¸ºåŸŸåå®åè®¤è¯é€šè¿‡åè¿˜éœ€åŒæ­¥åˆ°å·¥ä¿¡å±€ï¼Œéœ€è¦1-2å¤©æ—¶é—´ï¼Œæ‰€ä»¥æŠ¥å¦‚ä¸‹é”™ï¼š ä¿¡æ¯å¡«å†™å®Œæ¯•ä¹‹åï¼Œéœ€è¦åˆ°appç«¯ç¡®è®¤ä¿¡æ¯ âš ï¸æ³¨æ„ï¼šå…¶ä¸­ç½‘ç«™åç§°åŠå¤‡æ³¨ç­‰ï¼Œé™åˆ¶è¾ƒå¤šè¯æ±‡ï¼Œä¸”è¯ä»¶ç…§éœ€è¦ç™½è‰²èƒŒæ™¯ç­‰ï¼Œå¯¼è‡´é˜¿é‡Œåˆå®¡æ—¶å¯èƒ½ä¼šä¸é€šè¿‡ï¼Œå®¢æœä¼šæ‰“ç”µè¯å¹¶å‘é‚®ä»¶é€šçŸ¥éœ€ä¿®æ”¹é¡¹ï¼Œé˜¿é‡Œåˆå®¡é€šè¿‡åéœ€è¦ç­‰å¾…å‡ ä¸ªå·¥ä½œæ—¥å·¥ä¿¡éƒ¨å®¡æ‰¹(æˆ‘æ˜¯3å¤©å·¦å³)ï¼Œæœ€åå¤‡æ¡ˆæˆåŠŸã€‚ ç»‘å®šåŸŸååŸŸåå¤‡æ¡ˆé€šè¿‡ä¹‹åï¼Œå³å¯åœ¨ä¸ƒç‰›äº‘ä¸­ç‚¹å‡» æ§åˆ¶å° &gt; CDN &gt; åŸŸåç®¡ç† &gt; æ·»åŠ åŸŸåï¼š åŠ é€ŸåŸŸåå¯ä»¥å¡«ä¸€ä¸ªäºŒçº§åŸŸåã€‚å³åœ¨ä½ çš„åŸŸåï¼ˆå‡å®šä¸ºxxxx.comï¼‰é¢å‰å¢åŠ ä¸€ä¸ªæ¯”å¦‚cdn.xxxx.comæˆ–è€…qn.xxxx.coméƒ½æ˜¯å¯ä»¥çš„ï¼Œå‰ç¼€éšä¾¿è¾“å…¥ã€‚ åˆ›å»ºå®Œæˆåï¼Œå°±ä¼šæœ‰ä¸€ä¸ªCNAMEçš„åŸŸåï¼Œå¤åˆ¶ï¼š åˆ°é˜¿é‡Œäº‘åŸŸåæ§åˆ¶å°è§£æDNSå¢åŠ æ–°çš„è®°å½•ï¼ˆåŒä¸Šé¢åŸŸåè§£ææ“ä½œï¼‰ï¼š å›åˆ°ä¸ƒç‰›äº‘åŸŸååˆ—è¡¨ï¼Œå¯çœ‹åˆ°çŠ¶æ€å·²æˆåŠŸï¼š åœ¨ä¸ƒç‰›äº‘ æ§åˆ¶å° &gt; å¯¹è±¡å­˜å‚¨ &gt; ç©ºé—´ç®¡ç† ä¸­ä¸Šä¼ ä¸€å¼ å›¾ç‰‡ï¼Œå¤åˆ¶å¤–é“¾åˆ°æµè§ˆå™¨çœ‹æ˜¯å¦æˆåŠŸï¼š ä½¿ç”¨å›¾åºŠå·¥å…·PicGoå›¾ä¼ å·¥å…·å°±æ˜¯è¯´å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬ä¸Šä¼ å›¾ç‰‡åˆ°å›¾åºŠçš„å®¢æˆ·ç«¯å·¥å…·ï¼ŒMpic æˆ– PicGoç­‰ï¼Œæˆ‘ä»¬ä½¿ç”¨PicGoã€‚å¯ä»¥é€šè¿‡ä¸‹è½½PicGo appï¼Œå› ä¸ºæˆ‘ä¸»è¦ä½¿ç”¨vsCodeç¼–è¾‘markdownï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨vscode PicGo æ’ä»¶ï¼Œ å®‰è£…vscodeæ’ä»¶ PicGoï¼š é…ç½®PicGoï¼ˆç»‘å®šä¸ƒç‰›äº‘ï¼‰ï¼š é€‰æ‹©ä¸ƒç‰›äº‘ä¸ºé»˜è®¤å›¾åºŠ ä¿®æ”¹å…¶ä»–é…ç½® Access Key å¯¹åº” ä¸ƒç‰›äº‘ä¸­ AccessKey Secret Key å¯¹åº” ä¸ƒç‰›äº‘ä¸­ SecretKey Bucket å¯¹åº” ä¸ƒç‰›äº‘ä¸­ ç©ºé—´åç§°(ä»¥å½“å‰åšå®¢ä¸ºä¾‹: czh-2) Url å¯¹åº” ä¸ƒç‰›äº‘ä¸­ äºŒçº§åŸŸå(ä»¥å½“å‰åšå®¢ä¸ºä¾‹: http://blog.xxx.cn) Area å¯¹åº” ä¸ƒç‰›äº‘ä¸­ å­˜å‚¨ç©ºé—´å†…çš„å­˜å‚¨åŒºåŸŸ å½“å‰æ’ä»¶ä¸­ Area å¯é€‰é¡¹åªæœ‰5é¡¹ï¼Œå¯¹åº”å¦‚å›¾ï¼š ä¸ƒç‰›äº‘å¯¹è±¡å­˜å‚¨åŒºåŸŸä¸Šä¼ è¡¨ï¼ˆé™¤åä¸œ-æµ™æ±Ÿ2: cn-east-2ï¼‰: ä¸ƒç‰›äº‘å¯é€‰å­˜å‚¨åŒºåŸŸï¼š å­˜å‚¨åŒºåŸŸè‹¥æ˜¯ä¸èƒ½ä¸ä¸ƒç‰›äº‘åŒ¹é…ï¼Œä¸Šä¼ å›¾ç‰‡æ—¶ä¼šæŠ¥å¦‚ä¸‹é”™ï¼šPicGo: ä¸Šä¼ å¤±è´¥! incorrect region, please use up-cn-east-2.qiniup.com ä½¿ç”¨PicGoä¸Šä¼ å›¾ç‰‡ ä»å‰ªè´´æ¿ä¸Šä¼ å¿«æ·é”®æ–¹å¼ï¼ŒWindows/Unixä¸º Ctrl + Alt + Uï¼ŒOsXä¸º Cmd + Opt + Uã€‚ ä»èµ„æºç®¡ç†å™¨é€‰æ‹©ä¸Šä¼ å¿«æ·é”®æ–¹å¼ï¼ŒWindows/Unixä¸º Ctrl + Alt + Eï¼ŒOsXä¸º Cmd + Opt + Eã€‚ è¾“å…¥æœ¬åœ°èµ„æºåœ°å€ä¸Šä¼ å¿«æ·é”®æ–¹å¼ï¼ŒWindows/Unixä¸º Ctrl + Alt + Oï¼ŒOsXä¸º Cmd + Opt + Oã€‚ ä»¥ä¸Šä¸‰ç§æ–¹å¼ä¸Šä¼ æ—¶ï¼Œè‹¥é€‰ä¸­æ–‡æœ¬åˆ™ä»¥é€‰ä¸­æ–‡æœ¬ä¸ºä¸Šä¼ æ–‡ä»¶å å…¶ä»–å†™åˆ°æ­¤å¤„ï¼Œå·®ä¸åˆ°ä¹Ÿå‘Šä¸€æ®µè½ï¼Œæ€»ç»“ä¸€äº›ç»éªŒï¼Œåˆ†äº«ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿ï¼Œå¼€æºç²¾ç¥ä¸ç­ã€‚å¸Œæœ›èƒ½ç»™æ­£åœ¨é˜…è¯»æ–‡ç« çš„ä½ å¸¦æ¥ä¸€äº›çµæ„Ÿä¸å¸®åŠ©ã€‚å¦‚æœæœ‰ä»»ä½•ç–‘é—®æˆ–è€…æ›´å¥½çš„æƒ³æ³•æ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï¼Œ å¤§å®¶ä¸€èµ·å­¦ä¹ ã€‚ â€”- End â€”-","link":"/2022/03/12/Hexo/hexo-site/"},{"title":"ç†è§£JS æ‰§è¡Œä¸Šä¸‹æ–‡ ä½œç”¨åŸŸ é—­åŒ…","text":"æ‰§è¡Œä¸Šä¸‹æ–‡ä½œç”¨åŸŸé—­åŒ… æ‰§è¡Œä¸Šä¸‹æ–‡(å‚è€ƒæ–‡ç« )ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯è¯„ä¼°å’Œæ‰§è¡Œ JavaScript ä»£ç çš„ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µã€‚æ¯å½“ Javascript ä»£ç åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå®ƒéƒ½æ˜¯åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚ ä¸‰ç§æ‰§è¡Œä¸Šä¸‹æ–‡ç±»å‹ å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ â€” è¿™æ˜¯é»˜è®¤æˆ–è€…è¯´åŸºç¡€çš„ä¸Šä¸‹æ–‡ï¼Œä»»ä½•ä¸åœ¨å‡½æ•°å†…éƒ¨çš„ä»£ç éƒ½åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­ã€‚å®ƒä¼šæ‰§è¡Œä¸¤ä»¶äº‹ï¼šåˆ›å»ºä¸€ä¸ªå…¨å±€çš„ window å¯¹è±¡ï¼ˆæµè§ˆå™¨çš„æƒ…å†µä¸‹ï¼‰ï¼Œå¹¶ä¸”è®¾ç½® this çš„å€¼ç­‰äºè¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚ä¸€ä¸ªç¨‹åºä¸­åªä¼šæœ‰ä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ â€” æ¯å½“ä¸€ä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶, éƒ½ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸Šä¸‹æ–‡ã€‚æ¯ä¸ªå‡½æ•°éƒ½æœ‰å®ƒè‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä¸è¿‡æ˜¯åœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶åˆ›å»ºçš„ã€‚å‡½æ•°ä¸Šä¸‹æ–‡å¯ä»¥æœ‰ä»»æ„å¤šä¸ªã€‚æ¯å½“ä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡è¢«åˆ›å»ºï¼Œå®ƒä¼šæŒ‰å®šä¹‰çš„é¡ºåºï¼ˆå°†åœ¨åæ–‡è®¨è®ºï¼‰æ‰§è¡Œä¸€ç³»åˆ—æ­¥éª¤ã€‚ Eval å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ â€” æ‰§è¡Œåœ¨ eval å‡½æ•°å†…éƒ¨çš„ä»£ç ä¹Ÿä¼šæœ‰å®ƒå±äºè‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä½†ç”±äº JavaScript å¼€å‘è€…å¹¶ä¸ç»å¸¸ä½¿ç”¨ evalï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä¸è®¨è®ºå®ƒã€‚ åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡æœ‰ä¸¤ä¸ªé˜¶æ®µï¼š1) åˆ›å»ºé˜¶æ®µ å’Œ 2) æ‰§è¡Œé˜¶æ®µ åˆ›å»ºé˜¶æ®µ this å€¼çš„å†³å®šï¼Œå³æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„ This ç»‘å®šã€‚ åˆ›å»ºè¯æ³•ç¯å¢ƒç»„ä»¶ã€‚ï¼ˆå­˜åœ¨å·®å¼‚ï¼Œè¿˜éœ€é˜…è¯»æºç ï¼‰ åˆ›å»ºå˜é‡ç¯å¢ƒç»„ä»¶ã€‚ this ç»‘å®šï¼šåœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œthis çš„å€¼æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚(åœ¨æµè§ˆå™¨ä¸­ï¼Œthiså¼•ç”¨ Window å¯¹è±¡)ã€‚åœ¨å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œthis çš„å€¼å–å†³äºè¯¥å‡½æ•°æ˜¯å¦‚ä½•è¢«è°ƒç”¨çš„ã€‚å¦‚æœå®ƒè¢«ä¸€ä¸ªå¼•ç”¨å¯¹è±¡è°ƒç”¨ï¼Œé‚£ä¹ˆ this ä¼šè¢«è®¾ç½®æˆé‚£ä¸ªå¯¹è±¡ï¼Œå¦åˆ™ this çš„å€¼è¢«è®¾ç½®ä¸ºå…¨å±€å¯¹è±¡æˆ–è€… undefinedï¼ˆåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼‰ã€‚ä¾‹å¦‚ï¼š 12345678let foo = { baz: function() { console.log(this); }}foo.baz(); // 'this' å¼•ç”¨ 'foo', å› ä¸º 'baz' è¢«å¯¹è±¡ 'foo' è°ƒç”¨let bar = foo.baz;bar(); // 'this' æŒ‡å‘å…¨å±€ window å¯¹è±¡ï¼Œå› ä¸ºæ²¡æœ‰æŒ‡å®šå¼•ç”¨å¯¹è±¡ æ‰§è¡Œé˜¶æ®µå®Œæˆå¯¹æ‰€æœ‰è¿™äº›å˜é‡çš„åˆ†é…ï¼Œæœ€åæ‰§è¡Œä»£ç ã€‚ âš ï¸æ³¨æ„ï¼šåœ¨æ‰§è¡Œé˜¶æ®µï¼Œå¦‚æœ JavaScript å¼•æ“ä¸èƒ½åœ¨æºç ä¸­å£°æ˜çš„å®é™…ä½ç½®æ‰¾åˆ° let å˜é‡çš„å€¼ï¼Œå®ƒä¼šè¢«èµ‹å€¼ä¸º undefinedã€‚ æ‰§è¡Œæ ˆä»€ä¹ˆæ˜¯æ‰§è¡Œæ ˆæ˜¯ä¸€ç§æ‹¥æœ‰ LIFOï¼ˆåè¿›å…ˆå‡ºï¼‰æ•°æ®ç»“æ„çš„æ ˆï¼Œè¢«ç”¨æ¥å­˜å‚¨ä»£ç è¿è¡Œæ—¶åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚å½“ JavaScript å¼•æ“ç¬¬ä¸€æ¬¡é‡åˆ°ä½ çš„è„šæœ¬æ—¶ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶ä¸”å‹å…¥å½“å‰æ‰§è¡Œæ ˆã€‚æ¯å½“å¼•æ“é‡åˆ°ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œå®ƒä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶å‹å…¥æ ˆçš„é¡¶éƒ¨ã€‚å¼•æ“ä¼šæ‰§è¡Œé‚£äº›æ‰§è¡Œä¸Šä¸‹æ–‡ä½äºæ ˆé¡¶çš„å‡½æ•°ã€‚å½“è¯¥å‡½æ•°æ‰§è¡Œç»“æŸæ—¶ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆä¸­å¼¹å‡ºï¼Œæ§åˆ¶æµç¨‹åˆ°è¾¾å½“å‰æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸Šä¸‹æ–‡ã€‚ 123456789101112131415let a = 'Hello World!';function first() { console.log('Inside first function'); second(); console.log('Again inside first function');}function second() { console.log('Inside second function');}first();console.log('Inside Global Execution Context'); å½“ä¸Šè¿°ä»£ç åœ¨æµè§ˆå™¨åŠ è½½æ—¶ï¼ŒJavaScript å¼•æ“åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æŠŠå®ƒå‹å…¥å½“å‰æ‰§è¡Œæ ˆã€‚å½“é‡åˆ° first() å‡½æ•°è°ƒç”¨æ—¶ï¼ŒJavaScript å¼•æ“ä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æŠŠå®ƒå‹å…¥å½“å‰æ‰§è¡Œæ ˆçš„é¡¶éƒ¨ã€‚ å½“ä» first() å‡½æ•°å†…éƒ¨è°ƒç”¨ second() å‡½æ•°æ—¶ï¼ŒJavaScript å¼•æ“ä¸º second() å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æŠŠå®ƒå‹å…¥å½“å‰æ‰§è¡Œæ ˆçš„é¡¶éƒ¨ã€‚å½“ second() å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œå®ƒçš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šä»å½“å‰æ ˆå¼¹å‡ºï¼Œå¹¶ä¸”æ§åˆ¶æµç¨‹åˆ°è¾¾ä¸‹ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå³ first() å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ å½“ first() æ‰§è¡Œå®Œæ¯•ï¼Œå®ƒçš„æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆå¼¹å‡ºï¼Œæ§åˆ¶æµç¨‹åˆ°è¾¾å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ä¸€æ—¦æ‰€æœ‰ä»£ç æ‰§è¡Œå®Œæ¯•ï¼ŒJavaScript å¼•æ“ä»å½“å‰æ ˆä¸­ç§»é™¤å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ åŸºæœ¬æ¦‚å¿µ jsçš„æ‰§è¡Œå®é™…ä¸Šæ˜¯æ”¾åˆ°æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆçš„ æ‰§è¡Œä¸Šä¸‹æ–‡å°±æ˜¯ä¸ºä»£ç çš„æ‰§è¡Œåšäº†ä¸€ç³»åˆ—å‡†å¤‡ï¼ŒåŒ…æ‹¬thiså’Œè¯æ³•ç¯å¢ƒå˜é‡ç¯å¢ƒç­‰ç­‰ æ‰§è¡Œæ ˆï¼šå­˜æ”¾æ‰§è¡Œä¸Šä¸‹æ–‡çš„åœ°æ–¹ï¼Œåœ¨æ ˆé¡¶çš„æ‰§è¡Œä¸Šä¸‹æ–‡å°±æ˜¯å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œjsæ€»ä¼šåˆ°è¿™é‡Œå¯»æ‰¾èµ„æºã€‚å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡åœ¨æ‰§è¡Œå®Œæ¯•ä¹‹åå°±ä¼šä»æ ˆé¡¶å¼¹å‡º åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡çš„å››ç§æƒ…å†µï¼šè¿›å…¥å…¨å±€ä»£ç ï¼Œè¿›å…¥functionå‡½æ•°ä½“ä»£ç ï¼Œè¿›å…¥evalå‡½æ•°æŒ‡å®šçš„ä»£ç ï¼Œè¿›å…¥moduleå‡½æ•° æ‰§è¡Œä¸Šä¸‹æ–‡çš„å†…éƒ¨ç»“æ„ï¼šè¯æ³•ç¯å¢ƒã€ç¯å¢ƒè®°å½•ï¼ˆç”³æ˜ï¼Œå­˜æ”¾å˜é‡ä¸å‡½æ•°çš„åœ°æ–¹ï¼‰+outeræŒ‡å‘(å½¢æˆä½œç”¨åŸŸé“¾çš„å…³é”®)ã€‘+ thisç»‘å®š(è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„thisæŒ‡å‘)(å‚è€ƒæ–‡ç« ) è¿™é‡Œæˆ‘ä»¬æŠŠå†™åœ¨ç¯å¢ƒè®°å½•ä¸Šçš„å˜é‡å’Œå‡½æ•°ç»Ÿç§°ä¸ºè¯æ³•ç¯å¢ƒ ä½œç”¨åŸŸå°±æ˜¯è§£æï¼ˆæŸ¥æ‰¾ï¼‰å˜é‡åçš„ä¸€ä¸ªé›†åˆï¼Œå°±æ˜¯å½“å‰è¿è¡Œä¸Šä¸‹æ–‡ï¼ˆä¹Ÿå¯ä»¥æ˜¯å½“å‰ä¸Šä¸‹æ–‡çš„è¯æ³•ç¯å¢ƒ) å…¨å±€ä½œç”¨åŸŸå°±æ˜¯å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ å‡½æ•°ä½œç”¨åŸŸå°±æ˜¯å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„è¯æ³•ç¯å¢ƒå‡½æ•°å£°æ˜å’Œå˜é‡å£°æ˜éƒ½ä¼šè¢«æå‡ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç»†èŠ‚ï¼Œé‚£å°±æ˜¯ï¼Œå‡½æ•°ä¼šé¦–å…ˆæå‡ï¼Œç„¶åæ‰æ˜¯å˜é‡ï¼ 12345678910111213141516171819// æºç foo();var foo;function foo(){ console.log(1);}foo = function(){ console.log(2);}// å®é™…function foo(){ console.log(1);}var foo; // å˜é‡å£°æ˜è¢«æå‡è‡³é¡¶éƒ¨foo(); // è¾“å‡º 1foo = function(){ console.log(2);} 1234console.log(foo);if (true) { var foo = 'foo'} step1:åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶åŠ å…¥æ ˆé¡¶ï¼Œå½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡å°±æ˜¯è¿™ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåœ¨æ ˆé¡¶tips:å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ–‡æœ¬ç¯å¢ƒï¼ˆèŠ±åå†Œï¼‰æœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼šå…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨æ‰§è¡Œç¯å¢ƒå°±æ˜¯windowå¯¹è±¡ï¼‰ä»¥åŠå…¨å±€[[scope]] (å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªå—ä½œç”¨åŸŸï¼Œå…¨å±€çš„å—)ä¸¤è€…çš„åŒºåˆ«ï¼švarå’Œfunctionå£°æ˜åˆ›å»ºåœ¨å…¨å±€å¯¹è±¡ä¸­ï¼Œè€Œlet const classå£°æ˜çš„å˜é‡åˆ›å»ºåœ¨å…¨å±€scopeä¸­å…ˆåˆ°å…¨å±€scopeä¸­æŸ¥æ‰¾å˜é‡ï¼Œç„¶åå†åˆ°å…¨å±€å¯¹è±¡ä¸­æŸ¥æ‰¾ step2:åˆ†æï¼šæ‰¾åˆ°æ‰€æœ‰éå‡½æ•°ä¸­çš„varå£°æ˜æ‰¾åˆ°æ‰€æœ‰çš„é¡¶çº§å‡½æ•°å£°æ˜æ‰¾åˆ°let const classå£°æ˜ step3:åå­—é‡å¤å¤„ç†1.let const classå£°æ˜çš„åå­—ä¹‹é—´ä¸èƒ½é‡å¤2.let const classå’Œvar functionçš„åå­—ä¹‹é—´ä¸èƒ½é‡å¤3.var å’Œ functionåå­—é‡å¤çš„ function step4:åˆ›å»ºç»‘å®šå£°æ˜å¹¶åˆå§‹åŒ–varä¸ºundefinedé¡¶çº§å‡½æ•°å£°æ˜ï¼šç”³æ˜functionåå­—ï¼Œå¹¶åˆå§‹åŒ–ä¸ºæ–°åˆ›å»ºå¯¹è±¡ï¼ˆè¿™é‡Œå‡½æ•°çš„å¯¹è±¡å°±å·²ç»åˆ›å»ºå®Œæˆäº†ï¼‰å—çº§ä¸­å‡½æ•°å£°æ˜ï¼ˆæ¯”å¦‚åœ¨ifå—ä¸­ï¼‰ï¼šå£°æ˜åå­—ï¼Œåˆå§‹åŒ–ä¸ºundefinedå£°æ˜let const class ä½†æœªåˆå§‹åŒ–,ä¸èƒ½ä½¿ç”¨ æ‰€ä»¥ä¼šæŠ¥é”™ step5:æ‰§è¡Œè¯­å¥ 1234567var a = 10function foo() { console.log(a); let a}foo()// Uncaught ReferenceError: Cannot access 'a' before initialization jsä¸­çš„ä»£ç æ€»æ˜¯éµå¾ªå…ˆç”³æ˜å†æ‰§è¡Œçš„å‡†åˆ™ï¼Œé‚£ä¹ˆåœ¨ç”³æ˜çš„æ—¶å€™var functionæ˜¯ç”³æ˜åœ¨å…¨å±€å¯¹è±¡ä¸Šçš„ï¼Œè€Œlet constæ˜¯ç™»å½•åœ¨å…¨å±€scopeä¸Šçš„ã€‚varå£°æ˜æ”¾å…¥å˜é‡ä¼šæå‡å¹¶åˆå§‹åŒ–ä¸ºundefined,ä½†æ˜¯let const ä¹Ÿä¼šæå‡(æ­¤å¤„è¿˜éœ€ä»”ç»†æ¢è®¨letåˆ°åº•ä¼šä¸ä¼šé€ æˆå˜é‡æå‡)ï¼Œåªæ˜¯ä¸ä¼šåˆå§‹åŒ–ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚æŸ¥æ‰¾å˜é‡çš„æ—¶å€™æ€»æ˜¯ä»å…¨å±€scopeåˆ°å…¨å±€å¯¹è±¡ä¸Šé¢æŸ¥æ‰¾ å˜é‡æå‡ä¸å‡½æ•°æå‡çš„æœºåˆ¶ å—çº§ä½œç”¨åŸŸ å—çº§ä½œç”¨åŸŸ,ä¸ä¼šå½¢æˆè‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œé“¾æ¥åœ¨åŸæ¥çš„æ–‡æœ¬ç¯å¢ƒä¹‹å‰æ‰§è¡Œå®Œæ¯•ä¹‹åå°±ä¼šè¢«é”€æ¯ 123456let inIf = 'out if statement'if (true) { let inIf = 'in if statement' console.log(inIf); //in if statement}console.log(inIf); //out if statement åˆ¤æ–­ä¸æˆ‘ä»¬ä¹‹å‰æ‰¾çš„ var é¡¶çº§å‡½æ•°å£°æ˜ let/const/classå£°æ˜æ˜¯å¦é‡å¤ å¦‚æœé‡å¤äº†ï¼Œå°±ä¸åšå¤„ç†å¦‚æœä¸é‡å¤ï¼Œå°±åœ¨å…¨å±€å¯¹è±¡ä¸­åˆ›å»ºä¸€ä¸ªä»¥å‡½æ•°åå‘½åçš„å˜é‡ï¼Œå¹¶ä¸”å°†å…¶åˆå§‹åŒ–ä¸ºundefined 1234567891011121314151617181920212223242526272829console.log(foo); //undefinedif (true) { function foo() { console.log('in block'); //in block }}foo()// å› ä¸ºå—é‡Œé¢æ˜¯å‡½æ•°ï¼Œåœ¨å‡½æ•°fooæ‰§è¡Œå®Œæ¯•é”€æ¯ä¹‹å‰ï¼Œå®ƒä¼šæŸ¥çœ‹å…¨å±€å˜é‡ä¸­æœ‰æ²¡æœ‰å‡½æ•°åfooï¼Œæ²¡æœ‰çš„è¯ï¼Œä¸åšå¤„ç†ï¼Œæœ‰çš„è¯ï¼Œå°±ä¼šæŠŠå…¨å±€å˜é‡ä¸­fooçš„å€¼(undefined)æ›¿æ¢ å…¨å±€å¯¹è±¡ä¸­å·²ç»å˜æˆå‡½æ•°å¯¹è±¡// åœ¨å—é‡Œçš„å‡½æ•°ä¹Ÿæ˜¯ä¼šæå‡çš„ï¼Œåªä¸è¿‡å®ƒæ²¡æœ‰ç«‹å³åˆ›å»ºå‡½æ•°ï¼Œå®ƒæ˜¯undefinedconsole.log(foo);if (false) { // function foo() { // console.log('......'); // }}let foo;// æŠ¥é”™,letå£°æ˜çš„å˜é‡åœ¨å…¨å±€scopeä¸Šï¼Œfooåœ¨å…¨å±€å¯¹è±¡ä¸Šæ²¡æœ‰æ‰¾åˆ°foo,äºæ˜¯ä¸åšå¤„ç†var foo// ';;',varå£°æ˜çš„å˜é‡åœ¨å…¨å±€å¯¹è±¡ä¸Šï¼Œfooåœ¨å…¨å±€å¯¹è±¡ä¸Šæ‰¾åˆ°foo,äºæ˜¯åœ¨æ‰§è¡Œç»“æŸä¹‹å‰å®Œæˆèµ‹å€¼if (true) { function foo() { console.log(';;'); }}foo()// å…ˆç”³æ˜åä½¿ç”¨ï¼Œç”³æ˜çš„åœ°æ–¹å°±æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ å‡½æ•°ä½œç”¨åŸŸ functionå‡½æ•°ä¼šåˆ›å»ºåœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡çš„è¯æ³•ç¯å¢ƒï¼ˆå…¨å±€å¯¹è±¡ï¼‰ä¹‹ä¸­ï¼Œå‡½æ•°åˆ›å»ºçš„æ—¶å€™å°±å·²ç»å®Œæˆåˆå§‹åŒ–æœ‰å‡½æ•°åäº†ã€‚å¹¶ä¸”å‡½æ•°åˆ›å»ºçš„æ—¶å€™å°±ä¼šæºå¸¦ä¸€ä¸ª[[scope]]ï¼ˆç±»ä¼¼äºä¸€ä¸ªå°èƒŒåŒ…ï¼Œè®°å½•å‡½æ•°åˆ›å»ºçš„ç¯å¢ƒï¼‰æ‰€ä»¥å‡½æ•°åœ¨åˆ›å»ºçš„æ—¶å€™ä½“å†…å°±ä¿å­˜äº†å®ƒåˆ›å»ºæ—¶æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ–‡æœ¬ç¯å¢ƒã€‚ç­‰åˆ°å®ƒæ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æ‰¾åˆ°å®ƒçš„[[scope]],é‡Œé¢ä¿å­˜ç€åˆ›å»ºæ—¶çš„æ–‡æœ¬ç¯å¢ƒ å‡½æ•°è°ƒç”¨çš„æ‰§è¡Œä¸Šä¸‹æ–‡â€”â€”å‡½æ•°åœ¨å“ªé‡Œåˆ›å»ºï¼Œå°±ä¿å­˜å“ªé‡Œçš„è¿è¡Œä¸Šä¸‹æ–‡ï¼›å‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°åˆ›å»ºçš„æ—¶å€™å†³å®šçš„è€Œä¸æ˜¯è°ƒç”¨çš„æ—¶å€™å†³å®š å‡½æ•°çš„ä½œç”¨åŸŸé“¾æ˜¯æ ¹æ®å‡½æ•°åˆ›å»ºçš„ä½ç½®å½¢æˆçš„ä½œç”¨åŸŸé“¾ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„é™æ€ä½œç”¨åŸŸï¼Œè¯æ³•ä½œç”¨åŸŸ å‡½æ•° å‡½æ•°åˆ›å»º JSå£°æ˜å‡½æ•°çš„ä¸‰ç§æ–¹å¼ï¼ˆå‚è€ƒæ–‡ç« ï¼‰: // å‡½æ•°è¡¨è¾¾å¼(function expression) var h = function() { // h } // å‡½æ•°å£°æ˜(function declaration) function h() { // h }1.å‡½æ•°å£°æ˜: å³ä¸Šé¢ç¬¬äºŒç§æ–¹å¼,ä¼šå£°æ˜ä¸€ä¸ªå…·åå‡½æ•°, ä¸”å‡½æ•°èƒ½åœ¨å…¶æ‰€åœ¨ä½œç”¨åŸŸçš„ä»»æ„ä½ç½®è¢«è°ƒç”¨, å…¶åˆ›å»ºçš„å‡½æ•°ä¸ºå…·åå‡½æ•°, è¯æ˜è¿™ä¸€ç‚¹ä½ å¯ä»¥ console.log(h.name); å¯ä»¥çœ‹åˆ°æ‰“å°ä¸º â€œhâ€. å¯åœ¨åé¢çš„ä»£ç ä¸­å°†æ­¤å‡½æ•°é€šè¿‡å‡½æ•°åèµ‹å€¼ç»™å˜é‡æˆ–è€…å¯¹è±¡å±æ€§ 2.å‡½æ•°è¡¨è¾¾å¼: å³ä¸Šé¢ç¬¬ä¸€ç§æ–¹å¼, è¿™ç§æ–¹æ³•ä½¿ç”¨functionæ“ä½œç¬¦åˆ›å»ºå‡½æ•°, è¡¨è¾¾å¼å¯ä»¥å­˜å‚¨åœ¨å˜é‡æˆ–è€…å¯¹è±¡å±æ€§é‡Œ. å‡½æ•°è¡¨è¾¾å¼å¾€å¾€è¢«ç§°ä¸ºåŒ¿åå‡½æ•°, å› ä¸ºå®ƒæ²¡æœ‰åå­—. è¯æ˜è¿™ä¸€ç‚¹ä½ å¯ä»¥ console.log(h.name); å¯ä»¥çœ‹åˆ°æ‰“å°ä¸ºç©º â€œâ€ 3.Function()æ„é€ å™¨: ä¸æ¨èè¿™ç§ç”¨æ³•, å®¹æ˜“å‡ºé—®é¢˜ 1-å‡½æ•°å£°æ˜ 12345// å…³äºå‡½æ•°å£°æ˜ï¼Œå®ƒæœ€é‡è¦çš„ä¸€ä¸ªç‰¹å¾å°±æ˜¯å‡½æ•°å£°æ˜æå‡ï¼Œæ„æ€æ˜¯æ‰§è¡Œä»£ç ä¹‹å‰å…ˆè¯»å–å‡½æ•°å£°æ˜ã€‚ä¸ç®¡å‡½æ•°å£°æ˜å†™åœ¨å‰é¢ï¼Œè¿˜æ˜¯åé¢ï¼Œéƒ½ä¼šå‡ºç°å‡½æ•°å£°æ˜çš„æå‡ã€‚add(1,2); //å¼¹çª—æ˜¾ç¤ºï¼š3 function add(x,y){ alert(x+y) } 2-å‘½åå‡½æ•°è¡¨è¾¾å¼ 12345var add = function(x,y){ alert(x+y) }add(1,2) //å¼¹çª—æ˜¾ç¤ºï¼š3 è¿™ç§å½¢å¼çœ‹èµ·æ¥å¥½åƒæ˜¯å¸¸è§„çš„å˜é‡èµ‹å€¼è¯­å¥ã€‚ä½†æ˜¯å‡½æ•°è¡¨è¾¾å¼å’Œå‡½æ•°å£°æ˜çš„åŒºåˆ«åœ¨äºï¼Œå‡½æ•°è¡¨è¾¾å¼åœ¨ä½¿ç”¨å‰å¿…é¡»å…ˆèµ‹å€¼ã€‚æ‰€ä»¥è¿™æ®µä»£ç æ‰§è¡Œçš„æ—¶å€™å°±ä¼šå‡ºé”™ï¼š 12345add(1,2) //æ— å¼¹çª—ï¼ŒæŠ¥é”™ï¼š add is not a function var add = function(x,y){ alert(x+y) } é€ æˆè¿™ç§ç°è±¡æ˜¯å› ä¸ºè§£æå™¨åœ¨å‘æ‰§è¡Œç¯å¢ƒä¸­åŠ è½½æ•°æ®æ—¶ï¼Œè§£æå™¨ä¼šç‡å…ˆè¯»å–å‡½æ•°å£°æ˜ï¼Œå¹¶ä½¿å…¶åœ¨æ‰§è¡Œä»»ä½•ä»£ç å‰å¯ç”¨ï¼›è‡³äºå‡½æ•°è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»ç­‰åˆ°è§£æå™¨æ‰§è¡Œåˆ°å®ƒçš„æ‰€åœ¨çš„çš„ä»£ç è¡Œï¼Œæ‰ä¼šçœŸæ­£çš„è¢«è§£æã€‚å‡½æ•°è¡¨è¾¾å¼ä¸­ï¼Œåˆ›å»ºçš„å‡½æ•°å«åšåŒ¿åå‡½æ•°ï¼Œå› ä¸ºfunctionå…³é”®å­—åé¢æ²¡æœ‰æ ‡è¯†ç¬¦ã€‚ å…ˆè¯´ä¸¤è€…çš„æ˜¾è‘—åŒºåˆ«: ç¬¬ä¸€ç§å£°æ˜æ–¹å¼ä¹Ÿå°±æ˜¯varå£°æ˜æ–¹å¼, å‡½æ•°åªæœ‰åœ¨varè¯­å¥å£°æ˜ä¹‹åæ‰èƒ½è¢«è°ƒç”¨ ç¬¬äºŒç§ç”³æ˜æ–¹å¼ä¹Ÿå°±æ˜¯functionå£°æ˜æ–¹å¼, å‡½æ•°å¯ä»¥åœ¨functionå£°æ˜ä¹‹å‰è¢«è°ƒç”¨ è¿™æ˜¯å› ä¸º, å¯¹ç¬¬ä¸€ç§æƒ…å†µ, å‡½æ•°è¡¨è¾¾å¼æ˜¯åœ¨å‡½æ•°è¿è¡Œé˜¶æ®µæ‰èµ‹å€¼ç»™å˜é‡h å¯¹ç¬¬äºŒç§æƒ…å†µ, å‡½æ•°ç”³æ˜æ˜¯åœ¨ä»£ç è¿è¡Œé˜¶æ®µä¹‹å‰, ä¹Ÿå°±æ˜¯ä»£ç è§£æé˜¶æ®µå°±èµ‹å€¼ç»™æ ‡è¯†ç¬¦h å¯ä»¥çœ‹ä¸‹é¢ä¸¤ä¸ªä¾‹å­: 1234567891011121314151617181920212223242526272829var h = function () { // h}console.log(h) h = function () { // h1}// æ‰“å°ï¼š Æ’ h() {// // h// }// å› ä¸ºèµ‹å€¼å‘ç”Ÿåœ¨ä»£ç è¿è¡Œé˜¶æ®µ, ä»£ç è‡ªä¸Šè€Œä¸‹è¿è¡Œconsole.log(h)æ‰€åœ¨ä½ç½®åªèƒ½è·å–å®ƒä¹‹å‰çš„èµ‹å€¼// ç¬¬äºŒç§æƒ…å†µï¼šfunction h() { // h}console.log(h) function h() { // h1}// æ‰“å°ï¼š Æ’ h() {// // h1// }// å› ä¸ºèµ‹å€¼å‘ç”Ÿåœ¨ä»£ç è§£æé˜¶æ®µ, ä»£ç è¿è¡Œåˆ°console.log(h)æ—¶è§£ææ—©å·²å®Œæˆ, è€Œè§£æçš„ç»“æœæ˜¯åé¢é‚£ä¸ªå‡½æ•°h, æ•…ä¼šæ‰“å°æ­¤ç»“æœ å‡½æ•°è¡¨è¾¾å¼ï¼ˆåŒ¿åå‡½æ•°ï¼‰è°ƒç”¨æ–¹å¼ï¼š ä½¿ç”¨()å°†åŒ¿åå‡½æ•°æ‹¬èµ·æ¥ï¼Œç„¶ååé¢å†åŠ ä¸€å¯¹å°æ‹¬å·ï¼ˆåŒ…å«å‚æ•°åˆ—è¡¨ï¼‰ã€‚æˆ‘ä»¬å†çœ‹ä¸€ä¸‹ä»¥ä¸‹ä¸€ä¸ªä¾‹å­ï¼š 1234567891011121314151617181920212223242526//è¡¨è¾¾å¼çš„è°ƒç”¨/*const add = function (x, y){ return x + y;}const sum = add(1, 2)console.log(sum)*///åŒ¿åå‡½æ•°å¼è°ƒç”¨//æ–¹å¼1//è¿™ç§æ–¹å¼å°½é‡å°‘ç”¨const sum1 = function(x, y){ return x + y;}(1, 2);//æ–¹å¼2 è‡ªæ‰§è¡Œå‡½æ•°//æ¨èconst sum = (function(x, y){ return x + y;})(1, 2);console.log(sum1);//æ–¹å¼3(new Function(&quot;x&quot;,&quot;y&quot;,&quot;return x+y&quot;))(1,2) è‡ªæ‰§è¡Œå‡½æ•°ï¼Œå³å®šä¹‰å’Œè°ƒç”¨åˆä¸ºä¸€ä½“ã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŒ¿åçš„å‡½æ•°ï¼Œå¹¶ç«‹å³æ‰§è¡Œå®ƒï¼Œç”±äºå¤–éƒ¨æ— æ³•å¼•ç”¨å®ƒå†…éƒ¨çš„å˜é‡ï¼Œå› æ­¤åœ¨æ‰§è¡Œå®Œåå¾ˆå¿«å°±ä¼šè¢«é‡Šæ”¾ï¼Œå…³é”®æ˜¯è¿™ç§æœºåˆ¶ä¸ä¼šæ±¡æŸ“å…¨å±€å¯¹è±¡ã€‚ 123456789101112131415161718192021// ä¸‹é¢2ä¸ªæ‹¬å¼§()éƒ½ä¼šç«‹å³æ‰§è¡Œ (function () { /* code */ } ()) // æ¨èä½¿ç”¨è¿™ä¸ª (function () { /* code */ })() // ä½†æ˜¯è¿™ä¸ªä¹Ÿæ˜¯å¯ä»¥ç”¨çš„ // ç”±äºæ‹¬å¼§()å’ŒJSçš„&amp;&amp;ï¼Œå¼‚æˆ–ï¼Œé€—å·ç­‰æ“ä½œç¬¦æ˜¯åœ¨å‡½æ•°è¡¨è¾¾å¼å’Œå‡½æ•°å£°æ˜ä¸Šæ¶ˆé™¤æ­§ä¹‰çš„ // æ‰€ä»¥ä¸€æ—¦è§£æå™¨çŸ¥é“å…¶ä¸­ä¸€ä¸ªå·²ç»æ˜¯è¡¨è¾¾å¼äº†ï¼Œå…¶å®ƒçš„ä¹Ÿéƒ½é»˜è®¤ä¸ºè¡¨è¾¾å¼äº† var i = function () { return 10; } (); true &amp;&amp; function () { /* code */ } (); 0, function () { /* code */ } (); // å¦‚æœä½ ä¸åœ¨æ„è¿”å›å€¼ï¼Œæˆ–è€…ä¸æ€•éš¾ä»¥é˜…è¯»// ä½ ç”šè‡³å¯ä»¥åœ¨functionå‰é¢åŠ ä¸€å…ƒæ“ä½œç¬¦å· !function () { /* code */ } (); ~function () { /* code */ } (); -function () { /* code */ } (); +function () { /* code */ } (); // è¿˜æœ‰ä¸€ä¸ªæƒ…å†µï¼Œä½¿ç”¨newå…³é”®å­—,ä¹Ÿå¯ä»¥ç”¨ï¼Œä½†æˆ‘ä¸ç¡®å®šå®ƒçš„æ•ˆç‡ // http://twitter.com/kuvos/status/18209252090847232 new function () { /* code */ } new function () { /* code */ } () // å¦‚æœéœ€è¦ä¼ é€’å‚æ•°ï¼Œåªéœ€è¦åŠ ä¸Šæ‹¬å¼§() å‡½æ•°å£°æ˜çš„å‡½æ•°åˆ›å»ºè¿‡ç¨‹ä½¿ç”¨çš„æ˜¯å½“å‰è¿è¡Œä¸Šä¸‹æ–‡çš„è¯æ³•ç¯å¢ƒï¼Œä½†æ˜¯å‘½åå‡½æ•°è¡¨è¾¾å¼åˆ›å»ºè¿‡ç¨‹æ˜¯åœ¨å½“å‰è¿è¡Œä¸Šä¸‹æ–‡è¯æ³•ç¯å¢ƒä¹‹å‰åŠ äº†æ–°çš„è¯æ³•ç¯å¢ƒï¼Œåœ¨è‡ªå·±çš„è¯æ³•ç¯å¢ƒä¸­æ·»åŠ å¯¹å‡½æ•°å‘½åfunnameçš„ç»‘å®šï¼Œå¹¶é€šè¿‡outerä¸å½“å‰è¿è¡Œä¸Šä¸‹æ–‡çš„è¯æ³•ç¯å¢ƒé“¾æ¥èµ·æ¥ã€‚funnameåœ¨å‡½æ•°å¤–æ˜¯æ²¡æœ‰å®šä¹‰çš„ 3-new Functionåˆ›å»º åªèƒ½è®¿é—®å…¨å±€å˜é‡ï¼Œæ‰€ä»¥ä¸ç®¡åœ¨å“ªå„¿åˆ›å»ºéƒ½ç±»ä¼¼äºåœ¨å…¨å±€ç¯å¢ƒä¸­åˆ›å»º å‡½æ•°çš„æ‰§è¡Œä¸åŒçš„å‡½æ•°è°ƒç”¨æ–¹å¼ä¼šç»™å‡½æ•°ä¼ é€’ä¸åŒçš„thisArgå€¼ æ™®é€šå‡½æ•°åŒ…æ‹¬IIDEï¼šä¼ é€’undefined å¯¹è±¡æ–¹æ³•ï¼šä¼ é€’å¯¹è±¡ newæ–¹æ³•ï¼šä¼ é€’æ–°åˆ›å»ºçš„å¯¹è±¡ ä¸åŒè°ƒç”¨æ–¹å¼çš„thisæŒ‡å‘thiså°±æ˜¯thisBindingï¼Œä½†æ˜¯å®ƒæ˜¯åŠ¨æ€çš„ï¼Œå®ƒä¸åœ¨å“ªå„¿è°ƒç”¨å¯†åˆ‡ç›¸å…³ æ™®é€šå‡½æ•°è°ƒç”¨ï¼šundefined(éä¸¥æ ¼æ¨¡å¼ä¸‹æ˜¯window) ä½œä¸ºæ–¹æ³•è°ƒç”¨ï¼šæŒ‡å‘someObject new functionè°ƒç”¨ï¼šæ€»æ˜¯æŒ‡å‘æ–°åˆ›å»ºçš„newObject call bind apply æŒ‡å‘å‚æ•°å¯¹è±¡ ç®­å¤´å‡½æ•°ä¸åœ¨å“ªå„¿åˆ›å»ºæœ‰å…³ï¼Œä¸èƒ½ä½¿ç”¨call bind apply å‚è€ƒjsä¸­æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆæ˜¯ä»€ä¹ˆ é—­åŒ…å‚è€ƒ æˆ‘ä»æ¥ä¸ç†è§£JavaScripté—­åŒ…ï¼Œç›´åˆ°æœ‰äººè¿™æ ·å‘æˆ‘è§£é‡Šå®ƒâ€¦ JS é—­åŒ…ç»å…¸ä½¿ç”¨åœºæ™¯å’Œå«é—­åŒ…å¿…åˆ·é¢˜ å¦‚æœæ²¡æœ‰é—­åŒ…çš„å­˜åœ¨ï¼Œå‡½æ•°æ‰§è¡Œå®Œäº†ä¹‹åï¼Œå®ƒçš„è¯æ³•ç¯å¢ƒå°±ä¼šè¢«é”€æ¯ï¼Œæ­£æ˜¯æœ‰äº†é—­åŒ…çš„å­˜åœ¨ï¼Œæ‰èƒ½åœ¨å…¨å±€ç¯å¢ƒä¸­å¼•ç”¨å‡½æ•°ï¼Œç»§è€Œä¿è¯æ•´ä¸ªå‡½æ•°ç¯å¢ƒçš„å­˜åœ¨ï¼ˆå‡½æ•°ä½“å†…æ€»æ˜¯æºå¸¦ç€å®ƒåˆå§‹åŒ–æ—¶çš„ç¯å¢ƒï¼‰ã€‚é—­åŒ…å¯ä»¥è®©å‡½æ•°åœ¨è¿è¡Œå®Œæ¯•ä¹‹åï¼Œå…¶è¿è¡Œä¸Šä¸‹æ–‡çš„è¯æ³•ç¯å¢ƒä»ç„¶èƒ½è¢«è®¿é—®ã€‚ 123456789function foo() { console.log(a);}function bar() { var a = 3 foo()}var a = 2bar() //2","link":"/2024/02/25/JavaScript/javaScript-bibao/"},{"title":"TS åŸºç¡€","text":"TS åŸºç¡€ åŸå§‹ç±»å‹: stringï¼Œnumber å’Œ booleanï¼ˆThe primitivesï¼‰JavaScript æœ‰ä¸‰ä¸ªéå¸¸å¸¸ç”¨çš„åŸå§‹ç±»å‹ (opens new window)ï¼šstringï¼Œnumber å’Œ booleanï¼Œæ¯ä¸€ä¸ªç±»å‹åœ¨ TypeScript ä¸­éƒ½æœ‰å¯¹åº”çš„ç±»å‹ã€‚ä»–ä»¬çš„åå­—è·Ÿä½ åœ¨ JavaScript ä¸­ä½¿ç”¨ typeof æ“ä½œç¬¦å¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„ã€‚ string è¡¨ç¤ºå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ â€œHello, worldâ€ number è¡¨ç¤ºæ•°å­—ï¼Œæ¯”å¦‚ 42ï¼ŒJavaScript ä¸­æ²¡æœ‰ int æˆ–è€… floatï¼Œæ‰€æœ‰çš„æ•°å­—ï¼Œç±»å‹éƒ½æ˜¯ number boolean è¡¨ç¤ºå¸ƒå°”å€¼ï¼Œå…¶å®ä¹Ÿå°±ä¸¤ä¸ªå€¼ï¼š true å’Œ false æ•°ç»„ï¼ˆArrayï¼‰å£°æ˜ä¸€ä¸ªç±»ä¼¼äº [1, 2, 3] çš„æ•°ç»„ç±»å‹ï¼Œä½ éœ€è¦ç”¨åˆ°è¯­æ³• number[]ã€‚è¿™ä¸ªè¯­æ³•å¯ä»¥é€‚ç”¨äºä»»ä½•ç±»å‹ï¼ˆä¸¾ä¸ªä¾‹å­ï¼Œstring[] è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼‰ã€‚ä½ ä¹Ÿå¯èƒ½çœ‹åˆ°è¿™ç§å†™æ³• Array&lt;number&gt;ï¼Œæ˜¯ä¸€æ ·çš„ã€‚æˆ‘ä»¬ä¼šåœ¨æ³›å‹ç« èŠ‚ä¸ºå¤§å®¶ä»‹ç» T&lt;U&gt; è¯­æ³•ã€‚ æ³¨æ„ [number] å’Œ number[] è¡¨ç¤ºä¸åŒçš„æ„æ€ï¼Œå‚è€ƒå…ƒç»„ (opens new window)ç« èŠ‚ anyTypeScript æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ç±»å‹ï¼Œanyï¼Œå½“ä½ ä¸å¸Œæœ›ä¸€ä¸ªå€¼å¯¼è‡´ç±»å‹æ£€æŸ¥é”™è¯¯çš„æ—¶å€™ï¼Œå°±å¯ä»¥è®¾ç½®ä¸º any ã€‚ å½“ä¸€ä¸ªå€¼æ˜¯ any ç±»å‹çš„æ—¶å€™ï¼Œä½ å¯ä»¥è·å–å®ƒçš„ä»»æ„å±æ€§ (ä¹Ÿä¼šè¢«è½¬ä¸º any ç±»å‹)ï¼Œæˆ–è€…åƒå‡½æ•°ä¸€æ ·è°ƒç”¨å®ƒï¼ŒæŠŠå®ƒèµ‹å€¼ç»™ä¸€ä¸ªä»»æ„ç±»å‹çš„å€¼ï¼Œæˆ–è€…æŠŠä»»æ„ç±»å‹çš„å€¼èµ‹å€¼ç»™å®ƒï¼Œå†æˆ–è€…æ˜¯å…¶ä»–è¯­æ³•æ­£ç¡®çš„æ“ä½œï¼Œéƒ½å¯ä»¥ï¼š 123456789let obj: any = { x: 0 };// None of the following lines of code will throw compiler errors.// Using `any` disables all further type checking, and it is assumed // you know the environment better than TypeScript.obj.foo();obj();obj.bar = 100;obj = &quot;hello&quot;;const n: number = obj; å½“ä½ ä¸æƒ³å†™ä¸€ä¸ªé•¿é•¿çš„ç±»å‹ä»£ç ï¼Œä»…ä»…æƒ³è®© TypeScript çŸ¥é“æŸæ®µç‰¹å®šçš„ä»£ç æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œany ç±»å‹æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ unknownå®ƒè¡¨ç¤ºæ‰€æœ‰ç±»å‹ï¼Œåœ¨å£°æ˜çš„æ—¶å€™ï¼Œå¼€å‘äººå‘˜ä¸ç¡®å®š(æˆ–ä¸çŸ¥é“)å¦‚ä½•ä½¿ç”¨è¯¥å€¼ï¼Œæˆ–è€…æ›´å…·ä½“åœ°è¯´ï¼Œå¦‚ä½•è®¿é—®å…¶æˆå‘˜(å¦‚æœæœ‰çš„è¯)ã€‚ å®ƒæ˜¯ any çš„è¡¥å……ï¼Œä½†å®ƒä»¥ä¸€ç§æ›´ç±»å‹å®‰å…¨çš„æ–¹å¼èµ·ä½œç”¨ã€‚è¿™æ„å‘³ç€ï¼Œç›´åˆ°ä½ çœŸæ­£ä½¿ç”¨ç±»å‹ä¸º unknown çš„å€¼æ—¶ï¼Œå®ƒæ‰è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œä½†ä¸€æ—¦ä½ çš„ä»£ç å¼€å§‹å¯¹å®ƒè¿›è¡Œå‡è®¾ï¼Œç¼–è¯‘å™¨å°†å¼€å§‹å¯¹å…¶ä½¿ç”¨è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚ 123456789// any ç±»å‹å¯ä»¥å¤åˆ¶ç»™å…¶ä»–å˜é‡let d: any;let c: string;c=d// unknown ä¸èƒ½å¤åˆ¶ç»™å…¶ä»–å˜é‡let a: unknown;c = a// ä¸èƒ½å°†ç±»å‹â€œunknownâ€åˆ†é…ç»™ç±»å‹â€œstringâ€ã€‚ neveræ°¸è¿œæ²¡æœ‰è¿”å›å€¼ 123function get():never{ throw new Error('æŠ¥é”™')} å…ƒç»„ç±»å‹å…ƒç»„ç±»å‹æ˜¯å¦ä¸€ç§ç±»å‹Arrayï¼Œå®ƒç¡®åˆ‡åœ°çŸ¥é“å®ƒåŒ…å«å¤šå°‘ä¸ªå…ƒç´ ï¼Œä»¥åŠå®ƒåœ¨ç‰¹å®šä½ç½®åŒ…å«å“ªäº›ç±»å‹ã€‚ 1type StringNumberPair = [string, number]; å˜é‡ä¸Šçš„ç±»å‹æ³¨è§£ï¼ˆType Annotations on Variablesï¼‰å½“ä½ ä½¿ç”¨ constã€var æˆ– let å£°æ˜ä¸€ä¸ªå˜é‡æ—¶ï¼Œä½ å¯ä»¥é€‰æ‹©æ€§çš„æ·»åŠ ä¸€ä¸ªç±»å‹æ³¨è§£ï¼Œæ˜¾å¼æŒ‡å®šå˜é‡çš„ç±»å‹ï¼š 1let myName: string = &quot;Alice&quot;; TypeScript å¹¶ä¸ä½¿ç”¨â€œåœ¨å·¦è¾¹è¿›è¡Œç±»å‹å£°æ˜â€çš„å½¢å¼ï¼Œæ¯”å¦‚ int x = 0ï¼›ç±»å‹æ³¨è§£å¾€å¾€è·Ÿåœ¨è¦è¢«å£°æ˜ç±»å‹çš„å†…å®¹åé¢ã€‚ä¸è¿‡å¤§éƒ¨åˆ†æ—¶å€™ï¼Œè¿™ä¸æ˜¯å¿…é¡»çš„ã€‚å› ä¸º TypeScript ä¼šè‡ªåŠ¨æ¨æ–­ç±»å‹ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå˜é‡çš„ç±»å‹å¯ä»¥åŸºäºåˆå§‹å€¼è¿›è¡Œæ¨æ–­ï¼š 12// No type annotation needed -- 'myName' inferred as type 'string'let myName = &quot;Alice&quot;; å¤§éƒ¨åˆ†æ—¶å€™ï¼Œä½ ä¸éœ€è¦å­¦ä¹ æ¨æ–­çš„è§„åˆ™ã€‚å¦‚æœä½ åˆšå¼€å§‹ä½¿ç”¨ï¼Œå°è¯•å°½å¯èƒ½å°‘çš„ä½¿ç”¨ç±»å‹æ³¨è§£ã€‚ä½ ä¹Ÿè®¸ä¼šæƒŠè®¶äºï¼ŒTypeScript ä»…ä»…éœ€è¦å¾ˆå°‘çš„å†…å®¹å°±å¯ä»¥å®Œå…¨ç†è§£å°†è¦å‘ç”Ÿçš„äº‹æƒ…ã€‚ å‡½æ•°ï¼ˆFunctionï¼‰å‚æ•°/è¿”å›å€¼ç±»å‹æ³¨è§£123function getFavoriteNumber(arg: number): number { return arg+1} åŒ¿åå‡½æ•°åŒ¿åå‡½æ•°æœ‰ä¸€ç‚¹ä¸åŒäºå‡½æ•°å£°æ˜ï¼Œå½“ TypeScript çŸ¥é“ä¸€ä¸ªåŒ¿åå‡½æ•°å°†è¢«æ€æ ·è°ƒç”¨çš„æ—¶å€™ï¼ŒåŒ¿åå‡½æ•°çš„å‚æ•°ä¼šè¢«è‡ªåŠ¨çš„æŒ‡å®šç±»å‹ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š 12345678910111213// No type annotations here, but TypeScript can spot the bugconst names = [&quot;Alice&quot;, &quot;Bob&quot;, &quot;Eve&quot;];// Contextual typing for functionnames.forEach(function (s) { console.log(s.toUppercase()); // Property 'toUppercase' does not exist on type 'string'. Did you mean 'toUpperCase'?}); // Contextual typing also applies to arrow functionsnames.forEach((s) =&gt; { console.log(s.toUppercase()); // Property 'toUppercase' does not exist on type 'string'. Did you mean 'toUpperCase'?}); å°½ç®¡å‚æ•° s å¹¶æ²¡æœ‰æ·»åŠ ç±»å‹æ³¨è§£ï¼Œä½† TypeScript æ ¹æ® forEach å‡½æ•°çš„ç±»å‹ï¼Œä»¥åŠä¼ å…¥çš„æ•°ç»„çš„ç±»å‹ï¼Œæœ€åæ¨æ–­å‡ºäº† s çš„ç±»å‹ã€‚ è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºä¸Šä¸‹æ–‡æ¨æ–­ï¼ˆcontextual typingï¼‰ï¼Œå› ä¸ºæ­£æ˜¯ä»å‡½æ•°å‡ºç°çš„ä¸Šä¸‹æ–‡ä¸­æ¨æ–­å‡ºäº†å®ƒåº”è¯¥æœ‰çš„ç±»å‹ã€‚ è·Ÿæ¨æ–­è§„åˆ™ä¸€æ ·ï¼Œä½ ä¹Ÿä¸éœ€è¦å­¦ä¹ å®ƒæ˜¯å¦‚ä½•å‘ç”Ÿçš„ï¼Œåªè¦çŸ¥é“ï¼Œå®ƒç¡®å®å­˜åœ¨å¹¶å¸®åŠ©ä½ çœæ‰æŸäº›å¹¶ä¸éœ€è¦çš„æ³¨è§£ã€‚åé¢ï¼Œæˆ‘ä»¬è¿˜ä¼šçœ‹åˆ°æ›´å¤šè¿™æ ·çš„ä¾‹å­ï¼Œäº†è§£ä¸€ä¸ªå€¼å‡ºç°çš„ä¸Šä¸‹æ–‡æ˜¯å¦‚ä½•å½±å“å®ƒçš„ç±»å‹çš„ã€‚ å¯¹è±¡ç±»å‹123456// The parameter's type annotation is an object typefunction printCoord(pt: { x: number; y?: number }) { console.log(&quot;The coordinate's x value is &quot; + pt.x); console.log(&quot;The coordinate's y value is &quot; + pt.y);}printCoord({ x: 3, y: 7 }); è¿™é‡Œï¼Œæˆ‘ä»¬ç»™å‚æ•°æ·»åŠ äº†ä¸€ä¸ªç±»å‹ï¼Œè¯¥ç±»å‹æœ‰ä¸¤ä¸ªå±æ€§, x å’Œ yï¼Œä¸¤ä¸ªéƒ½æ˜¯ number ç±»å‹ã€‚ä½ å¯ä»¥ä½¿ç”¨ , æˆ–è€… ; åˆ†å¼€å±æ€§ï¼Œæœ€åä¸€ä¸ªå±æ€§çš„åˆ†éš”ç¬¦åŠ ä¸åŠ éƒ½è¡Œã€‚ æ¯ä¸ªå±æ€§å¯¹åº”çš„ç±»å‹æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä½ ä¸æŒ‡å®šï¼Œé»˜è®¤ä½¿ç”¨ any ç±»å‹ã€‚ è”åˆç±»å‹ç¬¬ä¸€ç§ç»„åˆç±»å‹çš„æ–¹å¼æ˜¯ä½¿ç”¨è”åˆç±»å‹ï¼Œä¸€ä¸ªè”åˆç±»å‹æ˜¯ç”±ä¸¤ä¸ªæˆ–è€…æ›´å¤šç±»å‹ç»„æˆçš„ç±»å‹ï¼Œè¡¨ç¤ºå€¼å¯èƒ½æ˜¯è¿™äº›ç±»å‹ä¸­çš„ä»»æ„ä¸€ä¸ªã€‚è¿™å…¶ä¸­æ¯ä¸ªç±»å‹éƒ½æ˜¯è”åˆç±»å‹çš„æˆå‘˜ï¼ˆmembersï¼‰ã€‚ è®©æˆ‘ä»¬å†™ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥å¤„ç†å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ï¼š 1234567891011function printId(id: number | string) { console.log(&quot;Your ID is: &quot; + id);}// OKprintId(101);// OKprintId(&quot;202&quot;);// ErrorprintId({ myID: 22342 });// Argument of type '{ myID: number; }' is not assignable to parameter of type 'string | number'.// Type '{ myID: number; }' is not assignable to type 'number'. ç±»å‹åˆ«åæˆ‘ä»¬å·²ç»å­¦ä¼šåœ¨ç±»å‹æ³¨è§£é‡Œç›´æ¥ä½¿ç”¨å¯¹è±¡ç±»å‹å’Œè”åˆç±»å‹ï¼Œè¿™å¾ˆæ–¹ä¾¿ï¼Œä½†æœ‰çš„æ—¶å€™ï¼Œä¸€ä¸ªç±»å‹ä¼šè¢«ä½¿ç”¨å¤šæ¬¡ï¼Œæ­¤æ—¶æˆ‘ä»¬æ›´å¸Œæœ›é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„åå­—æ¥å¼•ç”¨å®ƒã€‚ è¿™å°±æ˜¯ç±»å‹åˆ«åï¼ˆtype aliasï¼‰ã€‚æ‰€è°“ç±»å‹åˆ«åï¼Œé¡¾åæ€ä¹‰ï¼Œä¸€ä¸ªå¯ä»¥æŒ‡ä»£ä»»æ„ç±»å‹çš„åå­—ã€‚ç±»å‹åˆ«åçš„è¯­æ³•æ˜¯ï¼š 12345678910type Point = { x: number; y: number;};// Exactly the same as the earlier examplefunction printCoord(pt: Point) { console.log(&quot;The coordinate's x value is &quot; + pt.x); console.log(&quot;The coordinate's y value is &quot; + pt.y);}printCoord({ x: 100, y: 100 }); ä½ å¯ä»¥ä½¿ç”¨ç±»å‹åˆ«åç»™ä»»æ„ç±»å‹ä¸€ä¸ªåå­—ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå‘½åä¸€ä¸ªè”åˆç±»å‹ï¼š 1type ID = number | string; æ¥å£ï¼ˆInterfacesï¼‰1234567891011interface Point { x: number; y: number;} function printCoord(pt: Point) { console.log(&quot;The coordinate's x value is &quot; + pt.x); console.log(&quot;The coordinate's y value is &quot; + pt.y);} printCoord({ x: 100, y: 100 }); å°±åƒæˆ‘ä»¬åœ¨ä¸ŠèŠ‚ä½¿ç”¨çš„ç±»å‹åˆ«åï¼Œè¿™ä¸ªä¾‹å­ä¹ŸåŒæ ·å¯ä»¥è¿è¡Œï¼Œå°±è·Ÿæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªåŒ¿åå¯¹è±¡ç±»å‹ä¸€æ ·ã€‚TypeScript åªå…³å¿ƒä¼ é€’ç»™ printCoord çš„å€¼çš„ç»“æ„ï¼ˆstructureï¼‰â€”â€”å…³å¿ƒå€¼æ˜¯å¦æœ‰æœŸæœ›çš„å±æ€§ã€‚æ­£æ˜¯è¿™ç§åªå…³å¿ƒç±»å‹çš„ç»“æ„å’Œèƒ½åŠ›çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬æ‰è®¤ä¸º TypeScript æ˜¯ä¸€ä¸ªç»“æ„åŒ–ï¼ˆstructurallyï¼‰çš„ç±»å‹ç³»ç»Ÿã€‚ ç±»å‹åˆ«åå’Œæ¥å£çš„ä¸åŒç±»å‹åˆ«åå’Œæ¥å£éå¸¸ç›¸ä¼¼ï¼Œå¤§éƒ¨åˆ†æ—¶å€™ï¼Œä½ å¯ä»¥ä»»æ„é€‰æ‹©ä½¿ç”¨ã€‚æ¥å£çš„å‡ ä¹æ‰€æœ‰ç‰¹æ€§éƒ½å¯ä»¥åœ¨ type ä¸­ä½¿ç”¨ï¼Œä¸¤è€…æœ€å…³é”®çš„å·®åˆ«åœ¨äºç±»å‹åˆ«åæœ¬èº«æ— æ³•æ·»åŠ æ–°çš„å±æ€§ï¼Œè€Œæ¥å£æ˜¯å¯ä»¥æ‰©å±•çš„ã€‚ 123456789101112131415161718192021222324252627// Interface// é€šè¿‡ç»§æ‰¿æ‰©å±•ç±»å‹interface Animal { name: string}interface Bear extends Animal { honey: boolean}const bear = getBear() bear.namebear.honey// Type// é€šè¿‡äº¤é›†æ‰©å±•ç±»å‹type Animal = { name: string}type Bear = Animal &amp; { honey: boolean }const bear = getBear();bear.name;bear.honey; 1234567891011121314151617181920212223// Interface// å¯¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ¥å£æ·»åŠ æ–°çš„å­—æ®µinterface Window { title: string}interface Window { ts: TypeScriptAPI}const src = 'const a = &quot;Hello World&quot;';Window.ts.transpileModule(src, {});// Type// åˆ›å»ºåä¸èƒ½è¢«æ”¹å˜type Window = { title: string}type Window = { ts: TypeScriptAPI}// Error: Duplicate identifier 'Window'. interfaceå¯ä»¥é‡å¤å£°æ˜ï¼Œtypeä¸è¡Œ ç»§æ‰¿æ–¹å¼ä¸ä¸€æ ·ï¼Œtypeä½¿ç”¨äº¤å‰ç±»å‹æ–¹å¼ï¼Œinterfaceä½¿ç”¨extendså®ç° åœ¨å¯¹è±¡æ‰©å±•çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ¥å£ç»§æ‰¿è¦æ¯”äº¤å‰ç±»å‹çš„æ€§èƒ½æ›´å¥½ å»ºè®®ä½¿ç”¨interfaceæ¥æè¿°å¯¹è±¡å¯¹å¤–æš´éœ²çš„æ¥å£ï¼Œä½¿ç”¨typeå°†ä¸€ç»„ç±»å‹é‡å‘½åï¼ˆæˆ–å¯¹ç±»å‹è¿›è¡Œå¤æ‚ç¼–ç¨‹ï¼‰ åœ¨åç»­çš„ç« èŠ‚é‡Œï¼Œä½ è¿˜ä¼šäº†è§£çš„æ›´å¤šã€‚æ‰€ä»¥ä¸‹é¢è¿™äº›å†…å®¹ä¸èƒ½ç«‹åˆ»ç†è§£ä¹Ÿæ²¡æœ‰å…³ç³»ï¼š åœ¨ TypeScript 4.2 ä»¥å‰ï¼Œç±»å‹åˆ«åçš„åå­—å¯èƒ½ä¼šå‡ºç°åœ¨æŠ¥é”™ä¿¡æ¯ä¸­ (opens new window)ï¼Œæœ‰æ—¶ä¼šæ›¿ä»£ç­‰ä»·çš„åŒ¿åç±»å‹ï¼ˆä¹Ÿè®¸å¹¶ä¸æ˜¯æœŸæœ›çš„ï¼‰ã€‚æ¥å£çš„åå­—åˆ™ä¼šå§‹ç»ˆå‡ºç°åœ¨é”™è¯¯ä¿¡æ¯ä¸­ã€‚ ç±»å‹åˆ«åä¹Ÿè®¸ä¸ä¼šå®ç°å£°æ˜åˆå¹¶ï¼Œä½†æ˜¯æ¥å£å¯ä»¥(opens new window) æ¥å£å¯èƒ½åªä¼šè¢«ç”¨äºå£°æ˜å¯¹è±¡çš„å½¢çŠ¶ï¼Œä¸èƒ½é‡å‘½ååŸå§‹ç±»å‹(opens new window) æ¥å£é€šè¿‡åå­—ä½¿ç”¨çš„æ—¶å€™ï¼Œä»–ä»¬çš„åå­—ä¼šæ€»æ˜¯å‡ºç°åœ¨é”™è¯¯ä¿¡æ¯ä¸­ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨ï¼Œåˆ™ä¼šå‡ºç°åŸå§‹ç»“æ„(opens new window)å¤§éƒ¨åˆ†æ—¶å€™ï¼Œä½ å¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½è¿›è¡Œé€‰æ‹©ã€‚TypeScript ä¼šå‘Šè¯‰ä½ å®ƒæ˜¯å¦éœ€è¦å…¶ä»–æ–¹å¼çš„å£°æ˜ã€‚å¦‚æœä½ å–œæ¬¢æ¢ç´¢æ€§çš„ä½¿ç”¨ï¼Œé‚£å°±ä½¿ç”¨ interface ï¼Œç›´åˆ°ä½ éœ€è¦ç”¨åˆ° type çš„ç‰¹æ€§ã€‚ ç±»å‹æ–­è¨€ï¼ˆType Assertionsï¼‰æœ‰çš„æ—¶å€™ï¼Œä½ çŸ¥é“ä¸€ä¸ªå€¼çš„ç±»å‹ï¼Œä½† TypeScript ä¸çŸ¥é“ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ ä½¿ç”¨ document.getElementByIdï¼ŒTypeScript ä»…ä»…çŸ¥é“å®ƒä¼šè¿”å›ä¸€ä¸ª HTMLElementï¼Œä½†æ˜¯ä½ å´çŸ¥é“ï¼Œä½ è¦è·å–çš„æ˜¯ä¸€ä¸ª HTMLCanvasElementã€‚è¿™æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€å°†å…¶æŒ‡å®šä¸ºä¸€ä¸ªæ›´å…·ä½“çš„ç±»å‹ï¼š 1const myCanvas = document.getElementById(&quot;main_canvas&quot;) as HTMLCanvasElement; å°±åƒç±»å‹æ³¨è§£ä¸€æ ·ï¼Œç±»å‹æ–­è¨€ä¹Ÿä¼šè¢«ç¼–è¯‘å™¨ç§»é™¤ï¼Œå¹¶ä¸”ä¸ä¼šå½±å“ä»»ä½•è¿è¡Œæ—¶çš„è¡Œä¸ºã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å°–æ‹¬å·è¯­æ³•ï¼ˆæ³¨æ„ä¸èƒ½åœ¨ .tsx æ–‡ä»¶å†…ä½¿ç”¨ï¼‰ï¼Œæ˜¯ç­‰ä»·çš„ï¼š 12345const myCanvas = &lt;HTMLCanvasElement&gt;document.getElementById(&quot;main_canvas&quot;);let a = 1let b = a as number// let b = &lt;number&gt;a è°¨è®°ï¼šå› ä¸ºç±»å‹æ–­è¨€ä¼šåœ¨ç¼–è¯‘çš„æ—¶å€™è¢«ç§»é™¤ï¼Œæ‰€ä»¥è¿è¡Œæ—¶å¹¶ä¸ä¼šæœ‰ç±»å‹æ–­è¨€çš„æ£€æŸ¥ï¼Œå³ä½¿ç±»å‹æ–­è¨€æ˜¯é”™è¯¯çš„ï¼Œä¹Ÿä¸ä¼šæœ‰å¼‚å¸¸æˆ–è€… null äº§ç”Ÿã€‚TypeScript ä»…ä»…å…è®¸ç±»å‹æ–­è¨€è½¬æ¢ä¸ºä¸€ä¸ªæ›´åŠ å…·ä½“æˆ–è€…æ›´ä¸å…·ä½“çš„ç±»å‹ã€‚è¿™ä¸ªè§„åˆ™å¯ä»¥é˜»æ­¢ä¸€äº›ä¸å¯èƒ½çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæ¯”å¦‚ï¼š 12const x = &quot;hello&quot; as number; // Conversion of type 'string' to type 'number' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first. æœ‰çš„æ—¶å€™ï¼Œè¿™æ¡è§„åˆ™ä¼šæ˜¾å¾—éå¸¸ä¿å®ˆï¼Œé˜»æ­¢äº†ä½ åŸæœ¬æœ‰æ•ˆçš„ç±»å‹è½¬æ¢ã€‚å¦‚æœå‘ç”Ÿäº†è¿™ç§äº‹æƒ…ï¼Œä½ å¯ä»¥ä½¿ç”¨åŒé‡æ–­è¨€ï¼Œå…ˆæ–­è¨€ä¸º any ï¼ˆæˆ–è€…æ˜¯ unknownï¼‰ï¼Œç„¶åå†æ–­è¨€ä¸ºæœŸæœ›çš„ç±»å‹ï¼š 1const a = (expr as any) as T; å­—é¢é‡ç±»å‹ï¼ˆLiteral Typesï¼‰é™¤äº†å¸¸è§çš„ç±»å‹ string å’Œ number ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ç±»å‹å£°æ˜ä¸ºæ›´å…·ä½“çš„æ•°å­—æˆ–è€…å­—ç¬¦ä¸²ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨ JavaScript ä¸­ï¼Œæœ‰å¤šç§æ–¹å¼å¯ä»¥å£°æ˜å˜é‡ã€‚æ¯”å¦‚ var å’Œ let ï¼Œè¿™ç§æ–¹å¼å£°æ˜çš„å˜é‡åç»­å¯ä»¥è¢«ä¿®æ”¹ï¼Œè¿˜æœ‰ const ï¼Œè¿™ç§æ–¹å¼å£°æ˜çš„å˜é‡åˆ™ä¸èƒ½è¢«ä¿®æ”¹ï¼Œè¿™å°±ä¼šå½±å“ TypeScript ä¸ºå­—é¢é‡åˆ›å»ºç±»å‹ã€‚ 1234567891011let changingString = &quot;Hello World&quot;;changingString = &quot;OlÃ¡ Mundo&quot;;// Because `changingString` can represent any possible string, that// is how TypeScript describes it in the type systemchangingString;// let changingString: stringconst constantString = &quot;Hello World&quot;;// Because `constantString` can only represent 1 possible string, it// has a literal type representationconstantString;// const constantString: &quot;Hello World&quot; å­—é¢é‡ç±»å‹æœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆå¤ªå¤§ç”¨ï¼š 123456let x: &quot;hello&quot; = &quot;hello&quot;;// OKx = &quot;hello&quot;;// ...x = &quot;howdy&quot;;// Type '&quot;howdy&quot;' is not assignable to type '&quot;hello&quot;'. å¦‚æœç»“åˆè”åˆç±»å‹ï¼Œå°±æ˜¾å¾—æœ‰ç”¨å¤šäº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå½“å‡½æ•°åªèƒ½ä¼ å…¥ä¸€äº›å›ºå®šçš„å­—ç¬¦ä¸²æ—¶ï¼š 123456function printText(s: string, alignment: &quot;left&quot; | &quot;right&quot; | &quot;center&quot;) { // ...}printText(&quot;Hello, world&quot;, &quot;left&quot;);printText(&quot;G'day, mate&quot;, &quot;centre&quot;);// Argument of type '&quot;centre&quot;' is not assignable to parameter of type '&quot;left&quot; | &quot;right&quot; | &quot;center&quot;'. æ•°å­—å­—é¢é‡ç±»å‹ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼š 123function compare(a: string, b: string): -1 | 0 | 1 { return a === b ? 0 : a &gt; b ? 1 : -1;} å½“ç„¶äº†ï¼Œä½ ä¹Ÿå¯ä»¥è·Ÿéå­—é¢é‡ç±»å‹è”åˆï¼š 1234567891011interface Options { width: number;}function configure(x: Options | &quot;auto&quot;) { // ...}configure({ width: 100 });configure(&quot;auto&quot;);configure(&quot;automatic&quot;);// Argument of type '&quot;automatic&quot;' is not assignable to parameter of type 'Options | &quot;auto&quot;'. è¿˜æœ‰ä¸€ç§å­—é¢é‡ç±»å‹ï¼Œå¸ƒå°”å­—é¢é‡ã€‚å› ä¸ºåªæœ‰ä¸¤ç§å¸ƒå°”å­—é¢é‡ç±»å‹ï¼Œ true å’Œ false ï¼Œç±»å‹ boolean å®é™…ä¸Šå°±æ˜¯è”åˆç±»å‹ true | false çš„åˆ«åã€‚ å­—é¢é‡æ¨æ–­ï¼ˆLiteral Inferenceï¼‰å½“ä½ åˆå§‹åŒ–å˜é‡ä¸ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼ŒTypeScript ä¼šå‡è®¾è¿™ä¸ªå¯¹è±¡çš„å±æ€§çš„å€¼æœªæ¥ä¼šè¢«ä¿®æ”¹ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ å†™ä¸‹è¿™æ ·çš„ä»£ç ï¼š 1234const obj = { counter: 0 };if (someCondition) { obj.counter = 1;} TypeScript å¹¶ä¸ä¼šè®¤ä¸º obj.counter ä¹‹å‰æ˜¯ 0ï¼Œ ç°åœ¨è¢«èµ‹å€¼ä¸º 1 æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚æ¢å¥è¯è¯´ï¼Œobj.counter å¿…é¡»æ˜¯ number ç±»å‹ï¼Œä½†ä¸è¦æ±‚ä¸€å®šæ˜¯ 0ï¼Œå› ä¸ºç±»å‹å¯ä»¥å†³å®šè¯»å†™è¡Œä¸ºã€‚è¿™ä¹ŸåŒæ ·åº”ç”¨äºå­—ç¬¦ä¸²: 1234declare function handleRequest(url: string, method: &quot;GET&quot; | &quot;POST&quot;): void;const req = { url: &quot;https://example.com&quot;, method: &quot;GET&quot; };handleRequest(req.url, req.method);// Argument of type 'string' is not assignable to parameter of type '&quot;GET&quot; | &quot;POST&quot;'. åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­é‡Œï¼Œreq.method è¢«æ¨æ–­ä¸º string ï¼Œè€Œä¸æ˜¯ &quot;GET&quot;ï¼Œå› ä¸ºåœ¨åˆ›å»º req å’Œ è°ƒç”¨ handleRequest å‡½æ•°ä¹‹é—´ï¼Œå¯èƒ½è¿˜æœ‰å…¶ä»–çš„ä»£ç ï¼Œæˆ–è®¸ä¼šå°† req.method èµ‹å€¼ä¸€ä¸ªæ–°å­—ç¬¦ä¸²æ¯”å¦‚ &quot;Guess&quot; ã€‚æ‰€ä»¥ TypeScript å°±æŠ¥é”™äº†ã€‚æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è§£å†³ï¼šæ·»åŠ ä¸€ä¸ªç±»å‹æ–­è¨€æ”¹å˜æ¨æ–­ç»“æœï¼š 1234// Change 1:const req = { url: &quot;https://example.com&quot;, method: &quot;GET&quot; as &quot;GET&quot; };// Change 2handleRequest(req.url, req.method as &quot;GET&quot;); ä¿®æ”¹ 1 è¡¨ç¤ºâ€œæˆ‘æœ‰æ„è®© req.method çš„ç±»å‹ä¸ºå­—é¢é‡ç±»å‹ &quot;GET&quot;ï¼Œè¿™ä¼šé˜»æ­¢æœªæ¥å¯èƒ½èµ‹å€¼ä¸º &quot;GUESS&quot; ç­‰å­—æ®µâ€ã€‚ä¿®æ”¹ 2 è¡¨ç¤ºâ€œæˆ‘çŸ¥é“ req.method çš„å€¼æ˜¯ &quot;GET&quot;â€.ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ as const æŠŠæ•´ä¸ªå¯¹è±¡è½¬ä¸ºä¸€ä¸ªç±»å‹å­—é¢é‡ï¼š 12const req = { url: &quot;https://example.com&quot;, method: &quot;GET&quot; } as const;handleRequest(req.url, req.method); as const æ•ˆæœè·Ÿ const ç±»ä¼¼ï¼Œä½†æ˜¯å¯¹ç±»å‹ç³»ç»Ÿè€Œè¨€ï¼Œå®ƒå¯ä»¥ç¡®ä¿æ‰€æœ‰çš„å±æ€§éƒ½è¢«èµ‹äºˆä¸€ä¸ªå­—é¢é‡ç±»å‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ›´é€šç”¨çš„ç±»å‹æ¯”å¦‚ string æˆ–è€… number ã€‚ null å’Œ undefinedJavaScript ä¸¤ä¸ªåŸå§‹ç±»å‹çš„å€¼ï¼Œç”¨äºè¡¨ç¤ºç©ºç¼ºæˆ–è€…æœªåˆå§‹åŒ–ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯ null å’Œ undefined ã€‚TypeScript æœ‰ä¸¤ä¸ªå¯¹åº”çš„åŒåç±»å‹ã€‚å®ƒä»¬çš„è¡Œä¸ºå–å†³äºæ˜¯å¦æ‰“å¼€äº† strictNullChecks (opens new window)é€‰é¡¹ã€‚ strictNullChecks å…³é—­å½“ strictNullChecks (opens new window)é€‰é¡¹å…³é—­çš„æ—¶å€™ï¼Œå¦‚æœä¸€ä¸ªå€¼å¯èƒ½æ˜¯ null æˆ–è€… undefinedï¼Œå®ƒä¾ç„¶å¯ä»¥è¢«æ­£ç¡®çš„è®¿é—®ï¼Œæˆ–è€…è¢«èµ‹å€¼ç»™ä»»æ„ç±»å‹çš„å±æ€§ã€‚è¿™æœ‰ç‚¹ç±»ä¼¼äºæ²¡æœ‰ç©ºå€¼æ£€æŸ¥çš„è¯­è¨€ (æ¯”å¦‚ C# ï¼ŒJava) ã€‚è¿™äº›æ£€æŸ¥çš„ç¼ºå°‘ï¼Œæ˜¯å¯¼è‡´ bug çš„ä¸»è¦æºå¤´ï¼Œæ‰€ä»¥æˆ‘ä»¬å§‹ç»ˆæ¨èå¼€å‘è€…å¼€å¯ strictNullChecks (opens new window)é€‰é¡¹ã€‚ strictNullChecks æ‰“å¼€å½“ strictNullChecks (opens new window)é€‰é¡¹æ‰“å¼€çš„æ—¶å€™ï¼Œå¦‚æœä¸€ä¸ªå€¼å¯èƒ½æ˜¯ null æˆ–è€… undefinedï¼Œä½ éœ€è¦åœ¨ç”¨å®ƒçš„æ–¹æ³•æˆ–è€…å±æ€§ä¹‹å‰ï¼Œå…ˆæ£€æŸ¥è¿™äº›å€¼ï¼Œå°±åƒç”¨å¯é€‰çš„å±æ€§ä¹‹å‰ï¼Œå…ˆæ£€æŸ¥ä¸€ä¸‹ æ˜¯å¦æ˜¯ undefined ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»å‹æ”¶çª„ï¼ˆnarrowingï¼‰æ£€æŸ¥å€¼æ˜¯å¦æ˜¯ nullï¼š 1234567function doSomething(x: string | null) { if (x === null) { // do nothing } else { console.log(&quot;Hello, &quot; + x.toUpperCase()); }} éç©ºæ–­è¨€æ“ä½œç¬¦ï¼ˆåç¼€ !ï¼‰TypeScript æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„è¯­æ³•ï¼Œå¯ä»¥åœ¨ä¸åšä»»ä½•æ£€æŸ¥çš„æƒ…å†µä¸‹ï¼Œä»ç±»å‹ä¸­ç§»é™¤ null å’Œ undefinedï¼Œè¿™å°±æ˜¯åœ¨ä»»æ„è¡¨è¾¾å¼åé¢å†™ä¸Š ! ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç±»å‹æ–­è¨€ï¼Œè¡¨ç¤ºå®ƒçš„å€¼ä¸å¯èƒ½æ˜¯ null æˆ–è€… undefinedï¼š 1234function liveDangerously(x?: number | null) { // No error console.log(x!.toFixed());} å°±åƒå…¶ä»–çš„ç±»å‹æ–­è¨€ï¼Œè¿™ä¹Ÿä¸ä¼šæ›´æ”¹ä»»ä½•è¿è¡Œæ—¶çš„è¡Œä¸ºã€‚é‡è¦çš„äº‹æƒ…è¯´ä¸€éï¼Œåªæœ‰å½“ä½ æ˜ç¡®çš„çŸ¥é“è¿™ä¸ªå€¼ä¸å¯èƒ½æ˜¯ null æˆ–è€… undefined æ—¶æ‰ä½¿ç”¨ ! ã€‚ æšä¸¾ï¼ˆEnumsï¼‰æšä¸¾æ˜¯ TypeScript æ·»åŠ çš„æ–°ç‰¹æ€§ï¼Œç”¨äºæè¿°ä¸€ä¸ªå€¼å¯èƒ½æ˜¯å¤šä¸ªå¸¸é‡ä¸­çš„ä¸€ä¸ªã€‚ä¸åŒäºå¤§éƒ¨åˆ†çš„ TypeScript ç‰¹æ€§ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªç±»å‹å±‚é¢çš„å¢é‡ï¼Œè€Œæ˜¯ä¼šæ·»åŠ åˆ°è¯­è¨€å’Œè¿è¡Œæ—¶ã€‚å› ä¸ºå¦‚æ­¤ï¼Œä½ åº”è¯¥äº†è§£ä¸‹è¿™ä¸ªç‰¹æ€§ã€‚ä½†æ˜¯å¯ä»¥ç­‰ä¸€ç­‰å†ç”¨ï¼Œé™¤éä½ ç¡®å®šè¦ä½¿ç”¨å®ƒã€‚ä½ å¯ä»¥åœ¨æšä¸¾ç±»å‹ (opens new window)é¡µé¢äº†è§£æ›´å¤šçš„ä¿¡æ¯ã€‚ 123456enum Direction { Up = 1, Down, Left, Right,} ä¸å¸¸è§çš„åŸå§‹ç±»å‹æˆ‘ä»¬æä¸€ä¸‹åœ¨ JavaScript ä¸­å‰©ä½™çš„ä¸€äº›åŸå§‹ç±»å‹ã€‚ä½†æ˜¯æˆ‘ä»¬å¹¶ä¸ä¼šæ·±å…¥è®²è§£ã€‚ bigIntES2020 å¼•å…¥åŸå§‹ç±»å‹ BigIntï¼Œç”¨äºè¡¨ç¤ºéå¸¸å¤§çš„æ•´æ•°ï¼š 12345// Creating a bigint via the BigInt functionconst oneHundred: bigint = BigInt(100); // Creating a BigInt via the literal syntaxconst anotherHundred: bigint = 100n; ä½ å¯ä»¥åœ¨ [TypeScript 3.2 çš„å‘å¸ƒæ—¥å¿—](the TypeScript 3.2 release notes)ä¸­äº†è§£æ›´å¤šä¿¡æ¯ã€‚ symbolè¿™ä¹Ÿæ˜¯ JavaScript ä¸­çš„ä¸€ä¸ªåŸå§‹ç±»å‹ï¼Œé€šè¿‡å‡½æ•° Symbol()ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå…¨å±€å”¯ä¸€çš„å¼•ç”¨ï¼š 1234567const firstName = Symbol(&quot;name&quot;);const secondName = Symbol(&quot;name&quot;); if (firstName === secondName) { // This condition will always return 'false' since the types 'typeof firstName' and 'typeof secondName' have no overlap. // Can't ever happen} ä½ å¯ä»¥åœ¨ Symbol é¡µé¢ (opens new window)äº†è§£æ›´å¤šçš„ä¿¡æ¯ã€‚","link":"/2024/03/26/TypeScript/ts-basic/"},{"title":"äº†è§£ Vue ç›¸å…³é—®é¢˜","text":"ç”Ÿå‘½å‘¨æœŸ vuex è™šæ‹Ÿdom äº†è§£ Vue diffç®—æ³• vue åº•å±‚ä»£ç  Vue.set() vue ç”Ÿå‘½å‘¨æœŸvue çš„ç”Ÿå‘½å‘¨æœŸé’©å­æ ¸å¿ƒå®ç°æ˜¯åˆ©ç”¨å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œå…ˆæŠŠç”¨æˆ·ä¼ å…¥çš„ç”Ÿå‘½å‘¨æœŸé’©å­è®¢é˜…å¥½ï¼Œå†…éƒ¨ä½¿ç”¨æ•°ç»„æ–¹å¼å­˜å‚¨ï¼Œç„¶åå†åˆ›å»ºå®ä¾‹è¿‡ç¨‹ä¸­ä¼šä¸€æ¬¡æ‰§è¡Œå¯¹åº”çš„é’©å­æ–¹å¼(å‘å¸ƒ)ï¼š beforeCreate: æ˜¯ new Vue() ä¹‹åè§¦å‘çš„ç¬¬ä¸€ä¸ªé’©å­ï¼Œå½“å‰é˜¶æ®µ dataã€methodsã€computed ä»¥åŠ watch ä¸Šçš„æ•°æ®å’Œæ–¹æ³•éƒ½ä¸èƒ½è®¿é—®ã€‚ created: å¯ä»¥ä½¿ç”¨æ•°æ®ï¼Œpropsï¼Œmethodsï¼Œdataä¾æ¬¡å¯è®¿é—®ï¼Œä»¥åŠæ›´æ”¹æ•°æ®ï¼Œæ— æ³•ä¸Dom è¿›è¡Œäº¤äº’ã€‚åœ¨å®ä¾‹åˆ›å»ºå®Œæˆåå‘ç”Ÿï¼Œå½“å‰é˜¶æ®µå·²ç»å®Œæˆäº†æ•°æ®è§‚æµ‹ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä½¿ç”¨æ•°æ®ï¼Œæ›´æ”¹æ•°æ®ï¼Œåœ¨è¿™é‡Œæ›´æ”¹æ•°æ®ä¸ä¼šè§¦å‘ updated å‡½æ•°ã€‚å¯ä»¥åšä¸€äº›åˆå§‹æ•°æ®çš„è·å–ï¼Œåœ¨å½“å‰é˜¶æ®µæ— æ³•ä¸ Dom è¿›è¡Œäº¤äº’ï¼Œå¦‚æœéè¦æƒ³ï¼Œå¯ä»¥é€šè¿‡ vm.$nextTick æ¥è®¿é—® Domã€‚ beforeMount: è™šæ‹Ÿdomå·²ç”Ÿæˆï¼ŒçœŸå®domæœªæŒ‚è½½ã€‚å‘ç”Ÿåœ¨æŒ‚è½½ä¹‹å‰ï¼Œåœ¨è¿™ä¹‹å‰ template æ¨¡æ¿å·²å¯¼å…¥æ¸²æŸ“å‡½æ•°ç¼–è¯‘ã€‚è€Œå½“å‰é˜¶æ®µè™šæ‹Ÿ Dom å·²ç»åˆ›å»ºå®Œæˆï¼Œå³å°†å¼€å§‹æ¸²æŸ“ã€‚åœ¨æ­¤æ—¶ä¹Ÿå¯ä»¥å¯¹æ•°æ®è¿›è¡Œæ›´æ”¹ï¼Œä¸ä¼šè§¦å‘ updatedã€‚ mounted: çœŸå®Domå·²æŒ‚è½½ï¼Œæ•°æ®å®ŒæˆåŒå‘ç»‘å®šï¼Œå¯ä»¥ä½¿ç”¨ $refs å¯¹Dom æ“ä½œã€‚åœ¨æŒ‚è½½å®Œæˆåå‘ç”Ÿï¼Œåœ¨å½“å‰é˜¶æ®µï¼ŒçœŸå®çš„ Dom æŒ‚è½½å®Œæ¯•ï¼Œæ•°æ®å®ŒæˆåŒå‘ç»‘å®šï¼Œå¯ä»¥è®¿é—®åˆ° Dom èŠ‚ç‚¹ï¼Œä½¿ç”¨ $refs å±æ€§å¯¹ Dom è¿›è¡Œæ“ä½œã€‚ beforeUpdate: å‘ç”Ÿåœ¨æ›´æ–°ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯å“åº”å¼æ•°æ®å‘ç”Ÿæ›´æ–°ï¼Œè™šæ‹Ÿ dom é‡æ–°æ¸²æŸ“ä¹‹å‰è¢«è§¦å‘ï¼Œä½ å¯ä»¥åœ¨å½“å‰é˜¶æ®µè¿›è¡Œæ›´æ”¹æ•°æ®ï¼Œä¸ä¼šé€ æˆé‡æ¸²æŸ“ã€‚ updated: å‘ç”Ÿåœ¨æ›´æ–°å®Œæˆä¹‹åï¼Œå½“å‰é˜¶æ®µç»„ä»¶ Dom å·²å®Œæˆæ›´æ–°ã€‚è¦æ³¨æ„çš„æ˜¯é¿å…åœ¨æ­¤æœŸé—´æ›´æ”¹æ•°æ®ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¯¼è‡´æ— é™å¾ªç¯çš„æ›´æ–°ã€‚ beforeDestroy: å‘ç”Ÿåœ¨å®ä¾‹é”€æ¯ä¹‹å‰ï¼Œåœ¨å½“å‰é˜¶æ®µå®ä¾‹å®Œå…¨å¯ä»¥è¢«ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™æ—¶è¿›è¡Œå–„åæ”¶å°¾å·¥ä½œï¼Œæ¯”å¦‚æ¸…é™¤è®¡æ—¶å™¨ã€‚ destroyed: å‘ç”Ÿåœ¨å®ä¾‹é”€æ¯ä¹‹åï¼Œè¿™ä¸ªæ—¶å€™åªå‰©ä¸‹äº† dom ç©ºå£³ã€‚ç»„ä»¶å·²è¢«æ‹†è§£ï¼Œæ•°æ®ç»‘å®šè¢«å¸é™¤ï¼Œç›‘å¬è¢«ç§»å‡ºï¼Œå­å®ä¾‹ä¹Ÿç»Ÿç»Ÿè¢«é”€æ¯ã€‚ vuex vuexçš„å‡ºç°æ˜¯ä¸ºäº†è§£å†³ç»„ä»¶é—´çš„é€šä¿¡é—®é¢˜,å¦‚æœæŸä¸ªæ“ä½œæˆ–è€…æ•°æ®ä¸æ¶‰åŠåˆ°å…¬å…±æ“ä½œ,åªæ˜¯å•ä¸€ç»„ä»¶æ“ä½œ,ä¸è¦æŠŠè¿™äº›çŠ¶æ€å€¼æˆ–è€…functionå­˜å‚¨åˆ°vuexä¸­,å› ä¸ºvuexä¼šæŠŠè‡ªèº«æŒ‚è½½åˆ°æ‰€æœ‰ç»„ä»¶ä¸Š,ä¸ç®¡å½“å‰ç»„ä»¶æ˜¯å¦ç”¨åˆ°é‡Œé¢çš„ä¸œè¥¿,å› æ­¤è¿™äº‹å®ä¸Šè‚¯å®šå¢åŠ äº†æ€§èƒ½çš„æŸè€—çš„. vuexä¸­ï¼Œæœ‰é»˜è®¤çš„äº”ç§åŸºæœ¬çš„å¯¹è±¡ï¼š stateï¼šå®šä¹‰äº†åº”ç”¨çŠ¶æ€çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥åœ¨è¿™é‡Œè®¾ç½®é»˜è®¤çš„åˆå§‹çŠ¶æ€ gettersï¼šå¯¹æ•°æ®è·å–ä¹‹å‰çš„å†æ¬¡ç¼–è¯‘ï¼Œå¯ä»¥ç†è§£ä¸ºstateçš„è®¡ç®—å±æ€§ã€‚ mutationsï¼šä¿®æ”¹çŠ¶æ€ï¼Œå¹¶ä¸”æ˜¯åŒæ­¥çš„ã€‚è¿™ä¸ªå’Œæˆ‘ä»¬ç»„ä»¶ä¸­çš„è‡ªå®šä¹‰äº‹ä»¶ç±»ä¼¼ã€‚ actionsï¼šç”¨äºæäº¤ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ï¼Œå¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚ modulesï¼šå…è®¸å°†å•ä¸€çš„ Store æ‹†åˆ†ä¸ºå¤šä¸ª store ä¸”åŒæ—¶ä¿å­˜åœ¨å•ä¸€çš„çŠ¶æ€æ ‘ä¸­ã€‚ mapGetters è¾…åŠ©å‡½æ•° é¡¹ç›®çš„srcæ–‡ä»¶å¤¹å¦‚ä¸‹ï¼š 1234567891011121314151617181920â”‚ App.vueâ”‚ main.jsâ”‚â”œâ”€assetsâ”‚ logo.pngâ”‚â”œâ”€componentsâ”‚ HelloWorld.vueâ”‚â”œâ”€routerâ”‚ index.jsâ”‚â””â”€store modules user.js app.js ... getters.js index.js index.js æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223import Vue from 'vue'import Vuex from 'vuex'import getters from './getters'Vue.use(Vuex)const modulesFiles = require.context('./modules', true, /\\.js$/)// you do not need `import app from './modules/app'`// it will auto require all vuex module from modules fileconst modules = modulesFiles.keys().reduce((modules, modulePath) =&gt; { // set './app.js' =&gt; 'app' const moduleName = modulePath.replace(/^\\.\\/(.*)\\.\\w+$/, '$1') const value = modulesFiles(modulePath) modules[moduleName] = value.default return modules}, {})const store = new Vuex.Store({ modules, getters})export default store getters.js æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 12345678const getters = { userName: state =&gt; state.user.userName, userId: state =&gt; state.user.userId, sessionId: state =&gt; state.app.sessionId, ...}export default getters å­˜å‚¨æ•°æ® 123// è°ƒç”¨å­˜å‚¨// app ä¸º modules æ–‡ä»¶åï¼ŒsetSessionId ä¸º actions ä¸­æ–¹æ³•åthis.$store.dispatch('app/setSessionId', data.sessionId) 1234567891011121314151617181920212223// app.jsconst state = { sessionId: null,}const mutations = { SET_SESSIONID: (state, sessionId) =&gt; { state.sessionId = sessionId },}const actions = { setSessionId({ commit }, sessionId) { commit('SET_SESSIONID', sessionId) },}export default { namespaced: true, state, mutations, actions} è°ƒç”¨æ•°æ®123computed: { ...mapGetters(['userId', 'sessionId']),} ç®€æ˜“ç‰ˆvuexvue.js 2.6 æ–°å¢äº†Observable APIï¼Œ é€šè¿‡è¿™ä¸ªapiï¼Œå¯ä»¥åº”å¯¹ä¸€äº›ç®€å•çš„è·¨ç»„ä»¶æ•°æ®å…±äº«ã€‚åƒæ˜¯ç®€æ˜“ç‰ˆvuex è™šæ‹ŸDOMä»€ä¹ˆæ˜¯è™šæ‹ŸDOMè™šæ‹ŸDOMç®€è€Œè¨€ä¹‹å°±æ˜¯ï¼Œç”¨JSå»æŒ‰ç…§DOMç»“æ„æ¥å®ç°çš„æ ‘å½¢ç»“æ„å¯¹è±¡ï¼Œä½ ä¹Ÿå¯ä»¥å«åšDOMå¯¹è±¡Virtual DOMæ˜¯å¯¹çœŸå®DOMçš„æŠ½è±¡,æœ¬è´¨ä¸Šæ˜¯æ ‘å½¢ç»“æ„JavaScriptå¯¹è±¡,è¿™ä¸ªå¯¹è±¡å°±æ˜¯æ›´åŠ è½»é‡çº§çš„å¯¹DOMçš„æè¿°. è™šæ‹ŸDOMçš„ä¼˜ç‚¹ é€šè¿‡diffç®—æ³•æ¥å¯¹æ¯”domæ–°è€èŠ‚ç‚¹ï¼Œæ›´æ–°è™šæ‹ŸDOMï¼Œå‡å°‘å¯¹çœŸå®DOMçš„æ“ä½œå¼€é”€ï¼Œæé«˜æ€§èƒ½ã€‚ è·¨å¹³å° æŠ½è±¡äº†åŸæœ¬çš„æ¸²æŸ“è¿‡ç¨‹å®ç°äº†è·¨å¹³å°ï¼Œä¸ä»…ä»…å±€é™äºæµè§ˆå™¨çš„ DOMï¼Œå¯ä»¥æ˜¯å®‰å“å’Œ IOS çš„åŸç”Ÿç»„ä»¶ï¼Œå¯ä»¥æ˜¯è¿‘æœŸå¾ˆç«çƒ­çš„å°ç¨‹åºï¼Œä¹Ÿå¯ä»¥æ˜¯å„ç§GUIã€‚ä»¥åŠä½¿ç”¨Node.jsï¼ˆæ²¡æœ‰DOMï¼‰å®ç°SSR(æœåŠ¡ç«¯æ¸²æŸ“)ã€‚ è™šæ‹ŸDOMå’Œjsæ“ä½œçœŸå®DOM è™šæ‹ŸDOMä¸ä¸€å®šä¼šæ¯”æ“ä½œåŸç”ŸDOMæ›´å¿«ã€‚ é¦–æ¬¡æ¸²æŸ“æˆ–è€…æ‰€æœ‰èŠ‚ç‚¹éƒ½éœ€è¦è¿›è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œè¿™ä¸ªæ—¶å€™é‡‡ç”¨è™šæ‹Ÿdomä¼šæ¯”ç›´æ¥æ“ä½œåŸç”Ÿdomå¤šä¸€é‡æ„å»ºè™šæ‹Ÿdomçš„åŠ¨ä½œï¼Œä¼šå ç”¨æ›´å¤šçš„å†…å­˜ä»¥åŠå»¶é•¿æ¸²æŸ“æ—¶é—´ è™šæ‹ŸDOMçš„ä¼˜åŠ¿åœ¨äºèŠ‚ç‚¹è¿›è¡Œæ”¹åŠ¨çš„æ—¶å€™å°½é‡å‡å°‘å¼€é”€ æ›´æ–°èŠ‚ç‚¹çš„æ—¶å€™ï¼Œå®ƒä¼šæ£€æŸ¥å“ªäº›èŠ‚ç‚¹éœ€è¦æ›´æ–°ã€‚å°½é‡å¤ç”¨å·²æœ‰domï¼Œå‡å°‘domçš„åˆ é™¤å’Œåˆ›å»ºï¼ˆdiffç®—æ³•ï¼‰ã€‚ Reactä»æ¥æ²¡è¯´è¿‡è™šæ‹ŸDOMä¼šæ¯”åŸç”Ÿæ›´å¿«ã€‚ æ¡†æ¶çš„æœ¬è´¨æ˜¯æå‡å¼€å‘æ•ˆç‡ï¼Œè®©æˆ‘ä»¬çš„æ³¨æ„åŠ›æ›´é›†ä¸­äºæ•°æ® åªéœ€è¦å…³æ³¨æ•°æ®çš„æ”¹å˜ï¼Œè‡³äºdomçš„ä¸€ç³»åˆ—åŠ¨ä½œï¼Œåœ¨æˆ‘ä»¬çš„æ•°æ®æ”¹å˜ä¹‹åï¼Œreactã€vueä¼šä¸ºæˆ‘ä»¬ä»£åŠ³ï¼Œè¿™æå¤§ç¨‹åº¦çš„æå‡äº†æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œä¹Ÿæ˜¯reactã€vueçš„æ ¸å¿ƒæ€æƒ³å’Œåˆè¡· è™šæ‹ŸDOMå¯¹è±¡1234567891011121314151617181920212223// çœŸå®DOM&lt;div id=&quot;app&quot;&gt; &lt;p class=&quot;text&quot;&gt;hello world!!!&lt;/p&gt;&lt;/div&gt;// è™šæ‹ŸDOM{ tag: 'div', props: { id: 'app' }, chidren: [ { tag: 'p', props: { className: 'text' }, chidren: [ 'hello world!!!' ] } ]} å¦‚ä½•è½¬æ¢ä¸ºè™šæ‹ŸDOMReact.createElementï¼Œä»¥åŠ Vue ä¸­çš„ render æ–¹æ³•ä¸­çš„ createElementï¼Œå¦å¤– React æ˜¯é€šè¿‡ babel å°† jsx è½¬æ¢ä¸º h å‡½æ•°æ¸²æŸ“çš„å½¢å¼ï¼Œè€Œ Vue æ˜¯ä½¿ç”¨ vue-loader å°†æ¨¡ç‰ˆè½¬ä¸º h å‡½æ•°æ¸²æŸ“çš„å½¢å¼ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡ babel-plugin-transform-vue-jsx æ’ä»¶åœ¨ vue ä¸­ä½¿ç”¨ jsxï¼Œæœ¬è´¨è¿˜æ˜¯è½¬æ¢ä¸º h å‡½æ•°æ¸²æŸ“å½¢å¼ï¼‰ã€‚ ä»¥reactä¸ºä¾‹ï¼Œä½¿ç”¨ babel å°†ä¸€æ®µ jsx ä»£ç ï¼Œè½¬æ¢ä¸ºä¸€æ®µ js ä»£ç ï¼š 1234567891011121314151617181920212223function getVDOM() { return ( &lt;div id=&quot;app&quot;&gt; &lt;p className=&quot;text&quot;&gt;hello world!!!&lt;/p&gt; &lt;/div&gt; )}function getVDOM() { return h('div', { id: 'app' },h('p', { lassName: 'text' },'hello world!!!'))}// å¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆ HTML ä»£ç ä¼šè¢«è½¬è¯‘æˆ h å‡½æ•°çš„æ¸²æŸ“å½¢å¼ã€‚h å‡½æ•°æ¥å—æ˜¯ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä»£è¡¨æ˜¯ DOM å…ƒç´ çš„æ ‡ç­¾åã€å±æ€§ã€å­èŠ‚ç‚¹ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªè™šæ‹Ÿ DOM çš„å¯¹è±¡ã€‚function h(tag, props, ...children) { return { tag, props: props || {}, children: children.flat() }} æ¸²æŸ“è™šæ‹ŸDOMæµè§ˆå™¨ç¯å¢ƒä¸‹å¦‚ä½•æ¸²æŸ“è™šæ‹Ÿ DOMã€‚ 123456789101112131415161718192021222324252627282930313233343536function render(vdom) { // å¦‚æœæ˜¯å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ï¼Œåˆ›å»ºä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ if (typeof vdom === 'string' || typeof vdom === 'number') { return document.createTextNode(vdom) } const { tag, props, children } = vdom // åˆ›å»ºçœŸå®DOM const element = document.createElement(tag) // è®¾ç½®å±æ€§ setProps(element, props) // éå†å­èŠ‚ç‚¹ï¼Œå¹¶è·å–åˆ›å»ºçœŸå®DOMï¼Œæ’å…¥åˆ°å½“å‰èŠ‚ç‚¹ children .map(render) .forEach(element.appendChild.bind(element)) // è™šæ‹Ÿ DOM ä¸­ç¼“å­˜çœŸå® DOM èŠ‚ç‚¹ vdom.dom = element // è¿”å› DOM èŠ‚ç‚¹ return element}function setProps (element, props) { Object.entries(props).forEach(([key, value]) =&gt; { setProp(element, key, value) })}function setProp (element, key, vlaue) { element.setAttribute( // classNameä½¿ç”¨classä»£æ›¿ key === 'className' ? 'class' : key, vlaue )} å°†è™šæ‹Ÿ DOM æ¸²æŸ“æˆçœŸå® DOM åï¼Œåªéœ€è¦æ’å…¥åˆ°å¯¹åº”çš„æ ¹èŠ‚ç‚¹å³å¯ã€‚ 1234const vdom = &lt;div&gt;hello world!!!&lt;/div&gt; // h('div', {}, 'hello world!!!')const app = document.getElementById('app')const ele = render(vdom)app.appendChild(ele) å½“ç„¶åœ¨ç°ä»£åŒ–çš„æ¡†æ¶ä¸­ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªç»„ä»¶æ–‡ä»¶ä¸“é—¨ç”¨æ¥æ„é€ è™šæ‹Ÿ DOMï¼Œæˆ‘ä»¬æ¨¡ä»¿ React ä½¿ç”¨ class çš„æ–¹å¼ç¼–å†™ç»„ä»¶ï¼Œç„¶åæ¸²æŸ“åˆ°é¡µé¢ä¸­ã€‚ 1234567891011121314151617181920212223242526class Component { vdom = null // ç»„ä»¶çš„è™šæ‹ŸDOMè¡¨ç¤º $el = null // è™šæ‹ŸDOMç”Ÿæˆçš„çœŸå®èŠ‚ç‚¹ state = { text: 'Initialize the Component' } render() { const { text } = this.state return ( &lt;div&gt;{ text }&lt;/div&gt; ) }}function createElement (app, component) { const vdom = component.render() component.vdom = vdom component.$el = render(vdom) // å°†è™šæ‹Ÿ DOM è½¬æ¢ä¸ºçœŸå® DOM app.appendChild(component.$el)}const app = document.getElementById('app')const component = new ComponentcreateElement(app, component) å¾ˆå¤šäººè®¤ä¸ºè™šæ‹Ÿ DOM æœ€å¤§çš„ä¼˜åŠ¿æ˜¯ diff ç®—æ³•ï¼Œå‡å°‘ JavaScript æ“ä½œçœŸå® DOM çš„å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚è™½ç„¶è¿™ä¸€ä¸ªè™šæ‹Ÿ DOM å¸¦æ¥çš„ä¸€ä¸ªä¼˜åŠ¿ï¼Œä½†å¹¶ä¸æ˜¯å…¨éƒ¨ã€‚è™šæ‹Ÿ DOM æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºæŠ½è±¡äº†åŸæœ¬çš„æ¸²æŸ“è¿‡ç¨‹ï¼Œå®ç°äº†è·¨å¹³å°çš„èƒ½åŠ›ï¼Œè€Œä¸ä»…ä»…å±€é™äºæµè§ˆå™¨çš„ DOMï¼Œå¯ä»¥æ˜¯å®‰å“å’Œ IOS çš„åŸç”Ÿç»„ä»¶ï¼Œå¯ä»¥æ˜¯è¿‘æœŸå¾ˆç«çƒ­çš„å°ç¨‹åºï¼Œä¹Ÿå¯ä»¥æ˜¯å„ç§GUI diffç®—æ³• diff ç®—æ³•ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ¯”å¯¹æ–°è€ VDOM çš„å˜åŒ–ï¼Œç„¶åå°†å˜åŒ–çš„éƒ¨åˆ†æ›´æ–°åˆ°è§†å›¾ä¸Šã€‚å¯¹åº”åˆ°ä»£ç ä¸Šï¼Œå°±æ˜¯ä¸€ä¸ª diff å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª patchesï¼ˆè¡¥ä¸ï¼‰ã€‚ å½“æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œsetæ–¹æ³•ä¼šè°ƒç”¨ Dep.notify é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…Watcherï¼Œè®¢é˜…è€…å°±ä¼šè°ƒç”¨patchç»™çœŸå®çš„DOMæ‰“è¡¥ä¸ï¼Œæ›´æ–°ç›¸åº”çš„è§†å›¾ 12345678910111213141516171819202122232425262728293031323334353637function patch(oldVnode, vnode, hydrating, removeOnly) { if (isUndef(vnode)) { // æ²¡æœ‰æ–°èŠ‚ç‚¹ï¼Œç›´æ¥æ‰§è¡Œdestoryé’©å­å‡½æ•° if (isDef(oldVnode)) invokeDestroyHook(oldVnode) return } let isInitialPatch = false const insertedVnodeQueue = [] if (isUndef(oldVnode)) { isInitialPatch = true createElm(vnode, insertedVnodeQueue) // æ²¡æœ‰æ—§èŠ‚ç‚¹ï¼Œç›´æ¥ç”¨æ–°èŠ‚ç‚¹ç”Ÿæˆdomå…ƒç´  } else { const isRealElement = isDef(oldVnode.nodeType) if (!isRealElement &amp;&amp; sameVnode(oldVnode, vnode)) { // åˆ¤æ–­æ—§èŠ‚ç‚¹å’Œæ–°èŠ‚ç‚¹è‡ªèº«ä¸€æ ·ï¼Œä¸€è‡´æ‰§è¡ŒpatchVnode patchVnode(oldVnode, vnode, insertedVnodeQueue, null, null, removeOnly) } else { // å¦åˆ™ç›´æ¥é”€æ¯åŠæ—§èŠ‚ç‚¹ï¼Œæ ¹æ®æ–°èŠ‚ç‚¹ç”Ÿæˆdomå…ƒç´  if (isRealElement) { if (oldVnode.nodeType === 1 &amp;&amp; oldVnode.hasAttribute(SSR_ATTR)) { oldVnode.removeAttribute(SSR_ATTR) hydrating = true } if (isTrue(hydrating)) { if (hydrate(oldVnode, vnode, insertedVnodeQueue)) { invokeInsertHook(vnode, insertedVnodeQueue, true) return oldVnode } } oldVnode = emptyNodeAt(oldVnode) } return vnode.elm } }} patchå‡½æ•°å‰ä¸¤ä¸ªå‚æ•°ä½ä¸ºoldVnode å’Œ Vnode ï¼Œåˆ†åˆ«ä»£è¡¨æ–°çš„èŠ‚ç‚¹å’Œä¹‹å‰çš„æ—§èŠ‚ç‚¹ï¼Œä¸»è¦åšäº†å››ä¸ªåˆ¤æ–­ï¼š æ²¡æœ‰æ–°èŠ‚ç‚¹ï¼Œç›´æ¥è§¦å‘æ—§èŠ‚ç‚¹çš„destoryé’©å­ æ²¡æœ‰æ—§èŠ‚ç‚¹ï¼Œè¯´æ˜æ˜¯é¡µé¢åˆšå¼€å§‹åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæ­¤æ—¶ï¼Œæ ¹æœ¬ä¸éœ€è¦æ¯”è¾ƒäº†ï¼Œç›´æ¥å…¨æ˜¯æ–°å»ºï¼Œæ‰€ä»¥åªè°ƒç”¨ createElm æ—§èŠ‚ç‚¹å’Œæ–°èŠ‚ç‚¹è‡ªèº«ä¸€æ ·ï¼Œé€šè¿‡ sameVnode åˆ¤æ–­èŠ‚ç‚¹æ˜¯å¦ä¸€æ ·ï¼Œä¸€æ ·æ—¶ï¼Œç›´æ¥è°ƒç”¨ patchVnode å»å¤„ç†è¿™ä¸¤ä¸ªèŠ‚ç‚¹ æ—§èŠ‚ç‚¹å’Œæ–°èŠ‚ç‚¹è‡ªèº«ä¸ä¸€æ ·ï¼Œå½“ä¸¤ä¸ªèŠ‚ç‚¹ä¸ä¸€æ ·çš„æ—¶å€™ï¼Œç›´æ¥åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œåˆ é™¤æ—§èŠ‚ç‚¹ ä¸‹é¢ä¸»è¦è®²çš„æ˜¯patchVnodeéƒ¨åˆ†: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273function patchVnode (oldVnode, vnode, insertedVnodeQueue, removeOnly) { // å¦‚æœæ–°æ—§èŠ‚ç‚¹ä¸€è‡´ï¼Œä»€ä¹ˆéƒ½ä¸åš if (oldVnode === vnode) { return } // è®©vnode.elå¼•ç”¨åˆ°ç°åœ¨çš„çœŸå®domï¼Œå½“elä¿®æ”¹æ—¶ï¼Œvnode.elä¼šåŒæ­¥å˜åŒ– const elm = vnode.elm = oldVnode.elm // å¼‚æ­¥å ä½ç¬¦ if (isTrue(oldVnode.isAsyncPlaceholder)) { if (isDef(vnode.asyncFactory.resolved)) { hydrate(oldVnode.elm, vnode, insertedVnodeQueue) } else { vnode.isAsyncPlaceholder = true } return } // å¦‚æœæ–°æ—§éƒ½æ˜¯é™æ€èŠ‚ç‚¹ï¼Œå¹¶ä¸”å…·æœ‰ç›¸åŒçš„key // å½“vnodeæ˜¯å…‹éš†èŠ‚ç‚¹æˆ–æ˜¯v-onceæŒ‡ä»¤æ§åˆ¶çš„èŠ‚ç‚¹æ—¶ï¼Œåªéœ€è¦æŠŠoldVnode.elmå’ŒoldVnode.childéƒ½å¤åˆ¶åˆ°vnodeä¸Š // ä¹Ÿä¸ç”¨å†æœ‰å…¶ä»–æ“ä½œ if (isTrue(vnode.isStatic) &amp;&amp; isTrue(oldVnode.isStatic) &amp;&amp; vnode.key === oldVnode.key &amp;&amp; (isTrue(vnode.isCloned) || isTrue(vnode.isOnce)) ) { vnode.componentInstance = oldVnode.componentInstance return } let i const data = vnode.data if (isDef(data) &amp;&amp; isDef(i = data.hook) &amp;&amp; isDef(i = i.prepatch)) { i(oldVnode, vnode) } const oldCh = oldVnode.children const ch = vnode.children if (isDef(data) &amp;&amp; isPatchable(vnode)) { for (i = 0; i &lt; cbs.update.length; ++i) cbs.update[i](oldVnode, vnode) if (isDef(i = data.hook) &amp;&amp; isDef(i = i.update)) i(oldVnode, vnode) } // å¦‚æœvnodeä¸æ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–è€…æ³¨é‡ŠèŠ‚ç‚¹ if (isUndef(vnode.text)) { // å¹¶ä¸”éƒ½æœ‰å­èŠ‚ç‚¹ if (isDef(oldCh) &amp;&amp; isDef(ch)) { // å¹¶ä¸”å­èŠ‚ç‚¹ä¸å®Œå…¨ä¸€è‡´ï¼Œåˆ™è°ƒç”¨updateChildren if (oldCh !== ch) updateChildren(elm, oldCh, ch, insertedVnodeQueue, removeOnly) // å¦‚æœåªæœ‰æ–°çš„vnodeæœ‰å­èŠ‚ç‚¹ } else if (isDef(ch)) { if (isDef(oldVnode.text)) nodeOps.setTextContent(elm, '') // elmå·²ç»å¼•ç”¨äº†è€çš„domèŠ‚ç‚¹ï¼Œåœ¨è€çš„domèŠ‚ç‚¹ä¸Šæ·»åŠ å­èŠ‚ç‚¹ addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue) // å¦‚æœæ–°vnodeæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œè€Œvnodeæœ‰å­èŠ‚ç‚¹ï¼Œç›´æ¥åˆ é™¤è€çš„oldCh } else if (isDef(oldCh)) { removeVnodes(elm, oldCh, 0, oldCh.length - 1) // å¦‚æœè€èŠ‚ç‚¹æ˜¯æ–‡æœ¬èŠ‚ç‚¹ } else if (isDef(oldVnode.text)) { nodeOps.setTextContent(elm, '') } // å¦‚æœæ–°vnodeå’Œè€vnodeæ˜¯æ–‡æœ¬èŠ‚ç‚¹æˆ–æ³¨é‡ŠèŠ‚ç‚¹ // ä½†æ˜¯vnode.text != oldVnode.textæ—¶ï¼Œåªéœ€è¦æ›´æ–°vnode.elmçš„æ–‡æœ¬å†…å®¹å°±å¯ä»¥ } else if (oldVnode.text !== vnode.text) { nodeOps.setTextContent(elm, vnode.text) } if (isDef(data)) { if (isDef(i = data.hook) &amp;&amp; isDef(i = i.postpatch)) i(oldVnode, vnode) } } patchVnodeä¸»è¦åšäº†å‡ ä¸ªåˆ¤æ–­ï¼š æ–°èŠ‚ç‚¹æ˜¯å¦æ˜¯æ–‡æœ¬èŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ç›´æ¥æ›´æ–°domçš„æ–‡æœ¬å†…å®¹ä¸ºæ–°èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ æ–°èŠ‚ç‚¹å’Œæ—§èŠ‚ç‚¹å¦‚æœéƒ½æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™å¤„ç†æ¯”è¾ƒæ›´æ–°å­èŠ‚ç‚¹ åªæœ‰æ–°èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼Œæ—§èŠ‚ç‚¹æ²¡æœ‰ï¼Œé‚£ä¹ˆä¸ç”¨æ¯”è¾ƒäº†ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯å…¨æ–°çš„ï¼Œæ‰€ä»¥ç›´æ¥å…¨éƒ¨æ–°å»ºå°±å¥½äº†ï¼Œæ–°å»ºæ˜¯æŒ‡åˆ›å»ºå‡ºæ‰€æœ‰æ–°DOMï¼Œå¹¶ä¸”æ·»åŠ è¿›çˆ¶èŠ‚ç‚¹ åªæœ‰æ—§èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹è€Œæ–°èŠ‚ç‚¹æ²¡æœ‰ï¼Œè¯´æ˜æ›´æ–°åçš„é¡µé¢ï¼Œæ—§èŠ‚ç‚¹å…¨éƒ¨éƒ½ä¸è§äº†ï¼Œé‚£ä¹ˆè¦åšçš„ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰çš„æ—§èŠ‚ç‚¹åˆ é™¤ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥æŠŠDOM åˆ é™¤ å­èŠ‚ç‚¹ä¸å®Œå…¨ä¸€è‡´ï¼Œåˆ™è°ƒç”¨updateChildren: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109function updateChildren (parentElm, oldCh, newCh, insertedVnodeQueue, removeOnly) { let oldStartIdx = 0 // æ—§å¤´ç´¢å¼• let newStartIdx = 0 // æ–°å¤´ç´¢å¼• let oldEndIdx = oldCh.length - 1 // æ—§å°¾ç´¢å¼• let newEndIdx = newCh.length - 1 // æ–°å°¾ç´¢å¼• let oldStartVnode = oldCh[0] // oldVnodeçš„ç¬¬ä¸€ä¸ªchild let oldEndVnode = oldCh[oldEndIdx] // oldVnodeçš„æœ€åä¸€ä¸ªchild let newStartVnode = newCh[0] // newVnodeçš„ç¬¬ä¸€ä¸ªchild let newEndVnode = newCh[newEndIdx] // newVnodeçš„æœ€åä¸€ä¸ªchild let oldKeyToIdx, idxInOld, vnodeToMove, refElm // removeOnly is a special flag used only by &lt;transition-group&gt; // to ensure removed elements stay in correct relative positions // during leaving transitions const canMove = !removeOnly // å¦‚æœoldStartVnodeå’ŒoldEndVnodeé‡åˆï¼Œå¹¶ä¸”æ–°çš„ä¹Ÿéƒ½é‡åˆäº†ï¼Œè¯æ˜diffå®Œäº†ï¼Œå¾ªç¯ç»“æŸ while (oldStartIdx &lt;= oldEndIdx &amp;&amp; newStartIdx &lt;= newEndIdx) { // å¦‚æœoldVnodeçš„ç¬¬ä¸€ä¸ªchildä¸å­˜åœ¨ if (isUndef(oldStartVnode)) { // oldStartç´¢å¼•å³ç§» oldStartVnode = oldCh[++oldStartIdx] // Vnode has been moved left // å¦‚æœoldVnodeçš„æœ€åä¸€ä¸ªchildä¸å­˜åœ¨ } else if (isUndef(oldEndVnode)) { // oldEndç´¢å¼•å·¦ç§» oldEndVnode = oldCh[--oldEndIdx] // oldStartVnodeå’ŒnewStartVnodeæ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ } else if (sameVnode(oldStartVnode, newStartVnode)) { // patch oldStartVnodeå’ŒnewStartVnodeï¼Œ ç´¢å¼•å·¦ç§»ï¼Œç»§ç»­å¾ªç¯ patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue) oldStartVnode = oldCh[++oldStartIdx] newStartVnode = newCh[++newStartIdx] // oldEndVnodeå’ŒnewEndVnodeæ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ } else if (sameVnode(oldEndVnode, newEndVnode)) { // patch oldEndVnodeå’ŒnewEndVnodeï¼Œç´¢å¼•å³ç§»ï¼Œç»§ç»­å¾ªç¯ patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue) oldEndVnode = oldCh[--oldEndIdx] newEndVnode = newCh[--newEndIdx] // oldStartVnodeå’ŒnewEndVnodeæ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right // patch oldStartVnodeå’ŒnewEndVnode patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue) // å¦‚æœremoveOnlyæ˜¯falseï¼Œåˆ™å°†oldStartVnode.emlç§»åŠ¨åˆ°oldEndVnode.elmä¹‹å canMove &amp;&amp; nodeOps.insertBefore(parentElm, oldStartVnode.elm, nodeOps.nextSibling(oldEndVnode.elm)) // oldStartç´¢å¼•å³ç§»ï¼ŒnewEndç´¢å¼•å·¦ç§» oldStartVnode = oldCh[++oldStartIdx] newEndVnode = newCh[--newEndIdx] // å¦‚æœoldEndVnodeå’ŒnewStartVnodeæ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left // patch oldEndVnodeå’ŒnewStartVnode patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue) // å¦‚æœremoveOnlyæ˜¯falseï¼Œåˆ™å°†oldEndVnode.elmç§»åŠ¨åˆ°oldStartVnode.elmä¹‹å‰ canMove &amp;&amp; nodeOps.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm) // oldEndç´¢å¼•å·¦ç§»ï¼ŒnewStartç´¢å¼•å³ç§» oldEndVnode = oldCh[--oldEndIdx] newStartVnode = newCh[++newStartIdx] // å¦‚æœéƒ½ä¸åŒ¹é… } else { if (isUndef(oldKeyToIdx)) oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx) // å°è¯•åœ¨oldChildrenä¸­å¯»æ‰¾å’ŒnewStartVnodeçš„å…·æœ‰ç›¸åŒçš„keyçš„Vnode idxInOld = isDef(newStartVnode.key) ? oldKeyToIdx[newStartVnode.key] : findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx) // å¦‚æœæœªæ‰¾åˆ°ï¼Œè¯´æ˜newStartVnodeæ˜¯ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ if (isUndef(idxInOld)) { // New element // åˆ›å»ºä¸€ä¸ªæ–°Vnode createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm) // å¦‚æœæ‰¾åˆ°äº†å’ŒnewStartVnodejå…·æœ‰ç›¸åŒçš„keyçš„Vnodeï¼Œå«vnodeToMove } else { vnodeToMove = oldCh[idxInOld] /* istanbul ignore if */ if (process.env.NODE_ENV !== 'production' &amp;&amp; !vnodeToMove) { warn( 'It seems there are duplicate keys that is causing an update error. ' + 'Make sure each v-for item has a unique key.' ) } // æ¯”è¾ƒä¸¤ä¸ªå…·æœ‰ç›¸åŒçš„keyçš„æ–°èŠ‚ç‚¹æ˜¯å¦æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ //ä¸è®¾keyï¼ŒnewChå’ŒoldChåªä¼šè¿›è¡Œå¤´å°¾ä¸¤ç«¯çš„ç›¸äº’æ¯”è¾ƒï¼Œè®¾keyåï¼Œé™¤äº†å¤´å°¾ä¸¤ç«¯çš„æ¯”è¾ƒå¤–ï¼Œè¿˜ä¼šä»ç”¨keyç”Ÿæˆçš„å¯¹è±¡oldKeyToIdxä¸­æŸ¥æ‰¾åŒ¹é…çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä¸ºèŠ‚ç‚¹è®¾ç½®keyå¯ä»¥æ›´é«˜æ•ˆçš„åˆ©ç”¨domã€‚ if (sameVnode(vnodeToMove, newStartVnode)) { // patch vnodeToMoveå’ŒnewStartVnode patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue) // æ¸…é™¤ oldCh[idxInOld] = undefined // å¦‚æœremoveOnlyæ˜¯falseï¼Œåˆ™å°†æ‰¾åˆ°çš„å’ŒnewStartVnodejå…·æœ‰ç›¸åŒçš„keyçš„Vnodeï¼Œå«vnodeToMove.elm // ç§»åŠ¨åˆ°oldStartVnode.elmä¹‹å‰ canMove &amp;&amp; nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm) // å¦‚æœkeyç›¸åŒï¼Œä½†æ˜¯èŠ‚ç‚¹ä¸ç›¸åŒï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ } else { // same key but different element. treat as new element createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm) } } // å³ç§» newStartVnode = newCh[++newStartIdx] } } whileå¾ªç¯ä¸»è¦å¤„ç†äº†ä»¥ä¸‹äº”ç§æƒ…æ™¯ï¼š å½“æ–°è€ VNode èŠ‚ç‚¹çš„ start ç›¸åŒæ—¶ï¼Œç›´æ¥ patchVnode ï¼ŒåŒæ—¶æ–°è€ VNode èŠ‚ç‚¹çš„å¼€å§‹ç´¢å¼•éƒ½åŠ  1 å½“æ–°è€ VNode èŠ‚ç‚¹çš„ endç›¸åŒæ—¶ï¼ŒåŒæ ·ç›´æ¥ patchVnode ï¼ŒåŒæ—¶æ–°è€ VNode èŠ‚ç‚¹çš„ç»“æŸç´¢å¼•éƒ½å‡ 1 å½“è€ VNode èŠ‚ç‚¹çš„ start å’Œæ–° VNode èŠ‚ç‚¹çš„ end ç›¸åŒæ—¶ï¼Œè¿™æ—¶å€™åœ¨ patchVnode åï¼Œè¿˜éœ€è¦å°†å½“å‰çœŸå® dom èŠ‚ç‚¹ç§»åŠ¨åˆ° oldEndVnode çš„åé¢ï¼ŒåŒæ—¶è€ VNode èŠ‚ç‚¹å¼€å§‹ç´¢å¼•åŠ  1ï¼Œæ–° VNode èŠ‚ç‚¹çš„ç»“æŸç´¢å¼•å‡ 1 å½“è€ VNode èŠ‚ç‚¹çš„ end å’Œæ–° VNode èŠ‚ç‚¹çš„ start ç›¸åŒæ—¶ï¼Œè¿™æ—¶å€™åœ¨ patchVnode åï¼Œè¿˜éœ€è¦å°†å½“å‰çœŸå® dom èŠ‚ç‚¹ç§»åŠ¨åˆ° oldStartVnode çš„å‰é¢ï¼ŒåŒæ—¶è€ VNode èŠ‚ç‚¹ç»“æŸç´¢å¼•å‡ 1ï¼Œæ–° VNode èŠ‚ç‚¹çš„å¼€å§‹ç´¢å¼•åŠ  1 å¦‚æœéƒ½ä¸æ»¡è¶³ä»¥ä¸Šå››ç§æƒ…å½¢ï¼Œé‚£è¯´æ˜æ²¡æœ‰ç›¸åŒçš„èŠ‚ç‚¹å¯ä»¥å¤ç”¨ï¼Œåˆ™ä¼šåˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š ä»æ—§çš„ VNode ä¸º key å€¼ï¼Œå¯¹åº” index åºåˆ—ä¸º value å€¼çš„å“ˆå¸Œè¡¨ä¸­æ‰¾åˆ°ä¸ newStartVnode ä¸€è‡´ key çš„æ—§çš„ VNode èŠ‚ç‚¹ï¼Œå†è¿›è¡ŒpatchVnode ï¼ŒåŒæ—¶å°†è¿™ä¸ªçœŸå® dom ç§»åŠ¨åˆ° oldStartVnode å¯¹åº”çš„çœŸå® dom çš„å‰é¢ è°ƒç”¨ createElm åˆ›å»ºä¸€ä¸ªæ–°çš„ dom èŠ‚ç‚¹æ”¾åˆ°å½“å‰ newStartIdx çš„ä½ç½®å°ç»“ å½“æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè®¢é˜…è€…watcherå°±ä¼šè°ƒç”¨patchç»™çœŸå®çš„DOMæ‰“è¡¥ä¸ é€šè¿‡isSameVnodeè¿›è¡Œåˆ¤æ–­ï¼Œç›¸åŒåˆ™è°ƒç”¨patchVnodeæ–¹æ³• patchVnodeåšäº†ä»¥ä¸‹æ“ä½œï¼š æ‰¾åˆ°å¯¹åº”çš„çœŸå®domï¼Œç§°ä¸ºel å¦‚æœéƒ½æœ‰éƒ½æœ‰æ–‡æœ¬èŠ‚ç‚¹ä¸”ä¸ç›¸ç­‰ï¼Œå°†elæ–‡æœ¬èŠ‚ç‚¹è®¾ç½®ä¸ºVnodeçš„æ–‡æœ¬èŠ‚ç‚¹ å¦‚æœoldVnodeæœ‰å­èŠ‚ç‚¹è€ŒVNodeæ²¡æœ‰ï¼Œåˆ™åˆ é™¤elå­èŠ‚ç‚¹ å¦‚æœoldVnodeæ²¡æœ‰å­èŠ‚ç‚¹è€ŒVNodeæœ‰ï¼Œåˆ™å°†VNodeçš„å­èŠ‚ç‚¹çœŸå®åŒ–åæ·»åŠ åˆ°el å¦‚æœä¸¤è€…éƒ½æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡ŒupdateChildrenå‡½æ•°æ¯”è¾ƒå­èŠ‚ç‚¹ updateChildrenä¸»è¦åšäº†ä»¥ä¸‹æ“ä½œï¼š è®¾ç½®æ–°æ—§VNodeçš„å¤´å°¾æŒ‡é’ˆ æ–°æ—§å¤´å°¾æŒ‡é’ˆè¿›è¡Œæ¯”è¾ƒï¼Œå¾ªç¯å‘ä¸­é—´é æ‹¢ï¼Œæ ¹æ®æƒ…å†µè°ƒç”¨patchVnodeè¿›è¡Œpatché‡å¤æµç¨‹ã€è°ƒç”¨createElemåˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œä»å“ˆå¸Œè¡¨å¯»æ‰¾key ä¸€è‡´çš„VNodeèŠ‚ç‚¹å†åˆ†æƒ…å†µæ“ä½œ å‚è€ƒ ä½ äº†è§£diffç®—æ³•å— è™šæ‹ŸDOM &amp; diffç®—æ³• è™šæ‹ŸDOMåŸç†çš„ç†è§£ è™šæ‹ŸDOMå’ŒDOM-diff è™šæ‹ŸDOMåˆ°åº•æ˜¯ä»€ä¹ˆ diffç®—æ³•è¯¦è§£ Vueåº•å±‚æ¶æ„ core watcher vnode diffç®—æ³•Vueåº•å±‚æ¶æ„ æ•°æ®ç›‘å¬å‚è€ƒ $setVue æ€ä¹ˆç”¨ vm.$set() è§£å†³å¯¹è±¡æ–°å¢å±æ€§ä¸èƒ½å“åº”çš„é—®é¢˜ ï¼Ÿ å—ç°ä»£ JavaScript çš„é™åˆ¶ ï¼ŒVue æ— æ³•æ£€æµ‹åˆ°å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤ã€‚ç”±äº Vue ä¼šåœ¨åˆå§‹åŒ–å®ä¾‹æ—¶å¯¹å±æ€§æ‰§è¡Œ getter/setter è½¬åŒ–ï¼Œæ‰€ä»¥å±æ€§å¿…é¡»åœ¨ data å¯¹è±¡ä¸Šå­˜åœ¨æ‰èƒ½è®© Vue å°†å®ƒè½¬æ¢ä¸ºå“åº”å¼çš„ã€‚ä½†æ˜¯ Vue æä¾›äº† Vue.set (object, propertyName, value) / vm.$set (object, propertyName, value) æ¥å®ç°ä¸ºå¯¹è±¡æ·»åŠ å“åº”å¼å±æ€§ï¼Œé‚£æ¡†æ¶æœ¬èº«æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿé€šè¿‡Vue.setå‘å“åº”å¼å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ªpropertyï¼Œå¹¶ç¡®ä¿è¿™ä¸ªæ–° property åŒæ ·æ˜¯å“åº”å¼çš„ï¼Œä¸”è§¦å‘è§†å›¾æ›´æ–° 1234567891011121314151617181920212223242526// æºç export function set (target: Array&lt;any&gt; | Object, key: any, val: any): any { // target ä¸ºæ•°ç»„ if (Array.isArray(target) &amp;&amp; isValidArrayIndex(key)) { // ä¿®æ”¹æ•°ç»„çš„é•¿åº¦, é¿å…ç´¢å¼•&gt;æ•°ç»„é•¿åº¦å¯¼è‡´splcie()æ‰§è¡Œæœ‰è¯¯ target.length = Math.max(target.length, key) // åˆ©ç”¨æ•°ç»„çš„spliceå˜å¼‚æ–¹æ³•è§¦å‘å“åº”å¼ target.splice(key, 1, val) return val } // key å·²ç»å­˜åœ¨ï¼Œç›´æ¥ä¿®æ”¹å±æ€§å€¼ if (key in target &amp;&amp; !(key in Object.prototype)) { target[key] = val return val } const ob = (target: any).__ob__ // target æœ¬èº«å°±ä¸æ˜¯å“åº”å¼æ•°æ®, ç›´æ¥èµ‹å€¼ if (!ob) { target[key] = val return val } // å¯¹å±æ€§è¿›è¡Œå“åº”å¼å¤„ç† defineReactive(ob.value, key, val) ob.dep.notify() return val} è¿™é‡Œæ— éå†æ¬¡è°ƒç”¨ defineReactive æ–¹æ³•ï¼Œå®ç°æ–°å¢å±æ€§çš„å“åº”å¼ï¼Œå…³äºdefineReactiveæ–¹æ³•ï¼Œå†…éƒ¨è¿˜æ˜¯é€šè¿‡ Object.defineProperty å®ç°å±æ€§æ‹¦æˆªï¼Œå¤§è‡´ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314function defineReactive(obj, key, val) { Object.defineProperty(obj, key, { get() { console.log(`get ${key}:${val}`); return val }, set(newVal) { if (newVal !== val) { console.log(`set ${key}:${newVal}`); val = newVal } } })} æˆ‘ä»¬é˜…è¯»ä»¥ä¸Šæºç å¯çŸ¥ï¼Œvm.$set çš„å®ç°åŸç†æ˜¯ï¼š å¦‚æœç›®æ ‡æ˜¯æ•°ç»„ï¼Œç›´æ¥ä½¿ç”¨æ•°ç»„çš„ splice æ–¹æ³•è§¦å‘ç›¸åº”å¼ï¼› å¦‚æœç›®æ ‡æ˜¯å¯¹è±¡ï¼Œä¼šå…ˆåˆ¤è¯»å±æ€§æ˜¯å¦å­˜åœ¨ã€å¯¹è±¡æ˜¯å¦æ˜¯å“åº”å¼ï¼Œæœ€ç»ˆå¦‚æœè¦å¯¹å±æ€§è¿›è¡Œå“åº”å¼å¤„ç†ï¼Œåˆ™æ˜¯é€šè¿‡è°ƒç”¨ defineReactive æ–¹æ³•è¿›è¡Œå“åº”å¼å¤„ç†ï¼ˆ defineReactive æ–¹æ³•å°±æ˜¯ Vue åœ¨åˆå§‹åŒ–å¯¹è±¡æ—¶ï¼Œç»™å¯¹è±¡å±æ€§é‡‡ç”¨ Object.defineProperty åŠ¨æ€æ·»åŠ  getter å’Œ setter çš„åŠŸèƒ½æ‰€è°ƒç”¨çš„æ–¹æ³•ï¼‰","link":"/2022/03/12/Vue/vue-diff/"},{"title":"vue-question","text":"å¯¹ nextTick çš„ç†è§£ å¯¹ mixin çš„ç†è§£ å¯¹ slot çš„ç†è§£ å¯¹ Observable çš„ç†è§£ vueä¸­keyçš„åŸç† vueæƒé™ç®¡ç† render new Vue bus vue2 ä¸ vue3 çš„åŒºåˆ« nextTick åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè·å–æ›´æ–°åçš„ DOM Vue åœ¨æ›´æ–° DOM æ—¶æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–ï¼ŒVueå°†å¼€å¯ä¸€ä¸ªå¼‚æ­¥æ›´æ–°é˜Ÿåˆ—ï¼Œè§†å›¾éœ€è¦ç­‰é˜Ÿåˆ—ä¸­æ‰€æœ‰æ•°æ®å˜åŒ–å®Œæˆä¹‹åï¼Œå†ç»Ÿä¸€è¿›è¡Œæ›´æ–° $nextTick() ä¼šè¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¯ä»¥æ˜¯ç”¨async/awaitå®Œæˆç›¸åŒä½œç”¨çš„äº‹æƒ… 1234this.message = 'ä¿®æ”¹åçš„å€¼'console.log(this.$el.textContent) // =&gt; 'åŸå§‹çš„å€¼'await this.$nextTick()console.log(this.$el.textContent) // =&gt; 'ä¿®æ”¹åçš„å€¼' å‚è€ƒè¯´è¯´ä½ å¯¹nextTickçš„ç†è§£ï¼Ÿ mixin mixinï¼ˆæ··å…¥ï¼‰ï¼Œæä¾›äº†ä¸€ç§éå¸¸çµæ´»çš„æ–¹å¼ï¼Œæ¥åˆ†å‘ Vue ç»„ä»¶ä¸­çš„å¯å¤ç”¨åŠŸèƒ½ã€‚ æœ¬è´¨å…¶å®å°±æ˜¯ä¸€ä¸ªjså¯¹è±¡ï¼Œå®ƒå¯ä»¥åŒ…å«æˆ‘ä»¬ç»„ä»¶ä¸­ä»»æ„åŠŸèƒ½é€‰é¡¹ï¼Œå¦‚dataã€componentsã€methods ã€createdã€computedç­‰ç­‰ã€‚æˆ‘ä»¬åªè¦å°†å…±ç”¨çš„åŠŸèƒ½ä»¥å¯¹è±¡çš„æ–¹å¼ä¼ å…¥ mixinsé€‰é¡¹ä¸­ï¼Œå½“ç»„ä»¶ä½¿ç”¨ mixins å¯¹è±¡æ—¶æ‰€æœ‰ mixins å¯¹è±¡çš„é€‰é¡¹éƒ½å°†è¢«æ··å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ä¸­æ¥ã€‚ æ³¨æ„äº‹é¡¹ï¼šå½“ç»„ä»¶å­˜åœ¨ä¸mixinå¯¹è±¡ç›¸åŒçš„é€‰é¡¹çš„æ—¶å€™ï¼Œè¿›è¡Œé€’å½’åˆå¹¶çš„æ—¶å€™ç»„ä»¶çš„é€‰é¡¹ä¼šè¦†ç›–mixinçš„é€‰é¡¹ï¼Œä½†æ˜¯å¦‚æœç›¸åŒé€‰é¡¹ä¸ºç”Ÿå‘½å‘¨æœŸé’©å­çš„æ—¶å€™ï¼Œä¼šåˆå¹¶æˆä¸€ä¸ªæ•°ç»„ï¼Œå…ˆæ‰§è¡Œmixinçš„é’©å­ï¼Œå†æ‰§è¡Œç»„ä»¶çš„é’©å­ slot é»˜è®¤æ’æ§½ å…·åæ’æ§½ ä½œç”¨åŸŸæ’æ§½ é»˜è®¤æ’æ§½1234567891011// å­ç»„ä»¶&lt;template&gt; &lt;slot&gt; &lt;p&gt;æ’æ§½åå¤‡çš„å†…å®¹&lt;/p&gt; &lt;/slot&gt;&lt;/template&gt;// çˆ¶ç»„ä»¶&lt;Child&gt; &lt;div&gt;é»˜è®¤æ’æ§½&lt;/div&gt; &lt;/Child&gt; å…·åæ’æ§½123456789101112// å­ç»„ä»¶&lt;template&gt; &lt;slot&gt;æ’æ§½åå¤‡çš„å†…å®¹&lt;/slot&gt; &lt;slot name=&quot;content&quot;&gt;æ’æ§½åå¤‡çš„å†…å®¹&lt;/slot&gt;&lt;/template&gt;// çˆ¶ç»„ä»¶&lt;child&gt; &lt;template v-slot:default&gt;å…·åæ’æ§½&lt;/template&gt; &lt;!-- å…·åæ’æ§½â½¤æ’æ§½ååšå‚æ•° --&gt; &lt;template v-slot:content&gt;å†…å®¹...&lt;/template&gt;&lt;/child&gt; ä½œç”¨åŸŸæ’æ§½1234567891011121314151617// å­ç»„ä»¶&lt;template&gt; &lt;slot name=&quot;footer&quot; testProps=&quot;å­ç»„ä»¶çš„å€¼&quot;&gt; &lt;h3&gt;æ²¡ä¼ footeræ’æ§½&lt;/h3&gt; &lt;/slot&gt;&lt;/template&gt;// çˆ¶ç»„ä»¶&lt;child&gt; &lt;!-- æŠŠv-slotçš„å€¼æŒ‡å®šä¸ºä½œâ½¤åŸŸä¸Šä¸‹â½‚å¯¹è±¡ --&gt; &lt;template v-slot:default=&quot;slotProps&quot;&gt; æ¥â¾ƒâ¼¦ç»„ä»¶æ•°æ®ï¼š{{slotProps.testProps}} &lt;/template&gt; &lt;template #default=&quot;slotProps&quot;&gt; æ¥â¾ƒâ¼¦ç»„ä»¶æ•°æ®ï¼š{{slotProps.testProps}} &lt;/template&gt;&lt;/child&gt; å°ç»“ v-slotå±æ€§åªèƒ½åœ¨ template ä¸Šä½¿ç”¨ï¼Œä½†åœ¨åªæœ‰é»˜è®¤æ’æ§½æ—¶å¯ä»¥åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šä½¿ç”¨ é»˜è®¤æ’æ§½åä¸ºdefaultï¼Œå¯ä»¥çœç•¥defaultç›´æ¥å†™v-slot ç¼©å†™ä¸º#æ—¶ä¸èƒ½ä¸å†™å‚æ•°ï¼Œå†™æˆ#default å¯ä»¥é€šè¿‡è§£æ„è·å–v-slot={user}ï¼Œè¿˜å¯ä»¥é‡å‘½åv-slot=&quot;{user: newName}&quot;å’Œå®šä¹‰é»˜è®¤å€¼v-slot=&quot;{user = 'é»˜è®¤å€¼'}&quot; Observable Vue.observable è®©ä¸€ä¸ªå¯¹è±¡å˜æˆå“åº”å¼æ•°æ®ã€‚Vue å†…éƒ¨ä¼šç”¨å®ƒæ¥å¤„ç† data å‡½æ•°è¿”å›çš„å¯¹è±¡ è¿”å›çš„å¯¹è±¡å¯ä»¥ç›´æ¥ç”¨äºæ¸²æŸ“å‡½æ•°å’Œè®¡ç®—å±æ€§å†…ï¼Œå¹¶ä¸”ä¼šåœ¨å‘ç”Ÿå˜æ›´æ—¶è§¦å‘ç›¸åº”çš„æ›´æ–°ã€‚ä¹Ÿå¯ä»¥ä½œä¸ºæœ€å°åŒ–çš„è·¨ç»„ä»¶çŠ¶æ€å­˜å‚¨å™¨ 123Vue.observable({ count : 1})// å…¶ä½œç”¨ç­‰åŒäºnew vue({ count : 1}) å®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354// store.jsimport Vue from &quot;vue&quot;export const state = Vue.observable({ count: 0})export const mutations = { add(payload) { if (payload &gt; 0) { state.count = payload } }, reduce(payload) { if (payload &gt; 0) { state.count = payload } }}// page.vue&lt;template&gt; &lt;div class=&quot;observable&quot;&gt; &lt;h4&gt;Observable1&lt;/h4&gt; &lt;div class=&quot;observable-layout&quot;&gt; &lt;button @click=&quot;add&quot;&gt;add&lt;/button&gt; &lt;h4&gt;{{ count }}&lt;/h4&gt; &lt;button @click=&quot;reduce&quot;&gt;reduce&lt;/button&gt; &lt;/div&gt; &lt;div&gt;&lt;button @click=&quot;go&quot;&gt;go to Observable2&lt;/button&gt;&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import { state } from &quot;./store.js&quot;;export default { data() { return {}; }, computed: { count() { return state.count; }, }, methods: { add() { state.count++; }, reduce() { state.count--; }, go() { this.$router.push({ name: &quot;About&quot; }); }, },};&lt;/script&gt; åœ¨ Vue 2.x ä¸­ï¼Œè¢«ä¼ å…¥çš„å¯¹è±¡ä¼šç›´æ¥è¢« Vue.observable å˜æ›´ï¼Œå®ƒå’Œè¢«è¿”å›çš„å¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡åœ¨ Vue 3.x ä¸­ï¼Œåˆ™ä¼šè¿”å›ä¸€ä¸ªå¯å“åº”çš„ä»£ç†ï¼Œè€Œå¯¹æºå¯¹è±¡ç›´æ¥è¿›è¡Œå˜æ›´ä»ç„¶æ˜¯ä¸å¯å“åº”çš„ ä½¿ç”¨åœºæ™¯åœ¨éçˆ¶å­ç»„ä»¶é€šä¿¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é€šå¸¸çš„busæˆ–è€…ä½¿ç”¨vuexï¼Œä½†æ˜¯å®ç°çš„åŠŸèƒ½ä¸æ˜¯å¤ªå¤æ‚ï¼Œè€Œä½¿ç”¨ä¸Šé¢ä¸¤ä¸ªåˆæœ‰ç‚¹ç¹çã€‚è¿™æ—¶ï¼Œobservableå°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ 1234567891011121314151617// åˆ›å»ºjsæ–‡ä»¶// å¼•å…¥vueimport Vue from 'vue// åˆ›å»ºstateå¯¹è±¡ï¼Œä½¿ç”¨observableè®©stateå¯¹è±¡å¯å“åº”export let state = Vue.observable({ name: 'å¼ ä¸‰', 'age': 38})// åˆ›å»ºå¯¹åº”çš„æ–¹æ³•export let mutations = { changeName(name) { state.name = name }, setAge(age) { state.age = age }} 1234567891011121314151617181920212223242526// .vueæ–‡ä»¶ä¸­ä½¿ç”¨&lt;template&gt; &lt;div&gt; å§“åï¼š{{ name }} å¹´é¾„ï¼š{{ age }} &lt;button @click=&quot;changeName('æå››')&quot;&gt;æ”¹å˜å§“å&lt;/button&gt; &lt;button @click=&quot;setAge(18)&quot;&gt;æ”¹å˜å¹´é¾„&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;import { state, mutations } from '@/storeexport default { // åœ¨è®¡ç®—å±æ€§ä¸­æ‹¿åˆ°å€¼ computed: { name() { return state.name }, age() { return state.age } }, // è°ƒç”¨mutationsé‡Œé¢çš„æ–¹æ³•ï¼Œæ›´æ–°æ•°æ® methods: { changeName: mutations.changeName, setAge: mutations.setAge }} vueä¸­keyçš„åŸç† keyæ˜¯ç»™æ¯ä¸€ä¸ª vnode çš„å”¯ä¸€idï¼Œä¹Ÿæ˜¯ diff çš„ä¸€ç§ä¼˜åŒ–ç­–ç•¥ï¼Œå¯ä»¥æ ¹æ®keyï¼Œæ›´å‡†ç¡®ï¼Œ æ›´å¿«çš„æ‰¾åˆ°å¯¹åº”çš„vnodeèŠ‚ç‚¹ èƒŒåçš„é€»è¾‘å½“æˆ‘ä»¬åœ¨ä½¿ç”¨v-foræ—¶ï¼Œéœ€è¦ç»™å•å…ƒåŠ ä¸Škeyï¼š å¦‚æœä¸ç”¨keyï¼ŒVueä¼šé‡‡ç”¨å°±åœ°å¤åœ°åŸåˆ™ï¼šæœ€å°åŒ–elementçš„ç§»åŠ¨ï¼Œå¹¶ä¸”ä¼šå°è¯•å°½æœ€å¤§ç¨‹åº¦åœ¨åŒé€‚å½“çš„åœ°æ–¹å¯¹ç›¸åŒç±»å‹çš„elementï¼Œåšpatchæˆ–è€…reuseã€‚ å¦‚æœä½¿ç”¨äº†keyï¼ŒVueä¼šæ ¹æ®keysçš„é¡ºåºè®°å½•elementï¼Œæ›¾ç»æ‹¥æœ‰äº†keyçš„elementå¦‚æœä¸å†å‡ºç°çš„è¯ï¼Œä¼šè¢«ç›´æ¥removeæˆ–è€…destoryedåŒºåˆ«123456789101112131415161718&lt;body&gt; &lt;div id=&quot;demo&quot;&gt; &lt;p v-for=&quot;item in items&quot; :key=&quot;item&quot;&gt;{{item}}&lt;/p&gt; &lt;/div&gt; &lt;script src=&quot;../../dist/vue.js&quot;&gt;&lt;/script&gt; &lt;script&gt; // åˆ›å»ºå®ä¾‹ const app = new Vue({ el: '#demo', data: { items: ['a', 'b', 'c', 'd', 'e'] }, mounted () { setTimeout(() =&gt; { this.items.splice(2, 0, 'f') // }, 2000); }, }); &lt;/script&gt;&lt;/body&gt; åœ¨ä¸ä½¿ç”¨keyçš„æƒ…å†µï¼Œvueä¼šè¿›è¡Œè¿™æ ·çš„æ“ä½œï¼š æ¯”è¾ƒAï¼ŒAï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œpatchï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿdomæ“ä½œ æ¯”è¾ƒBï¼ŒBï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œpatchï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿdomæ“ä½œ æ¯”è¾ƒCï¼ŒFï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œpatchï¼Œæ•°æ®ä¸åŒï¼Œå‘ç”Ÿdomæ“ä½œ æ¯”è¾ƒDï¼ŒCï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œpatchï¼Œæ•°æ®ä¸åŒï¼Œå‘ç”Ÿdomæ“ä½œ æ¯”è¾ƒEï¼ŒDï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œpatchï¼Œæ•°æ®ä¸åŒï¼Œå‘ç”Ÿdomæ“ä½œå¾ªç¯ç»“æŸï¼Œå°†Eæ’å…¥åˆ°DOMä¸­ ä¸€å…±å‘ç”Ÿäº†3æ¬¡æ›´æ–°ï¼Œ1æ¬¡æ’å…¥æ“ä½œ åœ¨ä½¿ç”¨keyçš„æƒ…å†µï¼švueä¼šè¿›è¡Œè¿™æ ·çš„æ“ä½œï¼š æ¯”è¾ƒAï¼ŒAï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œpatchï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿdomæ“ä½œ æ¯”è¾ƒBï¼ŒBï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œpatchï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿdomæ“ä½œ æ¯”è¾ƒCï¼ŒFï¼Œä¸ç›¸åŒç±»å‹çš„èŠ‚ç‚¹ æ¯”è¾ƒEã€Eï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œpatchï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿdomæ“ä½œ æ¯”è¾ƒDã€Dï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œpatchï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿdomæ“ä½œ æ¯”è¾ƒCã€Cï¼Œç›¸åŒç±»å‹çš„èŠ‚ç‚¹ï¼Œè¿›è¡Œpatchï¼Œä½†æ•°æ®ç›¸åŒï¼Œä¸å‘ç”Ÿdomæ“ä½œå¾ªç¯ç»“æŸï¼Œå°†Fæ’å…¥åˆ°Cä¹‹å‰ ä¸€å…±å‘ç”Ÿäº†0æ¬¡æ›´æ–°ï¼Œ1æ¬¡æ’å…¥æ“ä½œ é€šè¿‡ä¸Šé¢ä¸¤ä¸ªå°ä¾‹å­ï¼Œå¯è§è®¾ç½®keyèƒ½å¤Ÿå¤§å¤§å‡å°‘å¯¹é¡µé¢çš„DOMæ“ä½œï¼Œæé«˜äº†diffæ•ˆç‡ è®¾ç½®keyå€¼ä¸€å®šèƒ½æé«˜diffæ•ˆç‡å—ï¼Ÿå…¶å®ä¸ç„¶ï¼Œå®˜æ–¹æ–‡æ¡£æ˜ç¡®è¡¨ç¤ºï¼š å½“ Vue.js ç”¨ v-for æ­£åœ¨æ›´æ–°å·²æ¸²æŸ“è¿‡çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œå®ƒé»˜è®¤ç”¨â€œå°±åœ°å¤ç”¨â€ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼ŒVue å°†ä¸ä¼šç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œ è€Œæ˜¯ç®€å•å¤ç”¨æ­¤å¤„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¡®ä¿å®ƒåœ¨ç‰¹å®šç´¢å¼•ä¸‹æ˜¾ç¤ºå·²è¢«æ¸²æŸ“è¿‡çš„æ¯ä¸ªå…ƒç´  è¿™ä¸ªé»˜è®¤çš„æ¨¡å¼æ˜¯é«˜æ•ˆçš„ï¼Œä½†æ˜¯åªé€‚ç”¨äºä¸ä¾èµ–å­ç»„ä»¶çŠ¶æ€æˆ–ä¸´æ—¶ DOM çŠ¶æ€ (ä¾‹å¦‚ï¼šè¡¨å•è¾“å…¥å€¼) çš„åˆ—è¡¨æ¸²æŸ“è¾“å‡ºã€‚ å»ºè®®å°½å¯èƒ½åœ¨ä½¿ç”¨ v-for æ—¶æä¾› keyï¼Œé™¤ééå†è¾“å‡ºçš„ DOM å†…å®¹éå¸¸ç®€å•ï¼Œæˆ–è€…æ˜¯åˆ»æ„ä¾èµ–é»˜è®¤è¡Œä¸ºä»¥è·å–æ€§èƒ½ä¸Šçš„æå‡ã€‚ vueæƒé™ç®¡ç† æ¥å£æƒé™(è¿”å›401) è·¯ç”±æƒé™ èœå•æƒé™ æŒ‰é’®æƒé™æ¥å£æƒé™æ¥å£æƒé™ç›®å‰ä¸€èˆ¬é‡‡ç”¨jwtçš„å½¢å¼æ¥éªŒè¯ï¼Œæ²¡æœ‰é€šè¿‡çš„è¯ä¸€èˆ¬è¿”å›401ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢é‡æ–°è¿›è¡Œç™»å½•ã€‚ç™»å½•å®Œæ‹¿åˆ°tokenï¼Œå°†tokenå­˜èµ·æ¥ï¼Œé€šè¿‡axiosè¯·æ±‚æ‹¦æˆªå™¨è¿›è¡Œæ‹¦æˆªï¼Œæ¯æ¬¡è¯·æ±‚çš„æ—¶å€™å¤´éƒ¨æºå¸¦token123456789axios.interceptors.request.use(config =&gt; { config.headers['token'] = cookie.get('token') return config})axios.interceptors.response.use(res=&gt;{},{response}=&gt;{ if (response.data.code === 40099 || response.data.code === 40098) { //tokenè¿‡æœŸæˆ–è€…é”™è¯¯ router.push('/login') }}) è·¯ç”±æƒé™åˆå§‹åŒ–çš„æ—¶å€™å…ˆæŒ‚è½½ä¸éœ€è¦æƒé™æ§åˆ¶çš„è·¯ç”±ï¼Œæ¯”å¦‚ç™»å½•é¡µï¼Œ404ç­‰é”™è¯¯é¡µã€‚å¦‚æœç”¨æˆ·é€šè¿‡URLè¿›è¡Œå¼ºåˆ¶è®¿é—®ï¼Œåˆ™ä¼šç›´æ¥è¿›å…¥404ï¼Œç›¸å½“äºä»æºå¤´ä¸Šåšäº†æ§åˆ¶ã€‚ç™»å½•åï¼Œè·å–ç”¨æˆ·çš„æƒé™ä¿¡æ¯ï¼Œç„¶åç­›é€‰æœ‰æƒé™è®¿é—®çš„è·¯ç”±ï¼Œåœ¨å…¨å±€è·¯ç”±å®ˆå«é‡Œè¿›è¡Œè°ƒç”¨addRoutesæ·»åŠ è·¯ç”±ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263import router from './router'import store from './store'import { Message } from 'element-ui'import NProgress from 'nprogress' // progress barimport 'nprogress/nprogress.css'// progress bar styleimport { getToken } from '@/utils/auth' // getToken from cookieNProgress.configure({ showSpinner: false })// NProgress Configuration// permission judge functionfunction hasPermission(roles, permissionRoles) { if (roles.indexOf('admin') &gt;= 0) return true // admin permission passed directly if (!permissionRoles) return true return roles.some(role =&gt; permissionRoles.indexOf(role) &gt;= 0)}const whiteList = ['/login', '/authredirect']// no redirect whitelistrouter.beforeEach((to, from, next) =&gt; { NProgress.start() // start progress bar if (getToken()) { // determine if there has token /* has token*/ if (to.path === '/login') { next({ path: '/' }) NProgress.done() // if current page is dashboard will not trigger afterEach hook, so manually handle it } else { if (store.getters.roles.length === 0) { // åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦å·²æ‹‰å–å®Œuser_infoä¿¡æ¯ store.dispatch('GetUserInfo').then(res =&gt; { // æ‹‰å–user_info const roles = res.data.roles // note: roles must be a array! such as: ['editor','develop'] store.dispatch('GenerateRoutes', { roles }).then(() =&gt; { // æ ¹æ®rolesæƒé™ç”Ÿæˆå¯è®¿é—®çš„è·¯ç”±è¡¨ router.addRoutes(store.getters.addRouters) // åŠ¨æ€æ·»åŠ å¯è®¿é—®è·¯ç”±è¡¨ next({ ...to, replace: true }) // hackæ–¹æ³• ç¡®ä¿addRouteså·²å®Œæˆ ,set the replace: true so the navigation will not leave a history record }) }).catch((err) =&gt; { store.dispatch('FedLogOut').then(() =&gt; { Message.error(err || 'Verification failed, please login again') next({ path: '/' }) }) }) } else { // æ²¡æœ‰åŠ¨æ€æ”¹å˜æƒé™çš„éœ€æ±‚å¯ç›´æ¥next() åˆ é™¤ä¸‹æ–¹æƒé™åˆ¤æ–­ â†“ if (hasPermission(store.getters.roles, to.meta.roles)) { next()// } else { next({ path: '/401', replace: true, query: { noGoBack: true }}) } // å¯åˆ  â†‘ } } } else { /* has no token*/ if (whiteList.indexOf(to.path) !== -1) { // åœ¨å…ç™»å½•ç™½åå•ï¼Œç›´æ¥è¿›å…¥ next() } else { next('/login') // å¦åˆ™å…¨éƒ¨é‡å®šå‘åˆ°ç™»å½•é¡µ NProgress.done() // if current page is login will not trigger afterEach hook, so manually handle it } }})router.afterEach(() =&gt; { NProgress.done() // finish progress bar}) æŒ‰éœ€æŒ‚è½½ï¼Œè·¯ç”±å°±éœ€è¦çŸ¥é“ç”¨æˆ·çš„è·¯ç”±æƒé™ï¼Œä¹Ÿå°±æ˜¯åœ¨ç”¨æˆ·ç™»å½•è¿›æ¥çš„æ—¶å€™å°±è¦çŸ¥é“å½“å‰ç”¨æˆ·æ‹¥æœ‰å“ªäº›è·¯ç”±æƒé™.è¿™ç§æ–¹å¼ä¹Ÿå­˜åœ¨äº†ä»¥ä¸‹çš„ç¼ºç‚¹ï¼š å…¨å±€è·¯ç”±å®ˆå«é‡Œï¼Œæ¯æ¬¡è·¯ç”±è·³è½¬éƒ½è¦åšåˆ¤æ–­ èœå•ä¿¡æ¯å†™æ­»åœ¨å‰ç«¯ï¼Œè¦æ”¹ä¸ªæ˜¾ç¤ºæ–‡å­—æˆ–æƒé™ä¿¡æ¯ï¼Œéœ€è¦é‡æ–°ç¼–è¯‘ èœå•è·Ÿè·¯ç”±è€¦åˆåœ¨ä¸€èµ·ï¼Œå®šä¹‰è·¯ç”±çš„æ—¶å€™è¿˜æœ‰æ·»åŠ èœå•æ˜¾ç¤ºæ ‡é¢˜ï¼Œå›¾æ ‡ä¹‹ç±»çš„ä¿¡æ¯ï¼Œè€Œä¸”è·¯ç”±ä¸ä¸€å®šä½œä¸ºèœå•æ˜¾ç¤ºï¼Œè¿˜è¦å¤šåŠ å­—æ®µè¿›è¡Œæ ‡è¯†èœå•æƒé™èœå•æƒé™å¯ä»¥ç†è§£æˆå°†é¡µé¢ä¸è·¯ç”±è¿›è¡Œè§£è€¦èœå•ä¸è·¯ç”±åˆ†ç¦»ï¼Œå‰ç«¯å®šä¹‰è·¯ç”±ï¼Œèœå•ç”±åç«¯è¿”å›ï¼š12345{ name: &quot;login&quot;, path: &quot;/login&quot;, component: () =&gt; import(&quot;@/pages/Login.vue&quot;)} nameå­—æ®µä¸ä¸ºç©ºï¼Œéœ€è¦æ ¹æ®æ­¤å­—æ®µä¸åç«¯è¿”å›èœå•åšå…³è”ï¼Œåç«¯è¿”å›çš„èœå•ä¿¡æ¯ä¸­å¿…é¡»è¦æœ‰nameå¯¹åº”çš„å­—æ®µï¼Œå¹¶ä¸”åšå”¯ä¸€æ€§æ ¡éªŒ.å…¨å±€è·¯ç”±å®ˆå«é‡Œåšåˆ¤æ–­: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758function hasPermission(router, accessMenu) { if (whiteList.indexOf(router.path) !== -1) { return true; } let menu = Util.getMenuByName(router.name, accessMenu); if (menu.name) { return true; } return false;}Router.beforeEach(async (to, from, next) =&gt; { if (getToken()) { let userInfo = store.state.user.userInfo; if (!userInfo.name) { try { await store.dispatch(&quot;GetUserInfo&quot;) await store.dispatch('updateAccessMenu') if (to.path === '/login') { next({ name: 'home_index' }) } else { //Util.toDefaultPage([...routers], to.name, router, next); next({ ...to, replace: true })//èœå•æƒé™æ›´æ–°å®Œæˆ,é‡æ–°è¿›ä¸€æ¬¡å½“å‰è·¯ç”± } } catch (e) { if (whiteList.indexOf(to.path) !== -1) { // åœ¨å…ç™»å½•ç™½åå•ï¼Œç›´æ¥è¿›å…¥ next() } else { next('/login') } } } else { if (to.path === '/login') { next({ name: 'home_index' }) } else { if (hasPermission(to, store.getters.accessMenu)) { Util.toDefaultPage(store.getters.accessMenu,to, routes, next); } else { next({ path: '/403',replace:true }) } } } } else { if (whiteList.indexOf(to.path) !== -1) { // åœ¨å…ç™»å½•ç™½åå•ï¼Œç›´æ¥è¿›å…¥ next() } else { next('/login') } } let menu = Util.getMenuByName(to.name, store.getters.accessMenu); Util.title(menu.title);});Router.afterEach((to) =&gt; { window.scrollTo(0, 0);}); æ¯æ¬¡è·¯ç”±è·³è½¬çš„æ—¶å€™éƒ½è¦åˆ¤æ–­æƒé™ï¼Œè¿™é‡Œçš„åˆ¤æ–­ä¹Ÿå¾ˆç®€å•ï¼Œå› ä¸ºèœå•çš„nameä¸è·¯ç”±çš„nameæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œè€Œåç«¯è¿”å›çš„èœå•å°±å·²ç»æ˜¯ç»è¿‡æƒé™è¿‡æ»¤çš„ã€‚å¦‚æœæ ¹æ®è·¯ç”±nameæ‰¾ä¸åˆ°å¯¹åº”çš„èœå•ï¼Œå°±è¡¨ç¤ºç”¨æˆ·æœ‰æ²¡æƒé™è®¿é—®ã€‚å¦‚æœè·¯ç”±å¾ˆå¤šï¼Œå¯ä»¥åœ¨åº”ç”¨åˆå§‹åŒ–çš„æ—¶å€™ï¼ŒåªæŒ‚è½½ä¸éœ€è¦æƒé™æ§åˆ¶çš„è·¯ç”±ã€‚å–å¾—åç«¯è¿”å›çš„èœå•åï¼Œæ ¹æ®èœå•ä¸è·¯ç”±çš„å¯¹åº”å…³ç³»ï¼Œç­›é€‰å‡ºå¯è®¿é—®çš„è·¯ç”±ï¼Œé€šè¿‡addRoutesåŠ¨æ€æŒ‚è½½ã€‚ è¿™ç§æ–¹å¼çš„ç¼ºç‚¹ï¼š èœå•éœ€è¦ä¸è·¯ç”±åšä¸€ä¸€å¯¹åº”ï¼Œå‰ç«¯æ·»åŠ äº†æ–°åŠŸèƒ½ï¼Œéœ€è¦é€šè¿‡èœå•ç®¡ç†åŠŸèƒ½æ·»åŠ æ–°çš„èœå•ï¼Œå¦‚æœèœå•é…ç½®çš„ä¸å¯¹ä¼šå¯¼è‡´åº”ç”¨ä¸èƒ½æ­£å¸¸ä½¿ç”¨ å…¨å±€è·¯ç”±å®ˆå«é‡Œï¼Œæ¯æ¬¡è·¯ç”±è·³è½¬éƒ½è¦åšåˆ¤æ–­ æŒ‰é’®æƒé™è‡ªå®šä¹‰æƒé™é‰´å®šæŒ‡ä»¤ 1234567891011121314151617181920212223242526272829303132333435import Vue from 'vue'/**æƒé™æŒ‡ä»¤**/const has = Vue.directive('has', { bind: function (el, binding, vnode) { // è·å–é¡µé¢æŒ‰é’®æƒé™ let btnPermissionsArr = []; if(binding.value){ // å¦‚æœæŒ‡ä»¤ä¼ å€¼ï¼Œè·å–æŒ‡ä»¤å‚æ•°ï¼Œæ ¹æ®æŒ‡ä»¤å‚æ•°å’Œå½“å‰ç™»å½•äººæŒ‰é’®æƒé™åšæ¯”è¾ƒã€‚ btnPermissionsArr = Array.of(binding.value); }else{ // å¦åˆ™è·å–è·¯ç”±ä¸­çš„å‚æ•°ï¼Œæ ¹æ®è·¯ç”±çš„btnPermissionsArrå’Œå½“å‰ç™»å½•äººæŒ‰é’®æƒé™åšæ¯”è¾ƒã€‚ btnPermissionsArr = vnode.context.$route.meta.btnPermissions; } if (!Vue.prototype.$_has(btnPermissionsArr)) { el.parentNode.removeChild(el); } }});// æƒé™æ£€æŸ¥æ–¹æ³•Vue.prototype.$_has = function (value) { let isExist = false; // è·å–ç”¨æˆ·æŒ‰é’®æƒé™ let btnPermissionsStr = sessionStorage.getItem(&quot;btnPermissions&quot;); if (btnPermissionsStr == undefined || btnPermissionsStr == null) { return false; } if (value.indexOf(btnPermissionsStr) &gt; -1) { isExist = true; } return isExist;};export {has}// ä½¿ç”¨&lt;el-button @click='editClick' type=&quot;primary&quot; v-has&gt;ç¼–è¾‘&lt;/el-button&gt; å‚è€ƒ Vueæ€ä¹ˆå®ç°æƒé™ç®¡ç†renderrender:å¯¹templateçš„è§£ææ­¥éª¤å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š å°†htmlæ–‡æ¡£ç‰‡æ®µè§£ææˆastæè¿°ç¬¦ å°†astæè¿°ç¬¦è§£ææˆå­—ç¬¦ä¸² ç”Ÿæˆrenderå‡½æ•° ç”Ÿæˆrenderå‡½æ•°ï¼ŒæŒ‚è½½åˆ°vmä¸Šåï¼Œä¼šå†æ¬¡è°ƒç”¨mountæ–¹æ³• renderçš„ä½œç”¨ä¸»è¦æ˜¯ç”Ÿæˆvnode _updateä¸»è¦åŠŸèƒ½æ˜¯è°ƒç”¨patchï¼Œå°†vnodeè½¬æ¢ä¸ºçœŸå®DOMï¼Œå¹¶ä¸”æ›´æ–°åˆ°é¡µé¢ä¸­ new Vuenew Vue æŒ‚è½½å‘ç”Ÿçš„è¿‡ç¨‹ï¼š new Vueçš„æ—¶å€™è°ƒç”¨ä¼šè°ƒç”¨_initæ–¹æ³• å®šä¹‰ $setã€ $get ã€$deleteã€$watch ç­‰æ–¹æ³• å®šä¹‰ $onã€$offã€$emitã€$off ç­‰äº‹ä»¶ å®šä¹‰ _updateã€$forceUpdateã€$destroyç”Ÿå‘½å‘¨æœŸ è°ƒç”¨$mountè¿›è¡Œé¡µé¢çš„æŒ‚è½½ æŒ‚è½½çš„æ—¶å€™ä¸»è¦æ˜¯é€šè¿‡mountComponentæ–¹æ³• å®šä¹‰updateComponentæ›´æ–°å‡½æ•° æ‰§è¡Œrenderç”Ÿæˆè™šæ‹ŸDOM _updateå°†è™šæ‹ŸDOMç”ŸæˆçœŸå®DOMç»“æ„ï¼Œå¹¶ä¸”æ¸²æŸ“åˆ°é¡µé¢ä¸­ Bus12345678910111213import Vue from 'vue'const Bus = new Vue()Vue.prototype.bus = new Vue();new Vue({ render: h =&gt; h(App) ...}).$mount('#app');/**é€šè¿‡æŠŠä¸€ä¸ªvueå®ä¾‹èµ‹äºVueæ„é€ å‡½æ•°åŸå‹ä¸Šçš„ä¸€ä¸ªå±æ€§busï¼ˆå½“ç„¶èµ·ä»»ä½•åç§°éƒ½æ˜¯å¯ä»¥çš„ï¼‰*è€Œæ¯ä¸ªVueå®ä¾‹éƒ½æ˜¯æœ‰$emitå’Œ$onæ–¹æ³•çš„*ç”±äºbuså±æ€§åœ¨VueåŸå‹ä¸Šï¼Œæ ¹æ®åŸå‹é“¾æŸ¥æ‰¾è§„åˆ™ï¼Œåœ¨é¡µé¢ä¸­æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ this.bus.$emit å’Œ *this.bus.$onæ¥è¿›è¡Œè·¨ç»„ä»¶é€šä¿¡äº†*/ vue2 ä¸ vue3çš„åŒºåˆ« æ‰“åŒ…ä½“ç§¯æ›´å° ç›¸æ¯”Vue2ï¼ŒVue3æ•´ä½“ä½“ç§¯å˜å°äº†ï¼Œé™¤äº†ç§»å‡ºä¸€äº›ä¸å¸¸ç”¨çš„APIï¼Œå†é‡è¦çš„æ˜¯Tree sharkingï¼Œä»»ä½•ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚refã€reactiveã€computedç­‰ï¼Œä»…ä»…åœ¨ç”¨åˆ°çš„æ—¶å€™æ‰æ‰“åŒ…ï¼Œæ²¡ç”¨åˆ°çš„æ¨¡å—éƒ½è¢«æ‘‡æ‰ï¼Œæ‰“åŒ…çš„æ•´ä½“ä½“ç§¯å˜å° æ€§èƒ½ä¼˜åŒ–ï¼šVue.js 3.0ä½¿ç”¨äº† Proxy æ›¿ä»£ Object.defineProperty å®ç°å“åº”å¼ï¼Œå¹¶ä¸”ä½¿ç”¨äº†é™æ€æå‡æŠ€æœ¯æ¥æé«˜æ¸²æŸ“æ€§èƒ½ã€‚æ–°å¢äº†ç¼–è¯‘æ—¶ä¼˜åŒ–ï¼Œåœ¨ç¼–è¯‘æ—¶è¿›è¡Œæ¨¡æ¿é™æ€åˆ†æï¼Œå¹¶ç”Ÿæˆæ›´é«˜æ•ˆçš„æ¸²æŸ“å‡½æ•°ã€‚ å¯ä»¥ç›‘å¬åŠ¨æ€å±æ€§çš„æ·»åŠ  å¯ä»¥ç›‘å¬åˆ°æ•°ç»„çš„ç´¢å¼•å’Œæ•°ç»„lengthå±æ€§ å¯ä»¥ç›‘å¬åˆ é™¤å±æ€§ Composition APIï¼šComposition APIæ˜¯ä¸€ä¸ªå…¨æ–°çš„ç»„ä»¶é€»è¾‘å¤ç”¨æ–¹å¼ï¼Œå¯ä»¥æ›´å¥½åœ°ç»„åˆå’Œå¤ç”¨ç»„ä»¶çš„é€»è¾‘ï¼Œç›¸æ¯”é€‰é¡¹å¼æ›´å¥½çš„é€»è¾‘ç»„ç»‡ï¼Œæ¯”mixinæ›´å¥½çš„é€»è¾‘å¤ç”¨ã€‚ TypeScriptæ”¯æŒï¼šVue.js 3.0å®Œå…¨æ”¯æŒTypeScriptï¼Œåœ¨ç¼–å†™Vueåº”ç”¨ç¨‹åºæ—¶å¯ä»¥æ›´æ–¹ä¾¿åœ°åˆ©ç”¨TSçš„ç±»å‹æ£€æŸ¥å’Œè‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ã€‚ æ–°çš„è‡ªå®šä¹‰æ¸²æŸ“APIï¼šVue.js 3.0çš„è‡ªå®šä¹‰æ¸²æŸ“APIå…è®¸å¼€å‘è€…åœ¨ç»†ç²’åº¦ä¸Šæ§åˆ¶ç»„ä»¶æ¸²æŸ“è¡Œä¸ºï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰æ¸²æŸ“å™¨ã€ç»„ä»¶äº‹ä»¶å’Œç”Ÿå‘½å‘¨æœŸç­‰ã€‚ æ”¹è¿›çš„Vue CLIï¼šVue.js 3.0ä½¿ç”¨äº†æ”¹è¿›çš„Vue CLIï¼Œå¯ä»¥æ›´åŠ çµæ´»åœ°é…ç½®é¡¹ç›®ï¼ŒåŒæ—¶æ”¯æŒVue.js2.xé¡¹ç›®å‡çº§åˆ°Vue.js 3.0ã€‚ ç§»é™¤ä¸€äº›APIï¼šVue.js 3.0ç§»é™¤äº†ä¸€äº›ä¸å¸¸ç”¨çš„APIï¼Œå¦‚è¿‡æ¸¡ç›¸å…³APIï¼Œéƒ¨åˆ†ä¿®é¥°ç¬¦ï¼Œ.syncç­‰ã€‚ diffç®—æ³•ä¼˜åŒ–ï¼Œå¢åŠ äº†é™æ€æ ‡è®° å…³äºè¿™ä¸ªé™æ€æ ‡è®°ï¼Œå…¶ä½œç”¨æ˜¯ä¸ºäº†ä¼šå‘ç”Ÿå˜åŒ–çš„åœ°æ–¹æ·»åŠ ä¸€ä¸ªflagæ ‡è®°ï¼Œä¸‹æ¬¡å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ç›´æ¥æ‰¾è¯¥åœ°æ–¹è¿›è¡Œæ¯”è¾ƒ Proxyå’ŒObject.definePropertyçš„åŒºåˆ«ï¼ŸProxy å’Œ Object.defineProperty éƒ½å¯ä»¥ç”¨æ¥å®ç°JavaScriptå¯¹è±¡çš„å“åº”å¼ï¼Œä½†æ˜¯å®ƒä»¬æœ‰ä¸€äº›åŒºåˆ«ï¼š å®ç°æ–¹å¼ï¼šProxy æ˜¯ES6æ–°å¢çš„ä¸€ç§ç‰¹æ€§ï¼Œä½¿ç”¨äº†ä¸€ç§ä»£ç†æœºåˆ¶æ¥å®ç°å“åº”å¼ã€‚è€Œ Object.defineProperty æ˜¯åœ¨ES5ä¸­å¼•å…¥çš„ï¼Œä½¿ç”¨äº†getterå’Œsetteræ–¹æ³•æ¥å®ç°ã€‚ ä½œç”¨å¯¹è±¡ï¼šProxyå¯ä»¥ä»£ç†æ•´ä¸ªå¯¹è±¡ï¼ŒåŒ…æ‹¬å¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€æ•°ç»„çš„æ‰€æœ‰å…ƒç´ ä»¥åŠç±»ä¼¼æ•°ç»„å¯¹è±¡çš„æ‰€æœ‰å…ƒç´ ã€‚è€ŒObject.definePropertyåªèƒ½ä»£ç†å¯¹è±¡ä¸Šå®šä¹‰çš„å±æ€§ã€‚ ç›‘å¬å±æ€§ï¼šProxyå¯ä»¥ç›‘å¬åˆ°æ–°å¢å±æ€§å’Œåˆ é™¤å±æ€§çš„æ“ä½œï¼Œè€ŒObject.definePropertyåªèƒ½ç›‘å¬åˆ°å·²ç»å®šä¹‰çš„å±æ€§çš„å˜åŒ–ã€‚ æ€§èƒ½ï¼šç”±äºProxyæ˜¯ES6æ–°å¢ç‰¹æ€§ï¼Œå…¶å†…éƒ¨å®ç°é‡‡ç”¨äº†æ›´åŠ é«˜æ•ˆçš„ç®—æ³•ï¼Œç›¸å¯¹äºObject.definePropertyæ¥è¯´åœ¨æ€§èƒ½æ–¹é¢æœ‰ä¸€å®šçš„ä¼˜åŠ¿ã€‚ ç»¼ä¸Šæ‰€è¿°ï¼Œè™½ç„¶Object.definePropertyåœ¨Vue.js 2.xä¸­ç”¨æ¥å®ç°å“åº”å¼ï¼Œä½†æ˜¯åœ¨Vue.js 3.0ä¸­å·²ç»é‡‡ç”¨äº†Proxyæ¥æ›¿ä»£ï¼Œè¿™æ˜¯å› ä¸ºProxyç›¸å¯¹äºObject.definePropertyæ‹¥æœ‰æ›´ä¼˜å¼‚çš„æ€§èƒ½å’Œæ›´å¼ºå¤§çš„èƒ½åŠ›ã€‚ å‚è€ƒ Vueç³»åˆ—é¢˜é›† Vue3ä¸Vue2çš„ä¼˜åŠ¿åŠåŒºåˆ«","link":"/2024/02/21/Vue/vue-question/"}],"tags":[{"name":"æ•°æ®ç»“æ„&amp;ç®—æ³•","slug":"æ•°æ®ç»“æ„-ç®—æ³•","link":"/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/"},{"name":"JavaScript","slug":"JavaScript","link":"/tags/JavaScript/"},{"name":"ç½‘ç»œ","slug":"ç½‘ç»œ","link":"/tags/%E7%BD%91%E7%BB%9C/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"æ€§èƒ½ä¼˜åŒ–","link":"/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"},{"name":"æµè§ˆå™¨","slug":"æµè§ˆå™¨","link":"/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"},{"name":"HTML&amp;CSS","slug":"HTML-CSS","link":"/tags/HTML-CSS/"},{"name":"å·¥ç¨‹åŒ–","slug":"å·¥ç¨‹åŒ–","link":"/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/"},{"name":"React","slug":"React","link":"/tags/React/"},{"name":"Safe","slug":"Safe","link":"/tags/Safe/"},{"name":"TypeScript","slug":"TypeScript","link":"/tags/TypeScript/"},{"name":"å…¶ä»–","slug":"å…¶ä»–","link":"/tags/%E5%85%B6%E4%BB%96/"},{"name":"Vue","slug":"Vue","link":"/tags/Vue/"},{"name":"Hexo","slug":"Hexo","link":"/tags/Hexo/"}],"categories":[{"name":"æ•°æ®ç»“æ„&amp;ç®—æ³•","slug":"Arithmetic","link":"/categories/Arithmetic/"},{"name":"JavaScript","slug":"JavaScript","link":"/categories/JavaScript/"},{"name":"ç½‘ç»œ","slug":"NetWork","link":"/categories/NetWork/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Optimizing","link":"/categories/Optimizing/"},{"name":"æµè§ˆå™¨","slug":"Browser","link":"/categories/Browser/"},{"name":"HTML&amp;CSS","slug":"Html-Css","link":"/categories/Html-Css/"},{"name":"å·¥ç¨‹åŒ–","slug":"Engineering","link":"/categories/Engineering/"},{"name":"React","slug":"React","link":"/categories/React/"},{"name":"Safe","slug":"Safe","link":"/categories/Safe/"},{"name":"TypeScript","slug":"TypeScript","link":"/categories/TypeScript/"},{"name":"å…¶ä»–","slug":"Other","link":"/categories/Other/"},{"name":"Vue","slug":"Vue","link":"/categories/Vue/"},{"name":"Hexo","slug":"Hexo","link":"/categories/Hexo/"}]}